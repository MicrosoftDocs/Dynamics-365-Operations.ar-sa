---
title: التكاليف التلقائية المتقدمة ‬للقناة متعددة الاتجاهات
description: يصف هذا الموضوع القدرات المتعلقة بإدارة تكاليف الأوامر الإضافية لأوامر قناة Commerce باستخدام ميزات التكاليف التلقائية المتقدمة.
author: hhaines
manager: annbe
ms.date: 03/30/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: hhaines
ms.search.validFrom: ''
ms.dyn365.ops.version: 10
ms.openlocfilehash: 2d463bf01659aeb6599023ce46da0c604f8eeff0
ms.sourcegitcommit: 776758a0ff95c3c7398986095104d1d2b9814514
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/24/2020
ms.locfileid: "4107365"
---
# <a name="omni-channel-advanced-auto-charges"></a><span data-ttu-id="b3bc6-103">التكاليف التلقائية المتقدمة ‬للقناة متعددة الاتجاهات</span><span class="sxs-lookup"><span data-stu-id="b3bc6-103">Omni-channel advanced auto charges</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="b3bc6-104">يوفر هذا الموضوع معلومات حول تكوين ونشر ميزات التكاليف التلقائية المتقدمة التي تتوفر في الإصدار 10.0 من Dynamics 365 for Retail.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-104">This topic provides information on configuration and deployment of the advanced auto charges features that are available in Dynamics 365 for Retail version 10.0.</span></span>

<span data-ttu-id="b3bc6-105">عند تمكين ميزات التكاليف التلقائية المتقدمة، بإمكان الأوامر التي تم إنشاؤها في قناة Commerce معتمدة (نقطة البيع (POS) ومركز الاتصال وعبر الإنترنت) الاستفادة من تكوينات [التكاليف التلقائية](https://docs.microsoft.com/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) المحددة في تطبيق ERP للتكاليف المرتبطة على مستوى الرأس والبنود.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-105">When the advanced auto charges features are enabled, orders created in any supported Commerce channel (point of sale (POS), call center, and online), can take advantage of the [auto charges](https://docs.microsoft.com/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) configurations defined in the ERP application for both header and line-level related charges.</span></span>

<span data-ttu-id="b3bc6-106">في الإصدارات التي سبقت الإصدار 10.0 من Retail، يمكن الوصول إلى تكوينات [التكلفة التلقائية](https://docs.microsoft.com/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) حسب الأوامر التي تم إنشاؤها في قنوات التجارة الإلكترونية ومراكز الاتصال.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-106">In releases prior to Retail version 10.0, [auto charge](https://docs.microsoft.com/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) configurations are only accessible by orders created in e-Commerce and call center channels.</span></span> <span data-ttu-id="b3bc6-107">أما في الإصدارات 10.0 والإصدارات الأحدث، فبإمكان الأوامر المُنشأة في نقاط البيع الاستفادة من تكوينات التكاليف التلقائية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-107">In versions 10.0 and later, POS-created orders can leverage the auto charges configurations.</span></span> <span data-ttu-id="b3bc6-108">وبهذه الطريقة، يمكن إضافة تكاليف متنوعة إضافية إلى حركات المبيعات بطريقة منهجية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-108">That way, additional miscellaneous charges can systematically be added to sales transactions.</span></span>

<span data-ttu-id="b3bc6-109">عند استخدام الإصدارات التي تسبق الإصدار 10.0، تتم مطالبة مستخدم نقطع البيع بإدخال رسوم الشحن يدويًا أثناء إنشاء حركة نقطة البيع "شحن الكل‬" أو "شحن المحدد".</span><span class="sxs-lookup"><span data-stu-id="b3bc6-109">When using releases prior to version 10.0, a POS user is prompted to manually enter a shipping fee during the creation of a "ship all" or "ship selected" POS transaction.</span></span> <span data-ttu-id="b3bc6-110">في حين يتم استخدام إمكانات التكاليف المتنوعة للتطبيق فيما يتعلق بكيفية كتابة التكاليف بالترتيب ، لا يتم توفير حساب منهجي - يعتمد الحساب على إدخال المستخدم لتحديد قيمة التكاليف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-110">While the miscellaneous charges capabilities of the application are utilized in respect to how the charges are written to the order, no systematic calculation is provided – the calculation relies on the user's input to determine the value of the charges.</span></span> <span data-ttu-id="b3bc6-111">ويمكن إضافة التكاليف فقط ككود التكاليف ذات الصلة لعملية "شحن" واحدة، ولا يمكن تغييرها أو تحريرها بسهولة في نقطة البيع بعد إنشائها.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-111">The charges can only be added as a single "shipping" related charges code and cannot easily be edited or changed in the POS after they are created.</span></span>

<span data-ttu-id="b3bc6-112">ما زال استخدام المطالبات اليدوية لإضافة تكاليف الشحن متوفرًا في الإصدارات 10.0 والإصدارات التالية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-112">The use of manual prompts to add shipping charges is still available in versions 10.0 and later.</span></span> <span data-ttu-id="b3bc6-113">إذا لم تقم المؤسسة بتمكين معلمة **التكاليف التلقائية المتقدمة** ، فستبقى مطالبات نقطة البيع بالإدخال اليدوي للمصاريف كما هي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-113">If an organization does not enable the **Advanced Auto-charges** parameter, the POS prompts for manual entry of charges will remain the same.</span></span>

<span data-ttu-id="b3bc6-114">باستخدام ميزة التكاليف التلقائية المتقدمة، بإمكان مستخدمي نقطة البيع الحصول على الحسابات المنهجية لأي تكاليف متنوعة محددة استنادًا إلى جداول إعداد التكاليف التلقائية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-114">With the advanced auto charges feature, POS users can have systematic calculations for any defined miscellaneous charges based on auto charges setup tables.</span></span> <span data-ttu-id="b3bc6-115">بالإضافة إلى ذلك، ستتوفر لدى المستخدمين القدرة على إضافة أو تحرير عدد غير محدد من التكاليف والرسوم الإضافية لأية حركة مبيعات في نقطة البيع على مستوى الرأس أو البنود (للحركات التي تعتمد على الدفع نقدًا والاستلام فورًا أو أوامر العملاء).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-115">In addition, users will have the ability to add or edit an unlimited number of additional charges and fees to any POS sales transaction at the header or line-level (for a cash and carry or customer order).</span></span>

## <a name="enabling-advanced-auto-charges"></a><span data-ttu-id="b3bc6-116">تمكين التكاليف التلقائية المتقدمة</span><span class="sxs-lookup"><span data-stu-id="b3bc6-116">Enabling advanced auto charges</span></span>

<span data-ttu-id="b3bc6-117">في صفحة **Retail and Commerce \> إعداد المراكز الرئيسية \> المعلمات \> معلمات البيع بالتجزئة** ، وانتقل إلى علامة التبويب **أوامر العملاء**. على علامة التبويب السريع **التكاليف** ، عيّن **استخدام التكاليف التلقائية المتقدمة ‬** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-117">On the **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce parameters** page, go to the **Customer orders** tab. On the **Charges** FastTab, set **Use advanced auto-charges** to **Yes**.</span></span>

![معلمة التكاليف التلقائية المتقدمة](media/advancedchargesparameter.png)

<span data-ttu-id="b3bc6-119">عند تمكين التكاليف التلقائية المتقدمة، لن تتم مطالبة المستخدمين بإدخال تكاليف الشحن في الوحدة الطرفية لنقطة البيع عند إنشاء أمر عميل "شحن الكل" أو "شحن المحدد".</span><span class="sxs-lookup"><span data-stu-id="b3bc6-119">When advanced auto charges are enabled, users are no longer prompted to manually enter a shipping charge at the POS terminal when creating a ship-all or ship-selected customer order.</span></span> <span data-ttu-id="b3bc6-120">ويتم حساب تكاليف أوامر نقطة البيع بشكل منهجي ثم تضاف إلى حركة نقطة البيع (إذا تم العثور على جدول تكاليف تلقائية مناظر يتطابق مع معيار الأمر).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-120">POS order charges are systematically calculated and added to the POS transaction (if a corresponding auto charges table that matches the criterion of the order being created are found).</span></span> <span data-ttu-id="b3bc6-121">بإمكان المستخدمين أيضًا إضافة التكاليف على مستوى البنود أو الرأس أو المحافظة عليها يدويًا من خلال عمليات نقطة البيع المضافة حديثًا التي يمكن إضافتها إلى تخطيطات شاشة نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-121">Users can also add or maintain header or line-level charges manually through newly added POS operations that can be added to the POS screen layouts.</span></span>

<span data-ttu-id="b3bc6-122">عند تمكين التكاليف التلقائية المتقدمة، سيتوقف استخدام **معلمات Commerce** لكل من **كود تكاليف الشحن** و **المبلغ المسترد من تكاليف الشحن**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-122">When advanced auto charges are enabled, the existing **Commerce parameters** for **Shipping charges code** and **Refund shipping charges** are no longer utilized.</span></span> <span data-ttu-id="b3bc6-123">هذه المعلمات قابلة للتطبيق فقط إذا تم تعيين معلمة **استخدام التكاليف التلقائية المتقدمة** إلى **لا**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-123">These parameters are only applicable if the **Use advanced auto charges** parameter is set to **No**.</span></span>

<span data-ttu-id="b3bc6-124">قبل تمكين هذه الميزة، تأكد من إخضاع الموظفين للتدريبات والاختبارات اللازمة، لأن الميزة الممكنة سوف تغير سير العمليات التجارية من حيث كيفية حساب تكاليف الشحن أو التكاليف الأخرى وإضافتها إلى أوامر مبيعات نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-124">Before you enable this feature, ensure that you have tested and trained your employees, as the enabled feature will change the business process flow of how shipping or other charges are calculated and added to POS sales orders.</span></span> <span data-ttu-id="b3bc6-125">تأكد من فهم تأثير سير العملية على إنشاء الحركات من نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-125">Make sure that you understand the impact of the process flow to the creation of transactions from POS.</span></span> <span data-ttu-id="b3bc6-126">فيما يتعلق بأوامر التجارة الإلكترونية ومراكز الاتصال، يعتبر تأثير تمكين التكاليف التلقائية المتقدمة ثانويًا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-126">For call center and e-Commerce orders, the impact of enabling advanced auto charges is minimal.</span></span> <span data-ttu-id="b3bc6-127">ستحافظ تطبيقات التجارة الإلكترونية ومراكز الاتصال على السلوك السابق نفسه المرتبط بجداول التكاليف التلقائية لحساب رسوم الأوامر الإضافية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-127">Call center and e-Commerce applications will continue to have the same behavior they have had historically related to the auto charges tables to calculate additional order fees.</span></span> <span data-ttu-id="b3bc6-128">سيبقى باستطاعة مستخدمي قنوات مراكز الاتصال إجراء عمليات تحرير يدوية للتكاليف التلقائية التي يحتسبها النظام على مستوى الرأس أو البنود، أو إضافة تكاليف متنوعة إضافية يدويًا على مستوى الرأس أو البنود.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-128">Call center channel users will continue to have the ability to manually edit any system calculated auto charges at the header or line level, or manually add additional miscellaneous charges at the header or line level.</span></span>

## <a name="additional-pos-operations"></a><span data-ttu-id="b3bc6-129">عمليات نقطة البيع الإضافية</span><span class="sxs-lookup"><span data-stu-id="b3bc6-129">Additional POS operations</span></span>

<span data-ttu-id="b3bc6-130">لكي تعمل التكاليف التلقائية المتقدمة بشكل صحيح في البيئة تطبيق نقطة البيع، تمت إضافة عمليات جديدة في نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-130">For advanced auto charges to work properly in your POS application environment, new POS operations have been added.</span></span> <span data-ttu-id="b3bc6-131">يجب إضافة هذه العمليات إلى [تخطيطات شاشة نقطة البيع](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) ونشرها على أجهزة نقطة البيع أثناء نشر التكاليف التلقائية المتقدمة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-131">These operations must be added to your [POS screen layouts](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) and deployed to the POS devices as you deploy advanced auto charges.</span></span> <span data-ttu-id="b3bc6-132">في حال عدم إضافة هذه العمليات، سيتعذر على المستخدمين إدارة التكاليف المتنوعة في حركات نقاط البيع أو المحافظة عليها، وسيتعذر عليهم ضبط أو تغيير قيم التكاليف التي تم يتم حسابها بشكل منهجي استنادًا إلى تكوينات التكاليف التلقائية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-132">If these operations are not added, users will not be able to manage or maintain miscellaneous charges on the POS transactions and will have no way of adjusting or changing the charges values that are systematically calculated based on auto charges configurations.</span></span> <span data-ttu-id="b3bc6-133">في الحد الأدنى، من المستحسن نشر عملية **إدارة التكاليف** في مخطط نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-133">At minimum, it is suggested that you deploy the **Manage charges** operation to your POS layout.</span></span>

<span data-ttu-id="b3bc6-134">العمليات الجديدة هي على الشكل التالي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-134">The new operations are as follows.</span></span>

- <span data-ttu-id="b3bc6-135">**142 - إدارة التكاليف** - استخدم هذه العملية للسماح لمستخدمي نقطة البيع بعرض وتحرير التكاليف‏‎ المتنوعة الخاصة بحركة نقطة البيع التي تمت إضافتها يدويًا أو منهجيًا من خلال حسابات التكاليف التلقائية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-135">**142 - Manage charges** – Use this operation to allow POS users to view and edit miscellaneous charges for the POS transaction that were either added manually or systematically through auto charges calculations.</span></span>
- <span data-ttu-id="b3bc6-136">**141 - إضافة تكاليف الرأس** - استخدم هذه العملية لمنح المستخدم القدرة على إضافة تكاليف متنوعة على مستوى الرأس‏‎ إلى أي حركة مبيعات في نقطة البيع بطريقة يدوية (وتحديد كود التكاليف الذي يجب استخدامه).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-136">**141 - Add header charges** – Use this operation to give the user the ability to manually add a header-level miscellaneous charge to any POS sales transaction (and select the charges code to be used).</span></span>
- <span data-ttu-id="b3bc6-137">**140- إضافة تكاليف البنود** - استخدم هذه العملية لمنح المستخدم القدرة على إضافة تكاليف متنوعة على مستوى البنود‏‎ إلى أي بند حركة مبيعات في نقطة البيع بطريقة يدوية (وتحديد كود التكاليف الذي يجب استخدامه).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-137">**140 - Add line charges** – Use this operation to give the user the ability to manually add a line level miscellaneous charge to any POS sales transaction line (and select the charges code to be used).</span></span>
- <span data-ttu-id="b3bc6-138">**143- إعادة حساب التكاليف** - استخدم هذه العملية لإنجاز عملية إعادة حساب كاملة للتكاليف لحركة مبيعات.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-138">**143 - Recalculate charges** – Use this operation to perform a full recalculation of the charges for the sales transaction.</span></span> <span data-ttu-id="b3bc6-139">سيُعاد حساب أية تكاليف تلقائية سابقة كتب المستخدم فوقها استنادًا إلى تكوين السلة الحالية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-139">Any previously user-overwritten auto charges will be recalculated based on the current cart configuration.</span></span>

<span data-ttu-id="b3bc6-140">كما هو الحال مع كافة عمليات نقطة البيع، يمكنك تحديد تكوينات الأمان لطلب الحصول على موافقة المدير لتنفيذ العملية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-140">As with all POS operations, security configurations can be made to require manager approval in order to execute the operation.</span></span>

<span data-ttu-id="b3bc6-141">من الضروري أن تلاحظ أن أنه يمكن أيضًا إضافة عمليات نقطة البيع المدرجة أعلاه إلى تخطيط نقطة البيع حتى لو كانت المعلمة **استخدام التكاليف التلقائية المتقدمة** معطّلة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-141">It is important to note that the above listed POS operations can also be added to the POS layout even if the **Use advanced auto-charges** parameter is disabled.</span></span> <span data-ttu-id="b3bc6-142">في هذا السيناريو، سوف تستمر المؤسسات في الحصول على الفوائد المضافة المتمثلة في القدرة على عرض التكاليف‏‎ المضافة يدويًا وتعديلها باستخدام عملية **إدارة التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-142">In this scenario, organizations will still get added benefits of being able to view manually added charges and edit them using the **Manage charges** operation.</span></span> <span data-ttu-id="b3bc6-143">بإمكان المستخدمين أيضًا استخدام عمليات **إضافة تكاليف‬ الرأس‬** و **إضافة تكاليف البنود‬** لحركات نقاط البيع حتى عندما تكون المعلمة **استخدام التكاليف التلقائية المتقدمة** معطلة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-143">Users may also use the **Add header charges** and **Add line charges** operations for POS transactions even when **Use advanced auto-charges** parameter is disabled.</span></span> <span data-ttu-id="b3bc6-144">تتضمن العملية **إعادة حساب التكاليف** وظائف أقل إذا تم استخدامها في الوقت الذي تكون فيه المعلمة **استخدام التكاليف التلقائية المتقدمة** معطلة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-144">The **Recalculate charges** operation has less functionality if used when **Use advanced auto-charges** is disabled.</span></span> <span data-ttu-id="b3bc6-145">في هذا السيناريو، لن يُعاد حساب أي شي، وسيُعاد تعيين أي تكاليف أضيفت إلى الحركة يدويًا إلى $0.00.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-145">In this scenario, nothing would be recalculated and any charges manually added to the transaction would just reset to $0.00.</span></span>

## <a name="use-case-examples"></a><span data-ttu-id="b3bc6-146">أمثلة عن حالات استخدام</span><span class="sxs-lookup"><span data-stu-id="b3bc6-146">Use case examples</span></span>

<span data-ttu-id="b3bc6-147">في هذا القسم، يتم تقديم حالات استخدام نموذجية لمساعدتك في فهم تكوين واستخدام التكاليف التلقائية والتكاليف المتنوعة ضمن سياق أوامر قناة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-147">In this section, sample use cases are presented to help you understand the configuration and usage of auto charges and miscellaneous charges within the context of channel orders.</span></span> <span data-ttu-id="b3bc6-148">توضح هذه الأمثلة سلوك التطبيق عند تمكين معلمة **استخدام التكاليف التلقائية المتقدمة**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-148">These examples illustrate the behavior of the application when the **Use advanced auto-charges** parameter has been enabled.</span></span>

### <a name="auto-charges-header-charges-example"></a><span data-ttu-id="b3bc6-149">مثال عن التكاليف التلقائية على مستوى الرأس‏‎</span><span class="sxs-lookup"><span data-stu-id="b3bc6-149">Auto charges header charges example</span></span>

#### <a name="use-case-scenario"></a><span data-ttu-id="b3bc6-150">سيناريو حالة الاستخدام</span><span class="sxs-lookup"><span data-stu-id="b3bc6-150">Use case scenario</span></span>

<span data-ttu-id="b3bc6-151">يريد أحد بائعي تجزئة إضافة تكاليف الشحن تلقائيًا عند إنشاء الحركات في أي من قنوات Commerce التي تتطلب شحن منتجات إلى العميل.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-151">A retailer wants to automatically add charges for freight when transactions are created in any Commerce channel that require a shipment of products to the customer.</span></span> <span data-ttu-id="b3bc6-152">يوفر بائع التجزئة طريقتين لتسليم المنتجات: أرضًا وجوًا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-152">The retailer offers two methods of delivery: Ground and Air.</span></span> <span data-ttu-id="b3bc6-153">إذا اختار العميل التسليم الأرضي وكانت قيمة الأمر أقل من 100 دولار أمريكي، يرغب بائع التجزئة في تحميل العميل مصاريف شحن بقيمة 10 دولارات أمريكية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-153">If a customer chooses Ground delivery and the order value is less than $100, the retailer wants to charge the customer a freight charge of $10.00.</span></span> <span data-ttu-id="b3bc6-154">وإذا تجاوزت قيمة الأمر 100 دولار أمريكي واختار العميل الشحن الأرضي، فلن يضيف العميل أي تكاليف شحن إضافية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-154">If the order is over $100 in value and the customer chooses ground shipping, the customer will not be charged any additional freight fees.</span></span> <span data-ttu-id="b3bc6-155">أما إذا اختار العميل طريقة التسليم الجوي لجميع الأوامر، فيستم تحميله رسوم شحن بقيمة 20 دولارًا أمريكيًا، بصرف النظر عن القيمة الإجمالية للأوامر.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-155">If the customer chooses the Air method of delivery for all orders, regardless of their total value, will be charged a freight fee of $20.00.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="b3bc6-156">الإعداد والتكوين</span><span class="sxs-lookup"><span data-stu-id="b3bc6-156">Setup and configuration</span></span>

<span data-ttu-id="b3bc6-157">يتطلب هذا السيناريو تكوين جدولين للتكاليف التلقائية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-157">This scenario requires the configuration of two auto charges tables.</span></span>

<span data-ttu-id="b3bc6-158">انتقل إلى **الحسابات المدينة \> إعداد التكاليف \> التكاليف التلقائية**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-158">Go to **Accounts receivable \> Charges setup \> Auto charges**.</span></span>

<span data-ttu-id="b3bc6-159">قم بتكوين بندين مختلفين للتكاليف التلقائية على مستوى الرأس‏‎.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-159">Configure two different header-level auto charges.</span></span> <span data-ttu-id="b3bc6-160">قم بتكوين أحدهما لوضع التسليم "الأرضي" والآخر لوضع التسليم "الجوي".</span><span class="sxs-lookup"><span data-stu-id="b3bc6-160">Configure one for the "Ground mode" of delivery and one for the "Air mode" of delivery.</span></span> <span data-ttu-id="b3bc6-161">لهذا السيناريو، قم بتكوينها لاستخدامها "لجميع العملاء".</span><span class="sxs-lookup"><span data-stu-id="b3bc6-161">For this scenario, configure them to be used for "All customers".</span></span>

<span data-ttu-id="b3bc6-162">فيما يتعلق بتكاليف التسليم الأرضي، في قسم البنود في صفحة **التكاليف التلقائية** ، حدد تكلفة من 10 دولارات أمريكية سيتم تطبيقها على الأوامر التي تتراوح قيمتها بين .01 دولار أمريكي و100 دولار أمريكي على أنها 10.00 دولار أمريكي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-162">For the ground delivery charges, in the lines section of the **Auto-charges** page, define a charge that will be applied for orders between $.01 and $100 as $10.00.</span></span> <span data-ttu-id="b3bc6-163">أنشئ بندًا آخر للتكاليف للإشارة إلى عدم فرض أي تكاليف على الأوامر التي تتجاوز قيمتها 100.01 دولار أمريكي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-163">Create another charges line to indicate orders over $100.01 will have no charges.</span></span>

![مثالان على جدول التكاليف التلقائية](media/headerchargesexample.png)

<span data-ttu-id="b3bc6-165">فيما يتعلق بتكاليف التسليم الجوي، في قسم البنود في نموذج التكاليف التلقائية، حدد تكلفة من 20.00 دولارًا أمريكيًا سيتم تطبيقها على جميع الأوامر (تتراوح قيمتها بين .01 دولار أمريكي و9,999,999 دولار أمريكي).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-165">For the air delivery charges, in the lines section of the auto charges form, define a charge of $20.00 that will be applied to all orders (between a value of $.01 to $9,999,999).</span></span>

<span data-ttu-id="b3bc6-166">أرسل التكاليف إلى Commerce Scale Unit/قاعدة بيانات القنوات لتمكين نقطة البيع من تشغيل وظيفة **جدول التوزيع 1040**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-166">Send the changes to the Commerce Scale Unit/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

#### <a name="sales-processing-for-this-scenario"></a><span data-ttu-id="b3bc6-167">معالجة المبيعات لهذا السيناريو</span><span class="sxs-lookup"><span data-stu-id="b3bc6-167">Sales processing for this scenario</span></span>

<span data-ttu-id="b3bc6-168">بعد إكمال خطوات التكوين أعلاه وتطبيق التغييرات على قاعدة بيانات القناة، سوف تستخدم أوامر العملاء أو حركات المبيعات، والتي تم إنشاؤها في نقطة البيع أو مراكز الاتصال أو قنوات التجارة الإلكترونية والتي عيّنت طريقة التسليم الأرضي على مستوى الرأس، هذه التكاليف وتطبّقها تلقائيًا على عملية البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-168">After the configuration steps above are complete and the changes have been applied to the channel database, any customer order or sales transaction created in the POS, call center, or e-Commerce channels that have the ground or air delivery methods set at the header level will utilize these charges and automatically apply them to the sale.</span></span>

<span data-ttu-id="b3bc6-169">في هذه المرحلة، سيتم تطبيق التكاليف على جميع حركات المبيعات التي تم إنشاؤها ضمن الكيان القانوني الذي يستخدم أوضاع التسليم هذه، نظرًا لعدم وجود أي وظائف تعيّن تطبيق تكوين التكاليف التلقائية على قناة بيع محددة فقط.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-169">At this time, the charges will apply to all sales transactions created within the legal entity that utilize these delivery modes, as there is no functionality to designate that an auto charge configuration will only apply to a specific selling channel.</span></span>

<span data-ttu-id="b3bc6-170">بالنسبة إلى سيناريوهات التجارة الإلكترونية ونقطة البيع، ونظرًا لعدم وجود "رأس" محدد بوضوح على هذه الأوامر، فإن التكاليف على مستوى الرأس‏‎ سوف تنطبق فقط إذا تم تعيين جميع بنود المبيعات على الحركة بحيث تُشحن باستخدام وضع التسليم نفسه.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-170">For POS and e-Commerce scenarios, because there is no clearly defined "header" on these orders, header-level charges will only apply if all sales lines on the transaction are set to ship with the exact same mode of delivery.</span></span> <span data-ttu-id="b3bc6-171">في حال وجود "أوضاع تنفيذ مختلطة" على الحركات التي تم إنشاؤها بواسطة نقطة البيع أو قناة التجارة الإلكترونية، ستتم مراعاة التكاليف التلقائية على مستوى البنود وتطبيقها.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-171">If there are "mixed-modes" of fulfillment on the transactions created by POS or e-Commerce, only line-level auto charges will be considered and applied.</span></span>

<span data-ttu-id="b3bc6-172">في سيناريوهات مركز الاتصال، بإمكان المستخدم التحكم في إعداد وضع التسليم على مستوى الرأس، وبالتالي سوف تطبق التكاليف على مستوى الرأس‏‎ لهذه الأوامر حتى لو تم تكوين بعض بنود المبيعات لاستخدام وضع تسليم مختلف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-172">In call center scenarios, the user has control over the setting of the delivery mode at the order header, therefore header-level charges will apply for these orders even if some of the sales lines have been configured to use a different mode of delivery.</span></span> <span data-ttu-id="b3bc6-173">سوف تستند دائمًا التكاليف على مستوى الرأس‏‎ في أوامر مركز الاتصال إلى طريقة التسليم المحددة على مستوى رأس الأمر في أمر المبيعات.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-173">Header-level charges for call center orders will always be based on the mode of delivery that is defined at the order header level of the sales order.</span></span>

### <a name="auto-charges-line-charges-example"></a><span data-ttu-id="b3bc6-174">مثال عن التكاليف التلقائية على مستوى البنود</span><span class="sxs-lookup"><span data-stu-id="b3bc6-174">Auto charges line charges example</span></span>

#### <a name="use-case-scenario"></a><span data-ttu-id="b3bc6-175">سيناريو حالة الاستخدام</span><span class="sxs-lookup"><span data-stu-id="b3bc6-175">Use case scenario</span></span> 

<span data-ttu-id="b3bc6-176">يريد أحد بائعي تجزئة إضافة المزيد من التكاليف لرسوم إعداد العميل عندما يشتري العميل طراز كمبيوتر معينًا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-176">A retailer wants to add an additional charge to the customer for setup fees when the customer purchases a particular model of computer.</span></span> <span data-ttu-id="b3bc6-177">يحتاج هذا الكمبيوتر إلى إجراءات إعداد إضافية غير اختيارية سيقوم بائع التجزئة بتنفيذها للعميل.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-177">This computer requires additional non-optional setup actions that the retailer will perform for the customer.</span></span> <span data-ttu-id="b3bc6-178">وقام بائع التجزئة بإبلاغ العملاء عن تطبيق رسوم إضافية مقابل إجراء عملية الإعداد هذه.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-178">The retailer has informed customers that there will be an additional fee for this setup.</span></span> <span data-ttu-id="b3bc6-179">يفضل بائع التجزئة إدارة التكاليف المرتبطة بهذه الرسوم بشكل منفصل من سعر مبيعات المنتج لأغراض تتعلق بإعداد التقارير المالية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-179">The retailer prefers to manage the charges related to this fee separately from the product sales price for financial reporting purposes.</span></span> <span data-ttu-id="b3bc6-180">وسيتم تحميل العميل رسوم إعداد تبلغ قيمتها 19.99 دولارًا أمريكيًا عند شراء هذا الكمبيوتر المعينة في أي قناة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-180">A setup fee of $19.99 will be charged to the customer when this specific computer is purchased in any channel.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="b3bc6-181">الإعداد والتكوين</span><span class="sxs-lookup"><span data-stu-id="b3bc6-181">Setup and configuration</span></span>

<span data-ttu-id="b3bc6-182">يتطلب هذا السيناريو تكوين جدول واحد للتكاليف التلقائية على مستوى البنود.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-182">This scenario requires the configuration of one line-level auto charges table.</span></span>

<span data-ttu-id="b3bc6-183">انتقل إلى **الحسابات المدينة \> إعداد التكاليف \> التكاليف التلقائية**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-183">Go to **Accounts Receivable \> Charges setup \> Auto charges**.</span></span>

<span data-ttu-id="b3bc6-184">عيّن القائمة المنسدلة **المستوى** إلى **بند** ، ثم أنشئ سجلاً جديدًا للتكاليف التلقائية لكافة العملاء وللمنتج المعين أو مجموعة المنتجات حيث سيتم فرض رسوم الإعداد.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-184">Set the **Level** drop-down menu to **Line** , and create a new auto charges record for all customers and for the specific product or product group where the setup fees will be charged.</span></span>

![مثال لأحد جداول التكاليف التلقائية على مستوي البند](media/linechargesexample.png)

<span data-ttu-id="b3bc6-186">أرسل التكاليف إلى Commerce Scale Unit/قاعدة بيانات القنوات لتمكين نقطة البيع من تشغيل وظيفة **جدول التوزيع 1040**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-186">Send the charges to the Commerce Scale Unit/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

#### <a name="sales-processing-for-this-scenario"></a><span data-ttu-id="b3bc6-187">معالجة المبيعات لهذا السيناريو</span><span class="sxs-lookup"><span data-stu-id="b3bc6-187">Sales processing for this scenario</span></span>

<span data-ttu-id="b3bc6-188">بعد إكمال خطوات التكوين أعلاه وتطبيق التغييرات على قاعدة بيانات القناة، سوف تقوم أوامر العملاء أو حركات المبيعات، والتي تم إنشاؤها في نقطة البيع أو مراكز الاتصال أو قنوات التجارة الإلكترونية والتي لديها هذا الصنف على الأمر، بتشغيل تكلفة على مستوى البند بحيث تُضاف بطريقة منهجية إلى قيمة الأمر الإجمالية.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-188">After the configurations steps above are complete and the changes have been applied to the channel database, any customer order or sales transaction created in the POS, call center, or e-Commerce channels that have this item on the order will trigger a line-level charge to be systematically added to the order total.</span></span>

<span data-ttu-id="b3bc6-189">في هذه المرحلة، سيتم تطبيق التكاليف على أي بند مبيعات يتطابق مع تكوين التكاليف التلقائية على مستوى البنود ضمن الكيان القانوني، نظرًا لعدم وجود أي وظائف تتعلق بتكوين التكاليف التلقائية على مستوى البنود بحيث تطبق على قناة بيع محددة فقط.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-189">At this time the charges will apply to any sales line that matches the configuration of the line-level auto charges within the legal entity, as there is no functionality to configure a line-level auto charge to apply only to a specific selling channel.</span></span>

### <a name="manual-header-charges-example"></a><span data-ttu-id="b3bc6-190">مثال عن تكاليف الرأس‏‎ اليدوية</span><span class="sxs-lookup"><span data-stu-id="b3bc6-190">Manual header charges example</span></span>

#### <a name="use-case-scenario-description"></a><span data-ttu-id="b3bc6-191">وصف سيناريو حالة الاستخدام</span><span class="sxs-lookup"><span data-stu-id="b3bc6-191">Use case scenario description</span></span>

<span data-ttu-id="b3bc6-192">يجري أحد بائعي التجزئة استثناءً للعمليات الأساسية عن طريق تقديم خدمة خاصة لتسليم المنتجات حتى المنزل لعملاء قاموا بطلب منتجات موجودة في المخزن.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-192">A retailer is making an exception to typical processes by offering to provide a special home delivery of products to customers who order products in the store.</span></span> <span data-ttu-id="b3bc6-193">اتفق بائع التجزئة مع العميل على دفع العميل رسمًا بقيمة 25 دولارًا إضافيًا مقابل هذه الخدمة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-193">The retailer and the customer have agreed that the customer will pay an additional $25 handling fee for this service.</span></span> <span data-ttu-id="b3bc6-194">يحتاج متلقي الأمر‬ إلى إضافة هذه الرسوم الإضافية إلى الحركة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-194">The order-taker needs to add this additional fee to the transaction.</span></span> <span data-ttu-id="b3bc6-195">بما أن الرسوم عبارة عن رسوم عامة لا تتعلق بأي منتج فردي في الأمر، سيتم استخدام تكاليف الرأس.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-195">Because the fee is a blanket fee and not related to any single product on the order, a header charge will be utilized.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="b3bc6-196">الإعداد والتكوين</span><span class="sxs-lookup"><span data-stu-id="b3bc6-196">Setup and configuration</span></span>

<span data-ttu-id="b3bc6-197">تأكد من تكوين كود التكاليف الذي سيتم استخدامه في هذا السيناريو بشكل صحيح عن طريق الانتقال إلى **الحسابات المدينة \> إعداد التكاليف \> التكاليف** لتحديد كود تكاليف مناسب للسيناريو.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-197">Ensure the charges code that will be used in this scenario has been properly configured by going to **Accounts Receivable \> Charges setup \> Charges** to define an appropriate charges code for the scenario.</span></span>

![مثال عن التكاليف](media/chargesexample.png)

<span data-ttu-id="b3bc6-199">إذا وجب اعتبار التكاليف على أنها تكاليف ذات صلة "بالشحن" لأغراض تتعلق بالخصومات أو الحملات الترويجية ذات صلة بالخصم، فعيّن **تكاليف الشحن** على كود التكاليف إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-199">If the charge should be considered a "shipping" related charge for the purpose of shipping related discounts or promotions, set **Shipping charge** on the charges code to **Yes**.</span></span> <span data-ttu-id="b3bc6-200">إذا كان استرداد قيمة هذه التكاليف أمرًا مسموحًا به أيضًا أثناء معالجة حركة إرجاع في تطبيق نقطة البيع، فعيّن **قابل للاسترداد** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-200">If this charge is also allowed to be systematically refunded during the processing of a return transaction in the POS application, set **Refundable** to **Yes**.</span></span> <span data-ttu-id="b3bc6-201">تنطبق علامة **قابل للاسترداد** فقط عند تعيين معلمة **استخدام التكاليف التلقائية المتقدمة** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-201">The **Refundable** flag is only applicable when the **Use advanced auto-charges** parameter is set to **Yes**.</span></span>

<span data-ttu-id="b3bc6-202">أرسل التكاليف إلى Commerce Scale Unit/قاعدة بيانات القنوات لتمكين نقطة البيع من تشغيل وظيفة **جدول التوزيع 1040**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-202">Send the charges to the Commerce Scale Unit/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

<span data-ttu-id="b3bc6-203">يجب تكوين عملية **إضافة تكاليف‬ الرأس‬** في [تخطيط شاشة نقطة البيع](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) بحيث يستطيع زر يمكن للمستخدم الوصول إليه من نقطة البيع استدعاء هذه العملية (العملية 141).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-203">The **Add header charge** operation must be configured in your [POS screen layout](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) so that a button that is accessible to the user from POS can call this operation (operation 141).</span></span> <span data-ttu-id="b3bc6-204">يجب أن يتم توزيع التغييرات في تخطيط الشاشة في القناة وأيضًا عبر وظيفة جدول التوزيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-204">The screen layout changes must be distributed to the channel as well through the distribution schedule function.</span></span>

#### <a name="sales-processing-of-manual-header-charges"></a><span data-ttu-id="b3bc6-205">معالجة المبيعات لتكاليف الرأس‏‎ اليدوية‬</span><span class="sxs-lookup"><span data-stu-id="b3bc6-205">Sales processing of manual header charges</span></span>

<span data-ttu-id="b3bc6-206">لتنفيذ السيناريو في تطبيق نقطة البيع، سينشئ مستخدم نقطة البيع حركة المبيعات كالمعتاد، مع إضافة منتجات وأي تكوينات أخرى إلى عملية البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-206">To execute the scenario in the POS application, the POS user will create the sales transaction as usual, adding the products and any other configurations to the sale.</span></span> <span data-ttu-id="b3bc6-207">قبل تحصيل الدفع، يجب على المستخدم تنفيذ عملية **إضافة تكاليف‬ الرأس‬** ، التي ستطالب المستخدم بتحديد كود تكاليف وإدخال قيمة التكاليف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-207">Prior to collecting payment, the user should execute the **Add header charge** operation, which will prompt the user to select a charges code and enter the charges value.</span></span> <span data-ttu-id="b3bc6-208">عندما يستكمل المستخدم العملية، ستُضاف التكاليف إلى أمر المبيعات كتكاليف على مستوى الرأس‏‎.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-208">Once the user completes the process, the charge will be added to the sales order as a header-level charge.</span></span>

<span data-ttu-id="b3bc6-209">يمكن تطبيق هذه العملية في مركز الاتصالات باستخدام ميزة **التكاليف** الموجودة على علامة التبويب **بيع** على شريط الأدوات.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-209">This process can be applied in the call center by using the existing **Charges** feature found on the **Sell** tab on the toolbar.</span></span> <span data-ttu-id="b3bc6-210">في صفحة **الاحتفاظ بالتكاليف** ، بإمكان المستخدم إضافة بند تكاليف جديد إلى رأس الأمر.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-210">On the **Maintain charges** page, the user can add a new charges line to the order header.</span></span>

### <a name="manual-line-charges-example"></a><span data-ttu-id="b3bc6-211">مثال عن تكاليف البنود اليدوية</span><span class="sxs-lookup"><span data-stu-id="b3bc6-211">Manual line charges example</span></span>

#### <a name="use-case-scenario"></a><span data-ttu-id="b3bc6-212">سيناريو حالة الاستخدام</span><span class="sxs-lookup"><span data-stu-id="b3bc6-212">Use case scenario</span></span>

<span data-ttu-id="b3bc6-213">طلب عميل تغليف صنفين من الأصناف الخمسة الموجودة على أمر المبيعات بورق هدايا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-213">A customer has requested that two of the five items on their sales order be gift-wrapped.</span></span> <span data-ttu-id="b3bc6-214">يوفر بائع التجزئة هذه الخدمة الاختيارية مقابل رسم قيمته 2.00 دولار أمريكي لكل صنف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-214">The retailer offers this optional service for a fee of $2.00 per item.</span></span> <span data-ttu-id="b3bc6-215">سيحتاج متلقي الأمر‬ إلى إضافة هذه الرسوم إلى الأصناف المحددة التي يجب تغليفها بورق هدايا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-215">The order-taker will need to add these fees to the specific items that need to be gift-wrapped.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="b3bc6-216">الإعداد والتكوين</span><span class="sxs-lookup"><span data-stu-id="b3bc6-216">Setup and configuration</span></span>

<span data-ttu-id="b3bc6-217">تأكد من تكوين كود التكاليف الذي سيتم استخدامه في هذا السيناريو بشكل صحيح عن طريق الانتقال إلى **الحسابات المدينة \> إعداد التكاليف \> التكاليف** لتحديد كود تكاليف مناسب للسيناريو.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-217">Ensure the charges code that will be used in this scenario has been properly configured by going to **Accounts Receivable \> Charges setup \> Charges** to define an appropriate charges code for the scenario.</span></span>

<span data-ttu-id="b3bc6-218">إذا وجب اعتبار التكاليف على أنها تكاليف ذات صلة "بالشحن" لأغراض تتعلق بالخصومات أو الحملات الترويجية ذات صلة بالخصم، فعيّن **تكاليف الشحن** على كود التكاليف إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-218">If the charge should be considered a "shipping" related charge for the purpose of shipping related discounts or promotions, set the **Shipping charge** on the charges code to **Yes**.</span></span> <span data-ttu-id="b3bc6-219">إذا كان استرداد قيمة التكاليف أمرًا مسموحًا به أيضًا أثناء معالجة حركة إرجاع في تطبيق نقطة البيع، فعيّن **قابل للاسترداد** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-219">If the charge is also allowed to be systematically refunded during the processing of a return transaction in the POS application, set **Refundable** to **Yes**.</span></span> <span data-ttu-id="b3bc6-220">تنطبق علامة **قابل للاسترداد** فقط عند تعيين معلمة **استخدام التكاليف التلقائية المتقدمة** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-220">The **Refundable** flag is only applicable when the **Use advanced auto-charges** parameter is set to **Yes**.</span></span>

<span data-ttu-id="b3bc6-221">أرسل التكاليف إلى Commerce Scale Unit/قاعدة بيانات القنوات لتمكين نقطة البيع من تشغيل وظيفة **جدول التوزيع 1040**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-221">Send the charges to the Commerce Scale Unit/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

<span data-ttu-id="b3bc6-222">يجب تكوين عملية **إضافة تكاليف‬ البنود‬‬** في [تخطيط شاشة نقطة البيع](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) بحيث ستطيع زر يمكن للمستخدم الوصول إليه من نقطة البيع استدعاء هذه العملية (العملية 140).</span><span class="sxs-lookup"><span data-stu-id="b3bc6-222">The **Add line charge** operation must be configured in your [POS screen layout](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) so that a button that is accessible to the user from POS can call this operation (operation 140).</span></span> <span data-ttu-id="b3bc6-223">يجب أن يتم توزيع التغييرات في تخطيط الشاشة في القناة وأيضًا عبر وظيفة جدول التوزيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-223">The screen layout changes must be distributed to the channel as well through the distribution schedule function.</span></span>

#### <a name="sales-processing-of-the-manual-line-charge"></a><span data-ttu-id="b3bc6-224">معالجة المبيعات لتكاليف البنود اليدوية‬</span><span class="sxs-lookup"><span data-stu-id="b3bc6-224">Sales processing of the manual line charge</span></span>

<span data-ttu-id="b3bc6-225">لتنفيذ السيناريو في تطبيق نقطة البيع، سينشئ مستخدم نقطة البيع حركة المبيعات كالمعتاد، مع إضافة منتجات وأي تكوينات أخرى إلى عملية البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-225">To execute the scenario in the POS application, the POS user will create the sales transaction as usual, adding the products and any other configurations to the sale.</span></span> <span data-ttu-id="b3bc6-226">قبل تحصيل الدفع، يجب على المستخدم تحديد البند المعين الذي ستطبق التكاليف عليه من شاشة عرض قائمة بنود نقطة البيع وتنفيذ عملية **إضافة تكاليف الرأس**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-226">Prior to collecting payment, the user should select the specific line where the charge will apply from the POS item list display and execute the **Add line charge** operation.</span></span> <span data-ttu-id="b3bc6-227">ستتم مطالبة المستخدم بتحديد كود التكاليف وإدخال قيمة التكاليف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-227">The user will be prompted to select a charges code and enter the charges value.</span></span> <span data-ttu-id="b3bc6-228">عندما يستكمل المستخدم العملية، سيتم ربط التكاليف بالبند وستُضاف إلى قيمة الأمر الإجمالية كتكاليف على مستوى البنود.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-228">Once the user completes the process, the charge will be linked to the line and added to the order total as a line level charge.</span></span> <span data-ttu-id="b3bc6-229">بإمكان المستخدم تكرار العملية لإضافة المزيد من تكاليف البنود إلى بنود أخرى أصناف أخرى على المعاملة، إذا لزم الأمر.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-229">The user can repeat the process to add additional line charges to other items lines on the transaction if needed.</span></span>

<span data-ttu-id="b3bc6-230">يمكن تطبيق العملية نفسها في مركز الاتصال باستخدام ميزة "الاحتفاظ بالتكاليف" الموجودة ضمن القائمة المنسدلة **الماليات** في القسم **بنود أمر المبيعات** في صفحة **أمر المبيعات**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-230">The same process can be applied in the call center by using the "maintain charges" feature found under the **Financials** drop-down menu in the **Sales order lines** section on the **Sales order** page.</span></span> <span data-ttu-id="b3bc6-231">سيؤدي تحديد هذا الخيار إلى فتح صفحة **الاحتفاظ بالتكاليف** حيث يستطيع المستخدم إضافة تكاليف خاصة ببند جديد إلى الحركة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-231">Selecting this option will open the **Maintain charges** page where the user can add a new line-specific charge to the transaction.</span></span>

## <a name="additional-features"></a><span data-ttu-id="b3bc6-232">الميزات الإضافية</span><span class="sxs-lookup"><span data-stu-id="b3bc6-232">Additional features</span></span>

### <a name="editing-charges-on-a-pos-sales-transaction"></a><span data-ttu-id="b3bc6-233">تحرير التكاليف في حركة مبيعات نقطة البيع</span><span class="sxs-lookup"><span data-stu-id="b3bc6-233">Editing charges on a POS sales transaction</span></span>

<span data-ttu-id="b3bc6-234">يجب إضافة العملية **إدارة التكاليف** (142) إلى [تخطيط شاشة نقطة البيع](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) لتمكين المستخدم من عرض وتحرير أو استبدال تكاليف البنود أو الرؤوس المنشأة يدويًا أو المحسوبة بواسطة النظام.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-234">The **Manage charges** operation (142) should be added to the [POS screen layout](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-screen-layouts) so that a user can view and edit or override any system-calculated or manually created header or line-level charges.</span></span> <span data-ttu-id="b3bc6-235">في حال عدم إضافة العملية، لن يتمكن المستخدمون من ضبط قيمة التكاليف على حركة نقطة البيع، ولن يتمكن هؤلاء أيضًا من عرض تفاصيل التكاليف، مثل نوع كود التكاليف المرتبط بالتكلفة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-235">If the operation is not added, users will not be able to adjust the value of the charges on the POS transaction, nor will they be able to view the details of the charges such as the type of charges code tied to the charge.</span></span>

<span data-ttu-id="b3bc6-236">في صفحة **إدارة التكاليف** في نقطة البيع، بإمكان المستخدم عرض تفاصيل التكاليف على مستوى البنود والرؤوس معًا.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-236">On the **Manage charges** page in POS, the user can view both header and line-level charges details.</span></span> <span data-ttu-id="b3bc6-237">بإمكان المستخدم استخدام الوظيفة **تحرير** في هذه الصفحة لإجراء تغييرات على المبلغ المفروض على بند تكاليف محدد.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-237">The user can use the **Edit** function available on this page to make changes to the amount charged to a specific charges line.</span></span> <span data-ttu-id="b3bc6-238">عند استبدال بند تكاليف يدويًا، لن يعاد حسابه بطريقة منهجية إلا إذا بدأ المستخدم عملية **إعادة حساب التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-238">Once a charges line is overwritten manually, it will not be systematically recalculated unless the user initiates the **Recalculate charges** operation.</span></span>

<span data-ttu-id="b3bc6-239">إذا تم تكوين **كود سبب تجاوز التكاليف‬** على صفحة إعداد **معلمات Commerce** ، ستتم مطالبة المستخدم بتقديم كود سبب عند تعديل التكاليف في تطبيق نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-239">If the **Charge override reason code** has been configured on the **Commerce parameters** setup page, the user will be prompted to provide a reason code when charges have been modified in the POS application.</span></span>

<span data-ttu-id="b3bc6-240">إذا تم التقاط أكواد الأسباب للتكاليف التي تم استبدالها، فسيتوفر أيضًا تقرير جديد لمراجعة عمليات الاستبدال هذه والتدقيق فيها.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-240">If reason codes have been captured for overwritten charges, a new report is also available to review and audit these overrides.</span></span> <span data-ttu-id="b3bc6-241">يمكن العثور على التقرير في **Retail and Commerce \> الاستعلامات والتقارير \> محفوظات تجاوز التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-241">The report can be found in **Retail and Commerce \> Inquiries and reports \> Charge override history**.</span></span>

### <a name="refunding-charges-on-a-pos-return-transaction"></a><span data-ttu-id="b3bc6-242">إرجاع قيمة التكاليف على حركة إرجاع في نقطة البيع</span><span class="sxs-lookup"><span data-stu-id="b3bc6-242">Refunding charges on a POS return transaction</span></span>

<span data-ttu-id="b3bc6-243">إذا تم تعيين المعلمة **استخدام التكاليف التلقائية المتقدمة‬‏‫** إلى **نعم** ، فلن تعود معلمة Commerce الموجودة **مبلغ مسترد من تكاليف الشحن** قابلة للتطبيق.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-243">If the **Use advanced auto-charges** parameter is set to **Yes** , the existing Commerce parameter for **Refund shipping charges** is no longer applicable.</span></span> <span data-ttu-id="b3bc6-244">للإشارة إلى التكاليف التي يجب إرجاعها بطريقة منهجية إلى العميل عند استخدام التكاليف التلقائية المتقدمة، تأكد من تكوين كود التكاليف ذي الصلة على أنه **قابل للاسترداد** على صفحة إعداد **كود التكاليف‬**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-244">To indicate which charges should be systematically refunded to a customer when using advanced auto charges, ensure the related charges code has been configured as **Refundable** on the **Charges code** setup page.</span></span> <span data-ttu-id="b3bc6-245">تأكد من مزامنة الإعدادات مع قواعد بيانات قناة Commerce عبر معالجة جدول التوزيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-245">Make sure that the settings have been synchronized to your Commerce channel databases through distribution schedule processing.</span></span>

### <a name="refunding-charges-on-a-return-order-transaction"></a><span data-ttu-id="b3bc6-246">إرجاع قيمة التكاليف على حركة أمر إرجاع</span><span class="sxs-lookup"><span data-stu-id="b3bc6-246">Refunding charges on a return order transaction</span></span>

<span data-ttu-id="b3bc6-247">لا تُعاد التكاليف بشكل منهجي إلى **أوامر الإرجاع** التي يتم إنشاؤها في Commerce.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-247">Charges are not systematically refunded to **Return orders** created in Commerce.</span></span> <span data-ttu-id="b3bc6-248">تتم مطالبة المستخدمين بتحديد الخيار **نسخ التكاليف‬** عند إنشاء **أمر الإرجاع**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-248">Users are required to select the **Copy charges** option when creating the **Return order**.</span></span> <span data-ttu-id="b3bc6-249">إذا لم يتم تحديد الخيار **نسخ المصاريف** ، فلن تُعاد التكاليف من حركة المبيعات الأصلية بشكل تلقائي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-249">If **Copy charges** is not selected, charges from the original sales transaction will not be automatically refunded.</span></span> <span data-ttu-id="b3bc6-250">إذا تم تحديد الخيار **نسخ المصاريف** ، سيتم نسخ كافة التكاليف إلى أمر الإرجاع وبإمكان المستخدم تحرير أو إزالة أي تكاليف لا يريد استردادها.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-250">If **Copy charges** is selected, all charges will be copied to the return order and the user can manually edit or remove any charges they do not want to have refunded.</span></span> <span data-ttu-id="b3bc6-251">لا تتعرف عملية أمر إرجاع المبيعات‬ في مركز الاتصال على العلامة **قابل للاسترداد** على صفحة **كود التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-251">The call center return order process currently does not acknowledge the **Refundable** flag on the **Charges code** setup.</span></span>

### <a name="configuring-pos-receipts-to-show-charges"></a><span data-ttu-id="b3bc6-252">تكوين إيصالات نقطة البيع لعرض التكاليف</span><span class="sxs-lookup"><span data-stu-id="b3bc6-252">Configuring POS receipts to show charges</span></span>

<span data-ttu-id="b3bc6-253">تمت إضافة عناصر الإيصال التالية إلى بند وتذييل الإيصال لدعم وظائف التكاليف التلقائية المتقدمة.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-253">The following receipt elements have been added to the receipt line and footer to support the advanced auto charges functionality.</span></span>

- <span data-ttu-id="b3bc6-254">**تكاليف شحن البنود** - يمكن استخدام هذا العنصر على مستوى البنود لتلخيص أكواد التكاليف الخاصة التي تم تطبيقها على بنود المبيعات.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-254">**Line Shipping Charges** – This line-level element can be used to recap specific charges codes that have been applied to the sales line.</span></span> <span data-ttu-id="b3bc6-255">ستظهر هنا فقط التكاليف التي تم وضع علامة عليها على أنها تكاليف **شحن** على صفحة **كود التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-255">Only charges codes that have been flagged as **Shipping** charges on the **Charges code** page will be displayed here.</span></span>
- <span data-ttu-id="b3bc6-256">**تكاليف بنود أخرى** - يمكن استخدام هذا العنصر على مستوى البنود لتلخيص أكواد التكاليف التي لا علاقة لها بالشحن والتي تم تطبيقها على بنود المبيعات.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-256">**Line Other Charges** – This line-level element can be used to recap any non-shipping specific charge codes that have been applied to the sales line.</span></span> <span data-ttu-id="b3bc6-257">هذه أكواد التكاليف حيث لم يتم تمكين علامة **الشحن** على صفحة **كود التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-257">These are charges codes where the **Shipping** flag on the **Charges code** page has not been enabled.</span></span>
- <span data-ttu-id="b3bc6-258">**تفاصيل تكاليف شحن الأمر** - يعرض هذا العنصر على مستوى التذييل أوصاف أكواد التكاليف التي تم تطبيقها على الأمر والتي تم وضعها علامة عليها على أنها تكاليف **الشحن** في صفحة إعداد **كود التكاليف** صفحة الإعداد.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-258">**Order Shipping Charges Details** – This footer-level element displays the descriptions of the charge codes applied to the order that have been flagged as **Shipping** charges on the **Charges code** setup page.</span></span>
- <span data-ttu-id="b3bc6-259">**تكاليف شحن الأمر** - يعرض هذا العنصر على مستوى التذييل قيمة الدولار للتكاليف المرتبطة بالشحن.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-259">**Order Shipping Charges** – This footer-level element shows the dollar value of the shipping-related charges.</span></span>
- <span data-ttu-id="b3bc6-260">**تفاصيل تكاليف أخرى خاصة بالأمر** - يعرض هذا العنصر على مستوى التذييل وصف أكواد التكاليف التي تم تطبيقها على الأمر والتي لم توضع علامة عليها على أنها تكاليف مرتبطة بالشحن.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-260">**Order Other Charges Details** – This footer-level element displays the description of the charges codes applied to the order that have not been flagged as shipping-related charges.</span></span>
- <span data-ttu-id="b3bc6-261">**تكاليف أخرى خاصة بالأمر** - يعرض هذا العنصر على مستوى التذييل قيمة الدولار للتكاليف الأخرى غير المرتبطة بالشحن.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-261">**Order Other Charges** – This footer-level element displays the dollar value of the other charges that are not shipping-related.</span></span>

<span data-ttu-id="b3bc6-262">من المستحسن أن تقوم المؤسسة أيضًا بإضافة حقول نص حر إلى تذييل الإيصال، من أجل تعريف النواحي حيث سيتم تلخيص التكاليف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-262">It is recommended that the organization also add free text fields to the receipt footer, in order to define the areas where charges will be recapped.</span></span>

### <a name="preventing-charges-from-being-calculated-until-the-pos-order-is-completed"></a><span data-ttu-id="b3bc6-263">منع حساب التكاليف حتى اكتمال أمر نقطة البيع</span><span class="sxs-lookup"><span data-stu-id="b3bc6-263">Preventing charges from being calculated until the POS order is completed</span></span>

<span data-ttu-id="b3bc6-264">قد تفضل بعض المؤسسات الانتظار حتى ينتهي المستخدم من إضافة كافة بنود المبيعات إلى حركة نقطة البيع قبل حساب التكاليف.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-264">Some organizations may prefer to wait until the user has finished adding all of the sales lines to the POS transaction before calculating charges.</span></span> <span data-ttu-id="b3bc6-265">لمنع حساب التكاليف عند إضافة عناصر إلى حركة نقطة البيع، يمكنك تشغيل المعلمة **حساب التكلفة يدويًا‬** في **ملف تعريف الوظائف** المستخدم بواسطة المتجر.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-265">To prevent calculation of charges as items are added to the POS transaction, turn on the **Manual charge calculation** parameter in the **Functionality profile** used by the store.</span></span> <span data-ttu-id="b3bc6-266">يؤدي تمكين هذه المعلمة إلى مطالبة مستخدم نقطة البيع باستخدام العملية **حساب الإجماليات** عندما ينتهي من إضافة المنتجات إلى حركة نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-266">Enabling this parameter will require the POS user to use the **Calculate totals** operation when they have completed adding the products to the POS transaction.</span></span> <span data-ttu-id="b3bc6-267">ستقوم عندئذٍ عملية **حساب الإجماليات** بتشغيل حساب التكاليف التلقائية لرأس أو بنود الأمر، كما هو ملائم.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-267">The **Calculate totals** operation will then trigger the calculation of any auto charges for the order header or lines as applicable.</span></span>

### <a name="charges-override-reports"></a><span data-ttu-id="b3bc6-268">تقارير تجاوز التكاليف</span><span class="sxs-lookup"><span data-stu-id="b3bc6-268">Charges override reports</span></span>

<span data-ttu-id="b3bc6-269">إذا قام المستخدم بتجاور التكاليف المحسوبة يدويًا أو إذا أضاف تكلفة يدوية إلى الحركة، فستكون هذه البيانات متوفرة للتدقيق في تقرير **محفوظات تجاوز التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-269">If users manually override the calculated charges or add a manual charge to the transaction, this data will be available for auditing in the **Charge Override History** report.</span></span> <span data-ttu-id="b3bc6-270">يمكن الوصول إلى التقرير في **Retail and Commerce \> الاستعلامات والتقارير \> محفوظات تجاوز التكاليف**.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-270">The report can be accessed from **Retail and Commerce \> Inquiries and reports \> Charge Override History**.</span></span> <span data-ttu-id="b3bc6-271">من الضروري الإشارة إلى استيراد البيانات المطلوبة لهذا التقرير من قاعدة بيانات القناة إلى المقر الرئيسي من خلال وظائف جدولة التوزيع "P".</span><span class="sxs-lookup"><span data-stu-id="b3bc6-271">It is important to note that the data needed for this report is imported from the channel database into HQ through the "P" distribution schedule jobs.</span></span> <span data-ttu-id="b3bc6-272">وبالتالي، فإن المعلومات حول تجاوزات التكاليف التي تم تنفيذها للتوّ في نقطة البيع قد لا تكون متوفرة على الفور في هذا التقرير حتى قيام هذه الوظيفة بتحميل بيانات حركة المتجر إلى المقر الرئيسي.</span><span class="sxs-lookup"><span data-stu-id="b3bc6-272">Therefore, information about overrides just performed in the POS may not be immediately available on this report until this job has uploaded the store transaction data into HQ.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b3bc6-273">الموارد الإضافية</span><span class="sxs-lookup"><span data-stu-id="b3bc6-273">Additional resources</span></span>

[<span data-ttu-id="b3bc6-274">تمكين التكاليف التلقائية وتكوينها حسب القناة</span><span class="sxs-lookup"><span data-stu-id="b3bc6-274">Enable and configure auto charges by channel</span></span>](auto-charges-by-channel.md)

[<span data-ttu-id="b3bc6-275">توزيع تكاليف الرأس لمطابقة بنود المبيعات</span><span class="sxs-lookup"><span data-stu-id="b3bc6-275">Prorate header charges to matching sales lines</span></span>](pro-rate-charges-matching-lines.md)

