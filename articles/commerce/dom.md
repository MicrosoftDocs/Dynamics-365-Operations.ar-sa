---
title: إدارة الأوامر الموزعة (DOM)
description: يصف هذا المقال وظيفة إدارة الأوامر الموزعة (DOM) في Dynamics 365 Commerce.
author: josaw1
ms.date: 02/08/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: 26817321753c8e39d61957b4ea2004f20daf1b2f
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8878501"
---
# <a name="distributed-order-management-dom"></a>إدارة الأوامر الموزعة (DOM)

[!include [banner](includes/banner.md)]

يصف هذا المقال وظيفة إدارة الأوامر الموزعة (DOM) في Microsoft Dynamics 365 Commerce.

إن إدارة الأوامر الموزعة (DOM) هي حل لتحسين تنفيذ أوامر القناة متعددة الاتجاهات وتساعد على تحقيق أقصى قدر من تنفيذ الأوامر في شبكة سلسلة التوريد. تساعدك إدارة الأوامر الموزعة (DOM) على ضمان تسليم المنتجات لعملائك بالكميات الصحيحة، من المصادر الصحيحة، في الأوقات الصحيحة. يمكن أن تساعدك إدارة الأوامر الموزعة (DOM) أيضًا في زيادة الأرباح وتقليل التكاليف وتلبية متطلبات مستوى الخدمة.

تستخدم إدارة الأوامر الموزعة (DOM) برمجة الأعداد الصحيحة المختلطة (MIP) ونماذج التحليل التنبؤية لأداء التحسينات على مستوى الدُفعة ومستوى الأوامر الفردية. تمكن هذه الإمكانية تجار التجزئة من استخدام قواعد محددة لتحقيق التوازن بين العديد من احتياجات تنفيذ الأوامر المتضاربة. في شبكة التوريد الحديثة حيث يمكن أن يكون تحقيق المنتج من قنوات متعددة، يجب على المؤسسات التكيف بسرعة مع تغييرات الأوامر، ومشكلات توفر المورد، وارتفاع الطلب. تساعدك إدارة الأوامر الموزعة (DOM) على زيادة تنفيذ الأوامر والعثور على المصادر الصحيحة لتسليم المنتج، استنادًا إلى قيود وأهداف العمل مثل تقليل التكاليف عن طريق تنفيذ أوامر من أقرب المصادر. تستخدم إدارة الأوامر الموزعة (DOM) المسافة بين مصادر تنفيذ المنتجات ووجهات الشحن، وعوامل التكلفة التي تم تحديدها على أنها أهداف التحسين، والقواعد التي تم تعريفها على أنها قيود مثل المخزون في عُقد التنفيذ لتحسين تنفيذ الأوامر. تسمح إدارة الأوامر الموزعة (DOM) بتعريف ملفات التعريف المتعددة التي تُمكّن الشركات من تشغيل استراتيجيات تحسين مختلفة، اعتمادًا على نوع العمل أو قطاع المستهلك. 

يبين الرسم التوضيحي التالي دورة حياة أمر مبيعات في نظام DOM.

![دورة حياه أمر المبيعات في سياق DOM.](./media/flow.png "دورة حياه أمر المبيعات في سياق DOM")

## <a name="set-up-dom"></a>إعداد DOM

1. انتقل إلى **إدارة النظام \> الإعداد \> تكوين الترخيص**.
2. على علامة تبويب **مفاتيح التكوين**، وسّع عقدة **التجارة**، ثم حدد خانة الاختيار **إدارة الأوامر الموزعة**.
3. انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة \> الإعداد \> معلمات DOM**.
4. على علامة التبويب **عام**، عيّن القيم التالية:

    - **تمكين إدارة الأوامر الموزعة** – عيّن هذا الخيار إلى **نعم**.
    - **تأكيد استخدام خرائط Bing لإدارة الأوامر الموزعة (DOM)** – عيّن هذا الخيار إلى **نعم**.

        > [!NOTE]
        > يمكنك تعيين هذا الخيار إلى **نعم** فقط إذا كان الخيار **تمكين خرائط Bing** على علامة تبويب **خرائط Bing** في صفحة **المعلمات المشتركة لـ Commerce** (**Retail وCommerce \> إعداد Headquarters \> معلمات \> المعلمات المشتركة لـ Commerce**) معينًا أيضًا إلى **نعم**، وإذا تم إدخال مفتاح صالح في حقل **مفتاح خرائط Bing**.
        >
        > يسمح لك مدخل [مركز تطوير خرائط Bing](https://www.bingmapsportal.com/) بتقييد الوصول إلى مفاتيح API الخاصة بخرائط Bing إلى مجموعة من المجالات التي تحددها. وباستخدام هذه الميزة، يمكن للعملاء تعريف مجموعة صارمة من القيم المرجعة أو نطاقات عناوين IP التي سيتم التحقق من صحة المفتاح مقابلها. ستقوم الطلبات التي تنشأ من قائمة السماح الخاصة بك بالمعالجة العادية، بينما تقوم الطلبات من خارج القائمة بإرجاع استجابة رفض الوصول. تعتبر إضافة أمان المجال إلى المفتاح API اختياريًا ويستمر عمل المفاتيح التي ستبقي كما هي. وتكون قائمة السماح للمفتاح مستقلة عن كافة المفاتيح الأخرى، مما يمكنك من الحصول على قواعد مميزة لكل من المفاتيح الخاصة بك. لا تعتمد "إدارة الأوامر الموزعة" إعداد الخصائص التي تتم الإشارة إليها في المجال.

    - **فترة الاحتجاز بالأيام‬** – تحديد الفترة التي يتم خلالها الاحتفاظ بخطط التنفيذ التي يقوم نظام DOM بتشغيلها في النظام. ستقوم الوظيفة الدفعية **إعداد وظيفة حذف بيانات إدارة الأوامر الموزعة(DOM)‬** بحذف أي خطة تنفيذ تكون أقدم من عدد الأيام التي تحددها هنا.
    - **فترة الرفض (بالأيام)** – تحديد فترة الوقت التي يجب أن تنقضي قبل أن يصبح من الممكن تعيين بند أمر مرفوض إلى الموقع نفسه.

5. على علامة تبويب **الحلول‬**، عيّن القيم التالية:

    - **الحد الأقصى لعدد محاولات التنفيذ التلقائي‬** – حدد عدد المرات التي يحاول خلالها محرك DOM توريد بند أمر إلى موقع ما. إذا تعذر على محرك DOM توريد بند أمر إلى أحد المواقع بعد انقضاء عدد المحاولات المحدد، فسيضع علامة على بند الأمر على أنه استثناء. وسيتخطى عندئذٍ هذا البند في عمليات التشغيل المستقبلية حتى يُعاد تعيين الحالة يدويًا.
    - **نصف قطر منطقة المخزن المحلي‬** – أدخل قيمة. يساعد هذا الحقل على تحديد كيفية تجميع المواقع واعتبارها متساوية من ناحية المسافة. على سبيل المثال، إذا أدخلت **100**، فيستم اعتبار كل متجر أو مركز توزيع ضمن نطاق نصف قطر من 100 ميل من عنوان التنفيذ متساويًا من ناحية المسافة.
    - **نوع الحلول‬** – حدد قيمة. هناك نوعان من الحلول تم إصدارهما مع Commerce: **حلول الإنتاج** و **الحلول المُبسطة‬**. بالنسبة إلى جميع الأجهزة التي ستقوم بتشغيل DOM (أي، جميع الخوادم التي تعد جزءًا من مجموعة DOMBatch)، يجب تحديد **حلول الإنتاج**. تحتاج حلول الإنتاج إلى مفتاح الترخيص الذي يتم ترخيصه ونشره في بيئات الإنتاج بشكل افتراضي. في بيئات المستوى 2+ الأحدث، سيتم تمكين "حلول الإنتاج" بالفعل. بالنسبة إلى البيئات التي لا علاقة لها بالإنتاج، يجب نشر مفتاح الترخيص يدويًا. لنشر مفتاح الترخيص يدويًا، اتبع الخطوات التالية:

        1. في Microsoft Dynamics Lifecycle Services، افتح مكتبة الأصول المشتركة‬، وحدد **النموذج** كنوع الأصول، وقم بتنزيل ملف **ترخيص DOM**.
        1. ابدأ تشغيل Microsoft Internet Information Services (IIS) Manager، وانقر بزر الماوس الأيمن فوق **AOSService website**، ثم حدد **استكشاف**. تفتح نافذة مستكشف Windows في **\<AOS service root\>\\webroot**. سجّل المسار \<AOS Service root\>، لأنك ستستخدمه في الخطوة التالية.
        1. انسخ ملف التكوين في الدليل **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin**.
        1. انتقل إلى عميل Headquarters، وافتح صفحة **معلمات DOM**. على علامة تبويب **الحلول**، في الحقل **نوع الحلول**، حدد **حلول الإنتاج**، وتأكد من عدم ظهور رسائل خطأ.

        > [!NOTE]
        > تتوفر "الحلول المُبسطة‬" لتمكين بائعي التجزئة من تجربة ميزة DOM من دون الحاجة إلى نشر الترخيص الخاص. يجب على المؤسسات عدم استخدام "الحلول المُبسطة‬" في بيئات التشغيل.
        >
        > وعلى الرغم من أن "الحلول المُبسطة‬" توفر مجموعة القدرات نفسها التي توفرها "حلول الإنتاج"، إلا أن ثمة قيود من ناحية الأداء (عدد الأوامر وبنود الأوامر التي يمكن التعامل معها خلال عملية تشغيل واحدة) وتقارب النتائج (قد لا تنتج دُفعة من الأوامر أفضل النتائج في بعض السيناريوهات). تحتاج بعض القواعد مثل قاعدة **الأوامر الجزئية** وقاعدة **الحد الأقصى لعدد المواقع** إلى حلول الإنتاج.

6. ارجع **Retail وCommerce \> إدارة الأوامر الموزعة \> الإعداد \> معلمات DOM**.
7. على علامة تبويب **التسلسلات الرقمية**، عيّن عدد التسلسلات الرقمية المطلوبة إلى مختلف كيانات DOM.

    > [!NOTE]
    > قبل تعيين التسلسلات الرقمية إلى الكيانات، يجب تعريفها في صفحة **التسلسلات الرقمية** (**إدارة المؤسسة \> التسلسلات الرقمية \> التسلسلات الرقمية**).

8. تدعم ميزة DOM تعريف أنواع مختلفة من قواعد DOM، وباستطاعة المؤسسات تكوين قواعد متعددة، بحسب احتياجات العمل لديها. يمكن تعريف قواعد DOM لمجموعة من المواقع أو لمواقع فردية، ولفئة منتج معينة أو منتج أو متغير معين. لإنشاء مجموعات المواقع التي يجب استخدامها لقواعد DOM، اتبع الخطوات التالية:

    1. انتقل إلى **Retail وCommerce \> إعداد القناة‬ \> مجموعات التنفيذ‬**.
    2. حدد **جديد**، وأدخل اسمًا ووصفًا جديدين للمجموعة الجديدة.
    3. حدد **حفظ**.
    4. حدد **إضافة بند‬** لإضافة موقع واحد إلى المجموعة. أو، حدد **إضافة بنود** لإضافة مواقع متعددة.

    > [!NOTE]
    > في الإصدار 10.0.12 والأحدث من Commerce، **يجب تمكين القدرة على تحديد المواقع باعتبارها ممكّنة 'الشحن' أو 'الانتقاء' داخل مجموعة التنفيذ** في مساحة عمل **إدارة الميزات**.
    >
    > تضيف هذه الميزة تكوينات جديدة في صفحة **مجموعة التنفيذ** بحيث يمكنك تحديد ما إذا كان من الممكن استخدام المستودع للشحن أو ما إذا كان من الممكن استخدام توليفة المستودع/المتجر للشحن أو الانتقاء أو كليهما. 
    >
    > في حالة تمكين الميزة، سيتم تحديث الخيارات المتاحة لتحديد الموقع عند إنشاء أوامر الانتقاء أو الشحن في POS.
    >
    > يؤدي تمكين الميزة أيضًا إلى تحديث الصفحات في POS عند تحديد عمليات "شحن الكل" أو "شحن محدد".

9. لتعريف القواعد، انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة \> إعداد \> إدارة القواعد**. يتم حاليًا اعتماد قواعد DOM التالية:

    - **قاعدة أدنى مخزون‬** – تتيح هذه القاعدة للمؤسسات "حماية" كمية معينة أو منتج معين لأغراض أخرى غير تلك المتعلقة بتنفيذ الأمر. على سبيل المثال، قد لا ترغب المؤسسات في السماح لإدارة الأوامر الموزعة (DOM) بأخذ كامل المخزون المتوفر في المتجر في الاعتبار لتنفيذ الأمر. بدلاً من ذلك، قد ترغب في حجز بعض المخزون للعملاء العابرين. عند استخدام قاعدة من هذا النوع، يمكنك تحديد الحد الأدنى للمخزون للاحتفاظ بفئة منتجات أو منتج فردي أو متغير منتج في موقع أو مجموعة مواقع. يمكنك أيضًا تحديد الحد الأدنى للمخزون باستخدام التدرج الهرمي للفئات التكميلية. إذا كان المنتج يندرج في فئات متعددة، فسيتم إعطاء فئة تكميلية أعلى أهمية لجميع القواعد حيث يمكنك استخدام الفئات.
    - **قاعدة أولوية موقع التنفيذ‬** – يسمح نوع القاعدة هذا للمؤسسات بتحديد تدرج هرمي للمواقع لوضع الأولوية التي يأخذها محرك DOM في الاعتبار عندما يحاول تحديد مواقع تنفيذ لمنتجات معينة. يتراوح النطاق الصالح للأولويات من 1 إلى 10، حيث يمثل 1 الأولوية العليا و10 الأولوية الدنيا. تؤخذ في الاعتبار المواقع التي لها أولوية عليا قبل المواقع التي لها أولوية دنيا. إذا تم تعريف القاعدة كقاعدة قيد ثابت، فسيتم توريد الأوامر فقط إلى المواقع التي تم تحديد أولويات لها. تعطي إدارة الأوامر الموزعة (DOM) الأفضلية لأوامر الشحن تمامًا من مكان واحد. لذلك، إذا كان الأمر بأكمله وبنوده غير متاحين من موقع له أولوية 1، فستحاول إدارة الأوامر الموزعة (DOM) تنفيذه من موقع له أولوية 2.
    - **Partial orders rule** – في الإصدار 10.0.5 من Retail، تم تغيير المعلمة **تنفيذ الأمر من موقع واحد فقط‬** إلى **الحد الأقصى لمواقع التنفيذ**. مكنت المعلمة القديمة المستخدمين من تكوين ما إذا كان يمكن تنفيذ الأوامر من موقع واحد فقط أو من أكبر عدد ممكن من المواقع. تمكّن المعلمة الجديدة المستخدمين من تحديد ما إذا كان التنفيذ يمكن أن يكون من مجموعة محددة من المواقع (حتى خمسة) أو من أكبر عدد ممكن من المواقع. بالنسبة لجميع الخيارات باستثناء التنفيذ من موقع واحد، ستقوم إدارة الأوامر الموزعة (DOM) بتقسيم البند، لأن معالجة الأوامر تحدث حسب البند. تعمل هذه القاعدة فقط مع حلول الإنتاج.
    - **قاعدة موقع التنفيذ دون اتصال‬** – تسمح هذه القاعدة للمؤسسة بتحديد موقع أو مجموعة من المواقع كغير متصلة أو غير متوفرة لنظام DOM، بحيث يمكن تعيين الأوامر إلى هذه المواقع لتنفيذها.
    - **قاعدة الحد الأقصى للرفض** – تسمح هذه القاعدة بتعيين حد للرفض. عند الوصول إلى الحد، يضع معالج DOM علامة على أمر أو بند أمر كاستثناء، ويستبعده من أي معالجة إضافية. لضمان الأداء، لا تنظر إدارة الأوامر الموزعة (DOM) في تاريخ جميع عمليات الرفض. 

        بعد تعيين بنود الأمر إلى موقع، بإمكان الموقع رفض بند أمر معين، لأنه قد يتعذر عليه تنفيذ هذا البند لأسباب معينة. توضع علامة على البنود المرفوضة كاستثناء وتوضع من جديد في التجمع لمعالجتها في وقت التشغيل التالي. وأثناء التشغيل التالي، سيحاول DOM تعيين البند المرفوض إلى موقع آخر. بإمكان الموقع الجديد أيضًا رفض بند الأمر المعين. بإمكان دورة التعيين والرفض هذه أن تحدث عدة مرات. عندما يصل عدد مرات الرفض إلى الحد المعين، يضع نظام DOM علامة على بند الأمر كاستثناء دائم ولن يقوم بانتقاء البند لتعيينه مرة أخرى. ولن يأخذ DOM في الاعتبار بند الأمر لتعيينه مرة أخرى إلا إذا قام أحد المستخدمين بإعادة تعيين حالة بند الأمر.

    - **قاعدة الحد الأقصى للمسافة‬** – تسمح هذا القاعدة للمؤسسات بتحديد الحد الأقصى لمسافة موقع أو مجموعة مواقع لتنفيذ الأمر. إذا تم تحديد قواعد قاعدة الحد الأقصى للمسافات متراكبة لموقع ما، فسيطبق نظام DOM الحد الأقصى للمسافة المحددة لهذا الموقع.
    - **قاعدة الحد الأقصى للأوامر‬** – تسمح هذا القاعدة للمؤسسات بتحديد الحد الأقصى للأوامر‬ التي يمكن لموقع أو مجموعة مواقع معالجتها. أثناء عملية التحسين، سينظر النظام في الأوامر التي لم يتم شحنها من هذه المواقع. يتم هذا الفحص عبر ملفات التعريف. لذلك، إذا تم تحديد الحد الأقصى لعدد الأوامر المتداخلة عبر ملفات التعريف لنفس الموقع، فسوف يأخذ النظام في الاعتبار الحد الأقصى لعدد الأوامر التي تم تحديدها عبر جميع ملفات التعريف. 

    فيما يلي بعض السمات العامة التي يمكن تعريفها لكافة أنواع القواعد السابقة:

    - **تاريخ البدء** و **تاريخ الانتهاء** – يمكنك استخدام هذه الحقول لجعل تاريخ كل قاعدة ساريًا.
    - **معطّل** – في عملية تشغيل DOM، لا تؤخذ في الاعتبار إلا القواعد التي لديها القيمة **لا** لهذا الحقل.
    - **قيد ثابت** - يمكن تحديد قاعدة كقيد ثابت أو ليس كقيد ثابت. يمر كل تشغيل DOM عبر تكرارين اثنين: في التكرار الأول، يتم التعامل مع كل قاعدة كقاعدة قيد ثابت، بصرف النظر عن إعداد هذا الحقل. بمعنى آخر، يتم تطبيق جميع القواعد. الاستثناء الوحيد هو قاعدة **أولوية الموقع**. في التكرار الثاني، تُزال القواعد التي لم يتم تعريفها على أنها قواعد قيد ثابت. وبالنسبة إلى الأمر أو بنود الأمر التي لم تكن معينة إلى مواقع عندما كانت جميع القواعد مطبقة، سيتم تعيينها إلى مواقع.

10. يتم استخدام ملفات تعريف التنفيذ لتجميع مجموعة من القواعد والكيانات القانونية وأصول أوامر المبيعات وأوضاع التسليم. تتعلق كل عملية تشغيل DOM بملف تعريف تنفيذ محدد. وبهذه الطريقة، بإمكان المؤسسات تحديد وتشغيل مجموعة قواعد لمجموعة من الكيانات القانونية، على الأوامر التي لديها أصول وأوضاع تسليم معينة لأوامر المبيعات. وبالتالي، إذا كان يجب تشغيل مجموعة مختلفة من القواعد لمجموعات مختلفة من أصول وأوضاع تسليم أوامر المبيعات‬، فيمكن تحديد ملفات تعريف التنفيذ وفقًا لذلك. لإعداد ملفات تعريف التنفيذ‬، اتبع هذه الخطوات:  

    1. انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة \> الإعداد \> ملفات تعريف التنفيذ**.
    2. حدد **جديد**.
    3. أدخل قيمًا في حقلي **ملف التعريف** و **الوصف**.
    4. عيّن الخيار **تطبيق النتيجة تلقائيًا‬**. إذا قمت بتعيين هذا الخيار إلى **نعم**، فسيتم تطبيق نتائج تشغيل DOM لملف التعريف بشكل تقائي على بنود أمر المبيعات. أما إذا قمت بتعيينه إلى **لا**، فيمكن عرض النتائج في خطة التنفيذ فقط. ولن يتم تطبيقها على بنود أمر المبيعات.
    5. إذا أردت تشغيل ملف تعريف إدارة الأوامر الموزعة (DOM) على أوامر لديها كل أصل أمر مبيعات، يشمل ذلك الأوامر التي لم يتم فيها تحديد أصل أمر المبيعات، فعيّن الخيار **مُعالجة الأوامر باستخدام أصل مبيعات فارغ‬** إلى **نعم**. لتشغيل ملف التعريف لبعض أصول أمر المبيعات، يمكنك تحديدها في صفحة **أصول المبيعات**، كما هو موضح فيما بعد.

        > [!NOTE]
        > في الإصدار 10.0.12 أو الأحدث من Commerce، يجب تمكين ميزة **القدرة على تعيين مجموعة التنفيذ إلى ملف تعريف التنفيذ** في مساحة عمل **إدارة الميزات**. تتيح لك هذه الميزة تحديد قائمة بالمستودعات التي يجب أن تأخذها إدارة الأوامر الموزعة (DOM) في الاعتبار عند تشغيل التحسين باستخدام ملف تعريف تنفيذ. إذا لم يتم تحديد قائمة المستودعات هذه، فستقوم إدارة الأوامر الموزعة (DOM) بفحص جميع المستودعات في الكيانات القانونية المحددة في ملف التعريف.
        >
        > تضيف هذه الميزة تكوينًا جديدًا في صفحة **ملف تعريف التنفيذ** والذي يمكن إقرانه بمجموعة تنفيذ فردية. 
        >
        > إذا قمت بتحديد مجموعة تنفيذ، فإن قواعد DOM الخاصة بملف تعريف التنفيذ هذه ستعمل بكفاءة مقابل مستودعات "الشحن" المضمنة في مجموعة التنفيذ. 
        > 
        > لاستخدام هذه الميزة بفاعلية، تأكد من وجود إحدى مجموعات التنفيذ التي تحتوي على كافة مستودعات الشحن، ثم قم بإقران مجموعة التنفيذ هذه بملف تعريف التنفيذ.

    6. على علامة التبويب السريعة **الكيانات القانونية**، حدد **إضافة**، ثم حدد كيانًا قانونيًا.
    7. على علامة التبويب السريعة **القواعد**، حدد **إضافة**، ثم حدد القاعدة لربطها بملف التعريف.
    8. كرر الخطوتين السابقتين حتى يتم إقران جميع القواعد المطلوبة بملف التعريف.
    9. حدد **حفظ**.
    10. في جزء "الإجراءات"، على علامة تبويب **الإعداد**، حدد **أوضاع التسليم**.
    11. في صفحة **أوضاع التسليم**، حدد **جديد**.
    12. في حقل **الشركة**، حدد الكيان القانوني. تقتصر قائمة الشركات على الكيانات القانونية التي أضفتها في وقت سابق.
    13. في حقل **وضع التسليم**، حدد وضع التسليم الذي يجب إقرانه بملف التعريف هذا. لا يمكن إقران وضع تسليم بملفات تعريف نشطة متعددة.
    14. كرر الخطوتين السابقتين حتى يتم إقران جميع أوضاع التسليم المطلوبة بملف التعريف.
    15. أغلق صفحة **أوضاع التسليم**.
    16. في جزء "الإجراءات"، على علامة تبويب **الإعداد**، حدد **أصول أوامر المبيعات‬**.
    17. في صفحة **أصول المبيعات‬**، حدد **جديد**.
    18. في حقل **الشركة**، حدد الكيان القانوني. تقتصر قائمة الشركات على الكيانات القانونية التي أضفتها في وقت سابق.
    19. في الحقل **أصل المبيعات**، حدد أصل المبيعات الذي تريد إقرانه بملف التعريف هذا. لا يمكن إقران أصل مبيعات بملفات تعريف نشطة متعددة.
    20. كرر الخطوتين السابقتين حتى يتم إقران جميع أصول المبيعات المطلوبة بملف التعريف.
    21. أغلق صفحة **أصول المبيعات**.
    22. عيّن الخيار **تمكين ملف التعريف** إلى **نعم**. في حالة وجود أخطاء في الإعداد، تتلقى رسالة تحذير.

## <a name="dom-processing"></a>معالجة DOM

سيتم تشغيل DOM فقط في وظيفة دفعية. لتكوين الوظيفة الدفعية لعمليات تشغيل DOM، اتبع هذه الخطوات.

1. انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة \> معالجة الدُفعات \> إعداد وظيفة مُعالج DOM**.
1. على علامة التبويب السريعة **معلمات**، في حقل **ملف تعريف التنفيذ**، حدد ملف تعريف لتشغيل DOM له.
1. على علامة التبويب السريعة **تشغيل في الخلفية‬**، في الحقل **مجموعة دُفعات**، حدد مجموعة دُفعات مكوّنة.
1. في حقل **وصف المهمة**، أدخل اسمًا للوظيفة الدفعية.
1. حدد **التكرار**، وحدد تكرار الوظيفة الدفعية.
1. حدد **موافق**.

أثناء المعالجة، سيعتبر DOM الأمر وبنود الأمر كما هو موضح هنا:

- بنود الأمر التي تلبي معايير أصول المبيعات وأوضاع التسليم والكيان القانوني كما ورد في ملف تعريف DOM، والتي تلبي أيضًا أي واحد من المعايير التالية:

    - تم إنشاؤها من قنوات التجارة.
    - لم يتم توريدها إطلاقًا بواسطة DOM.
    - سبق أن تم توريدها بواسطة DOM، ولكن تم وضع علامة عليها كاستثناءات وهي لم تصل إلى الحد الأقصى للمحاولات.
    - وضع التسليم ليس عن طريق التحميل أو التسليم الإلكتروني.
    - لم توضع عليها علامة لتسليمها.
    - إنها غير مستثناة يدويًا.

- الأوامر التي ليست قيد الانتظار

يقوم نظام DOM، بعد تطبيق القواعد وقيود المخزون والتحسين، بانتقاء الموقع الأقرب إلى عنوان التسليم الخاص بالعميل. تقوم إدارة الأوامر الموزعة (DOM) بتحويل عناوين نوع **التسليم** إلى قيم خطوط طول وعرض. تقوم بعد ذلك بتحويل عنوان التسليم في أمر المبيعات إلى قيم خطوط الطول والعرض، وتقوم بتحديث قيم خطوط الطول والعرض الخاصة بالعنوان لاستخدامها في المستقبل. تعتمد إدارة الأوامر الموزعة (DOM) على خرائط Bing لتحديد قيم خطوط الطول والعرض الدقيقة بناءً على معلومات العنوان والمدينة والرمز البريدي.

تستخدم إدارة الأوامر الموزعة (DOM) واجهة برمجة تطبيقات خرائط Bing لحساب المسافة الجوية أو البرية، بناءً على الإعدادات. وتستخدم بعد ذلك هذه المعلومات لتحديد تكلفة الشحن. يعطي نموذج التحسين الأولوية لتنفيذ أمر كامل من موقع واحد. حتى إذا كان جزء من الأمر متاحًا في نفس المدينة أو الرمز البريدي، فقد تم تحسين النموذج لتقليل عدد الشحنات. 

تبحث إدارة الأوامر الموزعة (DOM) عن المخزون المتاح من خلال عرض المخزون الفعلي في كيانات المستودع V2. أثناء تشغيل كل دفعة، تقسم إدارة الأوامر الموزعة (DOM) الأوامر إلى دفعات، اعتمادًا على قيمة معلمة **معالج DOM** للمهام المحددة في ملف التعريف. وتشتمل هذه المعلمة على القيمة الافتراضية البالغة **2000**. على سبيل المثال، إذا تم تحسين 10000 بند أمر في التشغيل، وتم تعيين معلمة **معالج DOM** إلى القيمة الافتراضية البالغة **2000**، تُنشئ إدارة الأوامر الموزعة (DOM) خمس دفعات تتم معالجتها في وقت واحد.  يتم بعد ذلك الحصول على خطط التنفيذ من المحسن وتطبيقها على البند. إذا كان يجب تقسيم سطر الأمر بين موقعين، فإن إدارة الأوامر الموزعة (DOM) تضمن توزيع الأسعار والضرائب بشكل مناسب عبر البنود.

![معايير أمر المبيعات.](./media/ordercriteria.png "معايير أمر المبيعات")

## <a name="results-of-dom-runs"></a>نتائج عمليات تشغيل DOM

إذا تم تعيين ملف تعريف التنفيذ إلى **التطبيق التلقائي**، فسيتم تطبيق نتائج التشغيل تلقائيًا على بنود أمر المبيعات، ويمكن عرض خطة التنفيذ بشكل منفصل. ومع ذلك، إذا لم يتم تعيين ملف تعريف التنفيذ إلى **التطبيق التلقائي**، فلن تكون رؤية نتائج التشغيل ممكنة إلا من طريقة عرض خطة التنفيذ. 

لعرض جميع خطط التنفيذ التي تم إنشاؤها، اتبع هذه الخطوات.

1. انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة \> إدارة الأوامر الموزعة**.
2. في مساحة عمل **إدارة الأوامر الموزعة**، حدد اللوحة **خطط التنفيذ**.
3. حدد معرّف خطة تنفيذ الأمر ذات الصلة لعرض خطة تنفيذ.

    يعرض قسم تفاصيل الأمر في خطة التنفيذ بنود أمر المبيعات الأصلي التي كانت جزءًا من عملية التشغيل. بالإضافة إلى حقول بنود أمر المبيعات القياسية، يتضمن أيضًا قسم تفاصيل الأمر الحقول الثلاثة التالية ذات الصلة بنظام DOM:

    - **نوع التنفيذ** – يشير هذا الحقل إلى ما إذا كان بند أمر المبيعات قد تم توريده بشكل كامل أو جزئي أو لم يتم توريده إطلاقًا إلى موقع ما.
    - **تقسيم** – يشير هذا الحقل إلى ما إذا كان بند أمر المبيعات قد تم تقسيمه وتوريده إلى مواقع مختلفة.
    - **عدد مواقع التنفيذ‬** – يشير هذا الحقل إلى عدد بنود التنفيذ التي تم إنشاؤها لأمر مبيعات واحد (استنادًا إلى عدد المواقع التي تم توريد بند أمر المبيعات الأصلي إليها).

    يعرض قسم تفاصيل تنفيد الأمر تعيين بنود أمر المبيعات الأصلي إلى مواقع مختلفة، إلى جانب كمياتها.

## <a name="order-line-actions-and-statuses"></a>إجراءات وحالات بنود الأمر

فيما يلي وصف للإعدادات في بند الأمر. لفتح بند أمر، انتقل إلى **Retail وCommerce \> العملاء \> كافة أوامر المبيعات‬**.

- إذا قمت بتعيين الخيار **استثناء من معالجة DOM** على علامة التبويب **عام** لبند أمر مبيعات إلى **نعم**، فسيتم استبعاد الأمر أو بند الأمر من معالجة DOM.
- يمكن تعيين الحقل **حالة DOM** على علامة التبويب **عام** لبند أمر المبيعات إلى إحدى القيم التالية:

    - **بلا** – لم يتم توريد بند الأمر إطلاقًا.
    - **مكتمل** - تم توريد بند الأمر وتعيينه إلى موقع ما بنجاح.
    - **استثناء** - تم توريد بند الأمر ولكن تعذر تعيينه إلى موقع ما. تتضمن الاستثناءات أنواعًا فرعية متعددة يمكن عرضها من مساحة عمل DOM:

        - **لا توجد كمية متوفرة** - لا يوجد أي مخزون متاح لتعيين الأمر إليه في المواقع.
        - **الحد الأقصى عمليات الرفض** - وصل بند الأمر إلى الحد الأقصى لعمليات الرفض.
        - **تعارض تعديل البيانات** - تم تغيير بند أمر المبيعات منذ أن تم توريد الأمر. لذلك، لا يمكن تطبيق خطة تنفيذ الأمر.
        - **استثناء سطر أمر مُحدد‬** - هناك عدة استثناءات على بند الأمر.

- أثناء إدخال أمر المبيعات، يمكن تشغيل DOM في وضع تفاعلي. بينما تقوم بإدخال بند أمر، وبعد تحديد المنتج والكمية، يمكنك تحديد **تحديث البند** ومن ثم، تحت **DOM**، حدد **اقتراح موقع تنفيذ‬**. سترى عندئذٍ قائمة بالمواقع التي تستند إلى قواعد DOM والتي يمكنها تنفيذ الكمية على بند الأمر. تم فرز القائمة حسب المسافة. حدد موقعًا لتعيين الموقع والمستودع الملائمين على بند أمر المبيعات. لكي تعمل هذه الوظيفة، يلزم وجود ملف تعريف تنفيذ نشط يتطابق مع أصل المبيعات ووضع التسليم على بند المبيعات.
- لعرض سجلات تشغيل DOM لبند أمر مبيعات، حدد **بند أمر المبيعات**، ثم ضمن **إدارة الأوامر الموزعة (DOM)**، حدد **عرض سجلات DOM**. ستعرض DOM جميع الأحداث والسجلات التي نشأت نتيجة تشغيل DOM. بإمكان السجلات أن تساعدك في فهم سبب تعيين موقع معين إلى بند الأمر، والقواعد والقيود التي تمت مراعاتها كجزء من التعيين. على علامة التبويب **إدارة**، تتوفر أيضًا سجلات DOM على مستوى رأس أمر المبيعات.

## <a name="run-a-clean-up-job-for-dom-fulfillment-plans"></a>تشغيل وظيفة التنظيف لخطط DOM

أثناء تشغيل معالجة DOM، يتم إنشاء خطط تنفيذ. ومع مرور الوقت، يحتفظ النظام بخطط تنفيذ متعددة. لإدارة عدد خطط التنفيذ التي يحتفظ بها النظام، يمكنك تكوين وظيفة دفعية تحذف خطط تنفيذ الأوامر القديمة، استنادًا إلى قيمة **فترة الاحتجاز بالأيام‬**.

1. انتقل إلى **Retail وCommerce \> إدارة الأوامر الموزعة (DOM) \> معالجة الدُفعات \> إعداد وظيفة حذف بيانات تنفيذ إدارة البيانات الموزعة (DOM)‬**. 
1. في حقل **مجموعة الدُفعات**، حدد مجموعة دُفعات تم تكوينها.
1. حدد **التكرار**، وحدد تكرار الوظيفة الدفعية.
1. حدد **موافق**.

## <a name="more-information"></a>مزيد من المعلومات

فيما يلي بعض الأشياء الواجب مراعاتها عند استخدام ميزة DOM:

- في الوقت الحالي، تنظر وظيفة DOM فقط إلى الأوامر التي تم إنشاؤها من قنوات التجارة. ويتم التعرف على أوامر المبيعات كأوامر مبيعات عند تعيين الخيار **بيع بالتجارة** إلى **نعم**.
- لم تختبر Microsoft وظيفة DOM مع الميزات المتقدمة لإدارة المستودعات. ولذلك، يتعين على العملاء والشركاء توخي الحذر لتحديد ما إذا كانت وظيفة DOM متوافقة مع قدرات وعمليات الإدارة المتقدمة للمستودعات ذات الصلة بهم. يتيح التخزين المتقدم الأبعاد القابلة للتكوين، مثل حالة المخزون، التي لا توفر فهمًا دقيقًا للمخزون المتاح. توفر إدارة الأوامر الموزعة (DOM) طريقة قابلة للتوسيع لإعداد المخزون المتاح للتطبيقات التي تستخدم التخزين المتقدم. يمكن استخدامها للعمل مع القيم المخصصة لحالة المخزون والأبعاد الأخرى.

    القابلية للتوسعة في إدارة الأوامر الموزعة (DOM) محدودة لأن التحسين يحدث في نموذج برمجة الأعداد الصحيحة المختلطة (MIP) الذي تم إنشاؤه مسبقًا والذي يأخذ في الاعتبار التحسين وقيوده. تتوفر بالفعل العديد من النقاط القابلة للتوسيع لإعداد تحسين المخزون وما بعد المعالجة. يمكن أن تختلف ملفات تعريف إدارة الأوامر الموزعة (DOM) باختلاف أصل المبيعات وطريقة التسليم. يمكن تعيين أصل أمر المبيعات أثناء عرض الأمر، ويمكن استخدام استراتيجيات تحسين مختلفة بناءً على هذه القيم. تدعم إدارة الأوامر الموزعة (DOM) أيضًا إنشاء وظائف الدُفعات المخصصة التي يمكن أن تأخذ مهمة معالج إدارة الأوامر الموزعة (DOM) كإدخال وتمكين ملف التعريف ليتم تمريره كمعلمة. لذلك، يمكن تشغيل عملية تحسين واحدة تلو الأخرى لدعم سيناريوهات الأعمال المختلفة.

- تتوفر وظيفة DOM فقط في إصدار Commerce على السحابة. وهي غير معتمدة في عمليات النشر المحلي.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
