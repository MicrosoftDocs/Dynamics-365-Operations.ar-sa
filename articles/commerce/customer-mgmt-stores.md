---
title: إدارة العملاء في المتاجر
description: يشرح هذا الموضوع كيف يمكن لبائعي التجزئة تمكين إمكانات إدارة العملاء في نقطة البيع (POS) في Microsoft Dynamics 365 Commerce.
author: josaw1
ms.date: 03/05/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailOperations
audience: Application User, IT Pro
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: shajain
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: e43f8f5b91f729dc93eccb9e9e4ee21b5a5d1596
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/11/2021
ms.locfileid: "6019977"
---
# <a name="customer-management-in-stores"></a><span data-ttu-id="b4829-103">إدارة العملاء في المتاجر</span><span class="sxs-lookup"><span data-stu-id="b4829-103">Customer management in stores</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="b4829-104">يشرح هذا الموضوع كيف يمكن لبائعي التجزئة تمكين إمكانات إدارة العملاء في نقطة البيع (POS) في Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="b4829-104">This topic explains how retailers can enable customer management capabilities at the point of sale (POS) in Microsoft Dynamics 365 Commerce.</span></span>

<span data-ttu-id="b4829-105">من الضروري أن يقوم موظفو المتجر بإنشاء سجلات العملاء وتحريرها في نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b4829-105">It's important that store associates can create and edit customer records at the POS.</span></span> <span data-ttu-id="b4829-106">بهذه الطريقة، يمكنهم التقاط أي تحديثات لمعلومات العملاء مثل عنوان البريد الإلكتروني ورقم الهاتف والعنوان.</span><span class="sxs-lookup"><span data-stu-id="b4829-106">In that way, they can capture any updates to customer information such as the email address, phone number, and address.</span></span> <span data-ttu-id="b4829-107">تعتبر هذه المعلومات مفيدة في الأنظمه اللاحقة مثل التسويق، نظرا لأن فعالية هذه الأنظمة تعتمد على دقه بيانات العملاء الخاصة بها.</span><span class="sxs-lookup"><span data-stu-id="b4829-107">This information is helpful in downstream systems such as marketing, because the effectiveness of those systems depends on the accuracy of their customer data.</span></span>

<span data-ttu-id="b4829-108">يمكن لموظفي المبيعات تشغيل سير عمل إنشاء العميل من نقطتي إدخال في نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b4829-108">Sales associates can trigger the customer creation workflow from two POS entry points.</span></span> <span data-ttu-id="b4829-109">ويمكنهم تحديد زر يتم تعيينه لعملية **إضافة العميل**، أو يمكنهم تحديد **إنشاء عميل** في شريط التطبيق في صفحة نتائج البحث.</span><span class="sxs-lookup"><span data-stu-id="b4829-109">They can select a button that is mapped to the **Customer add** operation, or they can select **Create customer** on the app bar on the search results page.</span></span> <span data-ttu-id="b4829-110">وفي كلتا الحالتين، يظهر مربع الحوار **عميل جديد** حيث يمكن لموظفي المبيعات إدخال تفاصيل العميل المطلوبة، مثل اسم العميل وعنوان البريد الإلكتروني ورقم الهاتف والعنوان وأي معلومات إضافية ذات صلة بالشركة.</span><span class="sxs-lookup"><span data-stu-id="b4829-110">In both cases, the **New customer** dialog box appears, where sales associates can enter required customer details, such as the customer's name, email address, phone number, address, and any additional information that is relevant to the business.</span></span> <span data-ttu-id="b4829-111">يمكن التقاط تلك المعلومات الإضافية باستخدام سمات العميل المرتبطة بالعميل.</span><span class="sxs-lookup"><span data-stu-id="b4829-111">That additional information can be captured by using the customer attributes that are associated with the customer.</span></span> <span data-ttu-id="b4829-112">لمزيد من المعلومات حول سمات العميل، راجع [سمات العميل](dev-itpro/customer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="b4829-112">For more information about customer attributes, see [Customer attributes](dev-itpro/customer-attributes.md).</span></span>

<span data-ttu-id="b4829-113">كما يمكن أيضًا لموظفي المبيعات التقاط عناوين البريد الكتروني الثانوية وأرقام الهاتف.</span><span class="sxs-lookup"><span data-stu-id="b4829-113">Sales associates can also capture secondary email addresses and phone numbers.</span></span> <span data-ttu-id="b4829-114">بالإضافة إلى ذلك، يمكنهم التقاط تفضيلات العميل حول استلام معلومات التسويق عبر أي من عناوين البريد الكتروني الثانوية أو أرقام الهاتف.</span><span class="sxs-lookup"><span data-stu-id="b4829-114">Additionally, they can capture the customer's preference about receiving marketing information via any of those secondary email addresses or phone numbers.</span></span> <span data-ttu-id="b4829-115">لتمكين هذه الإمكانية، يجب أن يقوم بائعو التجزئة بتشغيل ميزة **التقاط العديد من عناوين البريد الكتروني وأرقام الهواتف والموافقة على التسويق لجهات الاتصال هذه** في مساحة عمل **إدارة الميزات** في المركز الرئيسي لـ Commerce (**إدارة الأنظمة \> مساحات العمل \> إدارة الميزات**).</span><span class="sxs-lookup"><span data-stu-id="b4829-115">To enable this capability, retailers must turn on the **Capture multiple emails and phone numbers and consent for marketing on these contacts** feature in the **Feature management** workspace in Commerce headquarters (**Systems administration \> Workspaces \> Feature management**).</span></span>

## <a name="default-customer-properties"></a><span data-ttu-id="b4829-116">خصائص العميل الافتراضية</span><span class="sxs-lookup"><span data-stu-id="b4829-116">Default customer properties</span></span>

<span data-ttu-id="b4829-117">يمكن لبائعي التجزئة استخدام صفحة **كافة المتاجر** في المركز الرئيسية لـ Commerce (**Retail وCommerce \> القنوات \> المتاجر**) لربط عميل افتراضي بكل متجر.</span><span class="sxs-lookup"><span data-stu-id="b4829-117">Retailers can use the **All stores** page in Commerce headquarters (**Retail and Commerce \> Channels \> Stores**) to associate a default customer with each store.</span></span> <span data-ttu-id="b4829-118">يقوم تطبيق Commerce بعد ذلك بنسخ الخصائص المحددة للعميل الافتراضي لكافة سجلات العملاء الجديدة التي تم إنشاؤها.</span><span class="sxs-lookup"><span data-stu-id="b4829-118">Commerce then copies the properties that are defined for the default customer to all new customer records that are created.</span></span> <span data-ttu-id="b4829-119">على سبيل المثال، يُظهر مربع الحوار **إنشاء عميل** الخصائص الموروثة من العميل الافتراضي المرتبط بالمتجر.</span><span class="sxs-lookup"><span data-stu-id="b4829-119">For example, the **Create customer** dialog box shows properties that are inherited from the default customer that is associated with the store.</span></span> <span data-ttu-id="b4829-120">وتتضمن هذه الخصائص نوع العميل ومجموعة العملاء وتفضيلات الاستلام والعملة واللغة.</span><span class="sxs-lookup"><span data-stu-id="b4829-120">Those properties include the customer type, customer group, receipt preference, currency, and language.</span></span> <span data-ttu-id="b4829-121">يتم أيضًا توارث أي تبعيات (تجميعات العملاء) من العميل الافتراضي.</span><span class="sxs-lookup"><span data-stu-id="b4829-121">Any affiliations (groupings of customers) are also inherited from the default customer.</span></span> <span data-ttu-id="b4829-122">ومع ذلك، يتم توريث الأبعاد المالية من مجموعة العملاء المرتبطة بالعميل الافتراضي، وليس من العميل الافتراضي نفسه.</span><span class="sxs-lookup"><span data-stu-id="b4829-122">However, financial dimensions are inherited from the customer group that is associated with the default customer, not from the default customer itself.</span></span>

<span data-ttu-id="b4829-123">يمكن أن يقوم موظفو المبيعات بالتقاط عناوين متعددة للعميل.</span><span class="sxs-lookup"><span data-stu-id="b4829-123">Sales associates can capture multiple addresses for a customer.</span></span> <span data-ttu-id="b4829-124">يتم اكتساب اسم العميل ورقم الهاتف من معلومات جهة الاتصال المرتبطة بكل عنوان.</span><span class="sxs-lookup"><span data-stu-id="b4829-124">The customer's name and phone number are inherited from the contact information that is associated with each address.</span></span> <span data-ttu-id="b4829-125">تشتمل علامة التيوبب السريعة **العناوين** لسجل العميل على حقل **الغرض** الذي يمكن لموظفي المبيعات تحريره.</span><span class="sxs-lookup"><span data-stu-id="b4829-125">The **Addresses** FastTab of a customer record includes a **Purpose** field that sales associates can edit.</span></span> <span data-ttu-id="b4829-126">إذا كان نوع العميل هو **الشخص**، تكون القيمة الافتراضية **المنزل**.</span><span class="sxs-lookup"><span data-stu-id="b4829-126">If the customer type is **Person**, the default value is **Home**.</span></span> <span data-ttu-id="b4829-127">إذا كان نوع العميل هو **المؤسسة**، تكون القيمة الافتراضية **العمل**.</span><span class="sxs-lookup"><span data-stu-id="b4829-127">If the customer type is **Organization**, the default value is **Business**.</span></span> <span data-ttu-id="b4829-128">تتضمن القيم الأخرى التي يعتمدها هذا الحقل **المنزل** و **المكتب** و **صندوق البريد**.</span><span class="sxs-lookup"><span data-stu-id="b4829-128">Other values that this field supports include **Home**, **Office**, and **Post box**.</span></span> <span data-ttu-id="b4829-129">يتم اكتساب قيمه حقل **البلد** للعنوان من العنوان الرئيسي المحدد في صفحة **وحدة التشغيل** في المركز الرئيسية لـ Commerce في **إدارة المؤسسات \> المؤسسات \> وحدات التشغيل**.</span><span class="sxs-lookup"><span data-stu-id="b4829-129">The value of the **Country** field for an address is inherited from the primary address that is specified on the **Operating unit** page in Commerce headquarters at **Organization administration \> Organizations \> Operating units**.</span></span>

## <a name="sync-customers-and-async-customers"></a><span data-ttu-id="b4829-130">العملاء المتزامنون والعملاء غير المتزامنين</span><span class="sxs-lookup"><span data-stu-id="b4829-130">Sync customers and Async customers</span></span>

<span data-ttu-id="b4829-131">في Commerce، يوجد وضعان لإنشاء العملاء: متزامن وغير متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-131">In Commerce, there are two modes of customer creation: Synchronous (or Sync) and Asynchronous (or Async).</span></span> <span data-ttu-id="b4829-132">افتراضيًا، يتم إنشاء العملاء بشكل متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-132">By default, customers are created synchronously.</span></span> <span data-ttu-id="b4829-133">بمعني آخر، يتم إنشاؤهم في المركز الرئيسي لـ Commerce في الوقت الحقيقي.</span><span class="sxs-lookup"><span data-stu-id="b4829-133">In other words, they are created in Commerce headquarters in real time.</span></span> <span data-ttu-id="b4829-134">يعتبر وضع إنشاء عميل متزامن مفيدًا نظرًا لأن العملاء الجدد يكونون قابلين للبحث في الحال عبر القنوات.</span><span class="sxs-lookup"><span data-stu-id="b4829-134">The Sync customer creation mode is beneficial because new customers are immediately searchable across channels.</span></span> <span data-ttu-id="b4829-135">ومع ذلك، يوجد عيب لهذا الوضع.</span><span class="sxs-lookup"><span data-stu-id="b4829-135">However, it also has a drawback.</span></span> <span data-ttu-id="b4829-136">نظرًا لأنه يقوم بإنشاء استدعاءات [Commerce Data Exchange: خدمة في الوقت الحقيقي](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) للمركز الرئيسي لـ Commerce، فيمكن أن يتأثر الأداء إذا تم اجراء العديد من الاستدعاءات لإنشاء عملاء متزامنين.</span><span class="sxs-lookup"><span data-stu-id="b4829-136">Because it generates [Commerce Data Exchange: Real-time Service](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) calls to Commerce headquarters, performance can be affected if many concurrent customer creation calls are made.</span></span>

<span data-ttu-id="b4829-137">إذا تم تعيين خيار **إنشاء عميل في وضع غير متزامن** إلى **نعم** في ملف تعريف وظائف المتجر (**Retail وCommerce \> إعدادات القناة \> إعداد المتجر عبر الإنترنت \> ملفات تعريف الوظائف**)، لا يتم استخدام استدعاءات خدمة الوقت الحقيقي لإنشاء سجلات العملاء في قاعدة بيانات القناة.</span><span class="sxs-lookup"><span data-stu-id="b4829-137">If the **Create customer in async mode** option is set to **Yes** in the store's functionality profile (**Retail and Commerce \> Channel setup \> Online store setup \> Functionality profiles**), Real-time Service calls aren't used to create customer records in the channel database.</span></span> <span data-ttu-id="b4829-138">لا يؤثر وضع إنشاء العميل غير المتزامن على أداء المركز التجاري لـ Commerce.</span><span class="sxs-lookup"><span data-stu-id="b4829-138">The Async customer creation mode doesn't affect the performance of Commerce headquarters.</span></span> <span data-ttu-id="b4829-139">يتم تعيين معرف فريد عمومي مؤقت (GUID) لكل سجل عميل غير متزامن جديد ويتم استخدامه كمعرف حساب العميل.</span><span class="sxs-lookup"><span data-stu-id="b4829-139">A temporary globally unique identifier (GUID) is assigned to every new Async customer record and used as the customer account ID.</span></span> <span data-ttu-id="b4829-140">لا يظهر هذا المعرف الفريد العمومي لمستخدمي نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b4829-140">This GUID isn't shown to POS users.</span></span> <span data-ttu-id="b4829-141">وبدلا من ذلك، سيشاهد هؤلاء المستخدمون **مزامنة معلقة** كمعرف حساب العميل.</span><span class="sxs-lookup"><span data-stu-id="b4829-141">Instead, those users will see **Pending sync** as the customer account ID.</span></span> <span data-ttu-id="b4829-142">على الرغم من أن هذا التكوين يفرض إنشاء العملاء بشكل غير متزامن، لكن لاحظ أن عمليات التحرير الخاصة بسجلات العملاء يتم دائمًا إجراؤها بشكل متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-142">Although this configuration forces customers to be created asynchronously, note that edits to customer records are always done synchronously.</span></span>

### <a name="convert-async-customers-to-sync-customers"></a><span data-ttu-id="b4829-143">تحويل عملاء متزامنين إلى عملاء غير متزامنين</span><span class="sxs-lookup"><span data-stu-id="b4829-143">Convert Async customers to Sync customers</span></span>

<span data-ttu-id="b4829-144">لتحويل العملاء غير المتزامنين إلى عملاء متزامنين، يجب أولا تشغيل الوظيفة P لإرسال العملاء غير المتزامنين إلى المركز الرئيسي لـ Commerce.</span><span class="sxs-lookup"><span data-stu-id="b4829-144">To convert Async customers to Sync customers, you must first run the P-job to send the Async customers to Commerce headquarters.</span></span> <span data-ttu-id="b4829-145">بعد ذلك قم بتشغيل وظيفة **مزامنة العملاء وشركاء الأعمال من وضع غير متزامن** لإنشاء معرفات حسابات العملاء.</span><span class="sxs-lookup"><span data-stu-id="b4829-145">Then run the **Synchronize customers and business partners from async mode** job to create customer account IDs.</span></span> <span data-ttu-id="b4829-146">أخيرًا، قم بتشغيل الوظيفة **1010** لمزامنة معرفات حساب العملاء الجديدة إلى القنوات.</span><span class="sxs-lookup"><span data-stu-id="b4829-146">Finally, run the **1010** job to sync the new customer account IDs to the channels.</span></span>

### <a name="async-customer-limitations"></a><span data-ttu-id="b4829-147">قيود العميل غير المتزامن</span><span class="sxs-lookup"><span data-stu-id="b4829-147">Async customer limitations</span></span>

<span data-ttu-id="b4829-148">تتحدد وظيفة العميل غير المتزامن بالقيود التالية:</span><span class="sxs-lookup"><span data-stu-id="b4829-148">The Async customer functionality currently has the following limitations:</span></span>

- <span data-ttu-id="b4829-149">لا يمكن تحرير سجلات العملاء غير المتزامنة ما لم يتم إنشاء العميل في المركز الرئيسي لـ Commerce وإعادة مزامنة معرف حساب العميل الجديد مرة أخرى إلى القناة.</span><span class="sxs-lookup"><span data-stu-id="b4829-149">Async customer records can't be edited unless the customer has been created in Commerce headquarters and the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="b4829-150">لا يمكن إقران التبعيات بالعملاء غير المتزامنين.</span><span class="sxs-lookup"><span data-stu-id="b4829-150">Affiliations can't be associated with Async customers.</span></span> <span data-ttu-id="b4829-151">لذلك، لا يرث العملاء الجدد غير المتزامنين التبعيات من العميل الافتراضي.</span><span class="sxs-lookup"><span data-stu-id="b4829-151">Therefore, new Async customers don't inherit affiliations from the default customer.</span></span>
- <span data-ttu-id="b4829-152">لا يمكن إصدار بطاقات الولاء للعملاء غير المتزامنين إلا إذا تمت إعادة مزامنة معرف حساب العميل الجديد مرة أخرى إلى القناة.</span><span class="sxs-lookup"><span data-stu-id="b4829-152">Loyalty cards can't be issued to Async customers unless the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="b4829-153">لا يمكن التقاط عناوين البريد الإلكتروني الثانوية وأرقام الهاتف للعملاء غير المتزامنين.</span><span class="sxs-lookup"><span data-stu-id="b4829-153">Secondary email addresses and phone numbers can't be captured for Async customers.</span></span>

### <a name="customer-creation-in-pos-offline-mode"></a><span data-ttu-id="b4829-154">إنشاء عميل في وضع غير متصل في نقطة البيع</span><span class="sxs-lookup"><span data-stu-id="b4829-154">Customer creation in POS offline mode</span></span>

<span data-ttu-id="b4829-155">في حالة عدم اتصال نقطة البيع أثناء تمكين وضع إنشاء العميل غير المتزامن، يتم إنشاء سجلات عملاء جديدة بشكل غير متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-155">If the POS goes offline while the Async customer creation mode is enabled, new customer records are created asynchronously.</span></span> <span data-ttu-id="b4829-156">في حالة عدم اتصال نقطة البيع أثناء تعطيل وضع إنشاء العميل غير المتزامن، يقوم النظام تلقائيًا بالتبديل إلى وضع إنشاء العميل غير متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-156">If the POS goes offline while the Async customer creation mode is disabled, the system automatically switches to the Async customer creation mode.</span></span> <span data-ttu-id="b4829-157">بعبارة أخرى، يمكن إنشاء سجلات عملاء بشكل غير متزامن حتى في حالة تعطيل وضع إنشاء عميل غير متزامن.</span><span class="sxs-lookup"><span data-stu-id="b4829-157">In other words, customer records might be created asynchronously even if the Async customer creation mode is disabled.</span></span> <span data-ttu-id="b4829-158">لذلك، يجب على مسؤولي المركز الرئيسي لـ Commerce إنشاء وجدولة وظيفة دُفعة متكررة للوظيفة P ، والوظيفة **مزامنة العملاء وشركاء الاعمال من وضع غير متزامن**، الوظيفة **1010**، بحيث يتم تحويل أي من العملاء غير متزامنين إلى لعملاء متزامنين في المركز الرئيسي لـ Commerce.</span><span class="sxs-lookup"><span data-stu-id="b4829-158">Therefore, Commerce headquarters administrators must create and schedule a recurring batch job for the P-job, the **Synchronize customers and business partners from async mode** job, and the **1010** job, so that any Async customers are converted to Sync customers in Commerce headquarters.</span></span>

> [!NOTE]
> <span data-ttu-id="b4829-159">في حالة تعيين الخيار **تصفية جداول بيانات العميل المشتركة** إلى **نعم** في صفحة **مخطط قناة التجارة** (**Retail وCommerce\> إعداد المراكز الرئيسية \> مجدول Commerce\> مجموعة قواعد بيانات القناة**)، لا يتم إنشاء سجلات العملاء في وضع دون اتصال في نقطة البيع.</span><span class="sxs-lookup"><span data-stu-id="b4829-159">If the **Filter shared customer data tables** option is set to **Yes** on the **Commerce channel schema** page (**Retail and Commerce \> Headquarters setup \> Commerce scheduler \> Channel database group**), customer records aren't created in POS offline mode.</span></span> <span data-ttu-id="b4829-160">لمزيد من المعلومات، راجع [استبعاد البيانات دون اتصال](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span><span class="sxs-lookup"><span data-stu-id="b4829-160">For more information, see [Offline data exclusion](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b4829-161">الموارد الإضافية</span><span class="sxs-lookup"><span data-stu-id="b4829-161">Additional resources</span></span>

[<span data-ttu-id="b4829-162">سمات العميل</span><span class="sxs-lookup"><span data-stu-id="b4829-162">Customer attributes</span></span>](dev-itpro/customer-attributes.md)

[<span data-ttu-id="b4829-163">استبعاد البيانات دون اتصال</span><span class="sxs-lookup"><span data-stu-id="b4829-163">Offline data exclusion</span></span>](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)
