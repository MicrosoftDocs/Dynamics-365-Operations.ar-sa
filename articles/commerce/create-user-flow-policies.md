---
title: إنشاء سياسات تدفق المستخدم
description: توضح هذه المقالة كيفية إنشاء سياسات تدفق المستخدمين في portal Microsoft Azure.
author: BrianShook
ms.date: 11/15/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.openlocfilehash: 91b9d99dfd8c3d100ca197aa499ca86799bbffc8
ms.sourcegitcommit: 774f8f97a0b14cf1199bd1802178ccf536a25ade
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 11/17/2022
ms.locfileid: "9785209"
---
# <a name="create-user-flow-policies"></a>إنشاء سياسات تدفق المستخدم

[!include [banner](includes/banner.md)]

توضح هذه المقالة كيفية إنشاء سياسات تدفق المستخدمين في portal Microsoft Azure.

سياسات تدفق المستخدم هي السياسات التي يستخدمها Azure Active Directory (Azure AD) بين الشركة والمستهلك (B2C) لتوفير تجارب مستخدم آمنة للتسجيل وتسجيل الدخول وتحرير ملف التعريف ونسيان كلمه المرور. يستخدم Dynamics 365 Commerce هذه التدفقات لتنفيذ إجراءات السياسة للتفاعل مع مستأجر Azure AD B2C. عندما يتفاعل المستخدم مع هذه السياسات، يُعاد توجيههم إلى مستأجر Azure AD B2C لتنفيذ الإجراءات.

يوفر Azure AD B2C ثلاثة أنواع من تدفقات المستخدم الأساسية:
- التسجيل وتسجيل الدخول
- تحرير ملف التعريف
- إعادة تعيين كلمة المرور

يمكنك اختيار استخدام تدفقات المستخدم الافتراضية التي يوفرها Azure AD، والتي ستقوم بعرض صفحة يستضيفها Azure AD B2C. أو يمكنك إنشاء صفحة HTML للتحكم في شكل وأسلوب تجارب تدفق المستخدم هذه. 

لتخصيص صفحات سياسة المستخدم مع الضفحات المضمنة في Dynamics 365 Commerce، راجع [إعداد صفحات مخصصة لعمليات تسجيل دخول المستخدمين‬](custom-pages-user-logins.md). لمزيد من المعلومات، راجع [تخصيص واجهة تجارب المستخدم في Azure Active Directory B2C](/azure/active-directory-b2c/tutorial-customize-ui).

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a>إنشاء سياسة سير عمل المستخدم للتسجيل وتسجيل الدخول

لإنشاء سياسة سير عمل المستخدم للتسجيل وتسجيل الدخول، اتبع الخطوات التالية.

1. في مدخل Azure، حدد **تدفقات المستخدم (السياسات)** في جزء التنقل الأيمن.
1. في صفحة **Azure AD B2C – تدفقات المستخدم (السياسات)‬‏‫** حدد **تدفق مستخدم جديد‬‏‫**.
1. حدد سياسة **تسجيل الاشتراك وتسجيل الدخول** ثم حدد الإصدار **الموصى به**.
1. ضمن **الاسم**، أدخل اسمًا للسياسة. سيظهر هذا الاسم بعد ذلك مع بادئة يعينها المدخل (على سبيل المثال، "B2C_1_").
1. ضمن **موفرو الهوية** في قسم **الحسابات المحلية** حدد **تسجيل الاشتراك بالبريد الإلكتروني‬‏‫**. يتم استخدام مصادقة البريد الإلكتروني في السيناريوهات الأكثر شيوعًا لـ Commerce. إذا كنت تستخدم أيضًا مصادقة موفر الهوية الاجتماعية، يمكنك أيضًا تحديدها في هذا الوقت.
1. ضمن **مصادقة متعددة العوامل**، حدد الاختيار المناسب لشركتك. 
1. ضمن **سمات ومطالبات المستخدم**، حدد الخيارات لجمع السمات أو إرجاع المطالبات حسب الحاجة. حدد **إظهار المزيد...** للحصول على قائمة كاملة بخيارات السمات والمطالبات. يحتاج Commerce إلى الخيارات الافتراضية التالية:

    | **جمع سمة** | **إرجاع مطالبة** |
    | ---------------------- | ----------------- |
    | عنوان البريد الإلكتروني          | عناوين البريد الإلكتروني   |
    | الاسم المحدد             | الاسم المحدد        |
    |                        | موفر الهوية‬ |
    | اللقب                | اللقب           |
    |                        | معرف الكائن الخاص بالمستخدم  |

1. حدد **إنشاء**.

الصورة التالية هي مثال عن سير عمل المستخدم للتسجيل وتسجيل الدخول إلى Azure AD B2C.

![إعدادات سياسة التسجيل وتسجيل الدخول.](./media/B2CImage_11.png)

   
### <a name="create-a-profile-editing-user-flow-policy"></a>إنشاء سياسة تدفق المستخدم لتحرير ملف التعريف

لإنشاء سياسة تدفق المستخدم لتحرير ملف التعريف، اتبع الخطوات التالية.

1. في مدخل Azure، حدد **تدفقات المستخدم (السياسات)** في جزء التنقل الأيمن.
1. في صفحة **Azure AD B2C – تدفقات المستخدم (السياسات)‬‏‫** حدد **تدفق مستخدم جديد‬‏‫**.
1. حدد **تحرير ملف التعريف**، ثم حدد الإصدار **الموصى به**.
1. ضمن **الاسم**، أدخل تدفق المستخدم لتحرير ملف التعريف. سيظهر هذا الاسم بعد ذلك مع بادئة يعينها المدخل (على سبيل المثال، "B2C_1_").
1. ضمن **موفرو الهوية** في قسم **الحسابات المحلية** حدد **تسجيل الدخول إلى البريد الإلكتروني‬‏‫**.
1. ضمن **سمات المستخدم**، حدد خانات الاختيار التالية:
    
    | **جمع سمة** | **إرجاع مطالبة** |
    | ---------------------- | ----------------- |
    |                        | عناوين البريد الإلكتروني   |
    | الاسم المحدد             | الاسم المحدد        |
    |                        | موفر الهوية‬ |
    | اللقب                | اللقب           |
    |                        | معرف الكائن الخاص بالمستخدم  |
    
1. حدد **إنشاء**.

تعرض الصورة التالية مثالاً عن تدفق المستخدم لتحرير مرف تعريف Azure AD B2C.

![مثال على تدفق المستخدم لتحرير ملف تعريف‬ Azure AD B2C](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a>إنشاء سياسة تدفق المستخدم لإعادة تعيين كلمة المرور

لإنشاء سياسة تدفق المستخدم لإعادة تعيين كلمة المرور، اتبع الخطوات التالية.

1. في مدخل Azure، حدد **تدفقات المستخدم (السياسات)** في جزء التنقل الأيمن.
1. في صفحة **Azure AD B2C – تدفقات المستخدم (السياسات)‬‏‫** حدد **تدفق مستخدم جديد‬‏‫**.
1. حدد **إعادة تعيين كلمة المرور**، ثم حدد الإصدار **الموصى به**.
1. ضمن **الاسم**، أدخل اسمًا لتدفق المستخدم لإعادة تعيين كلمة المرور.
1. ضمن **موفرو الهوية**، حدد **إعادة تعيين كلمة المرور باستخدام عنوان البريد الكتروني**.
1. حدد **إنشاء**.
1. ضمن **مطالبات التطبيق**، حدد خانات الاختيار التالية:
    - **عناوين البريد الإلكتروني**
    - **الاسم المحدد**
    - **اللقب**
    - **معرف الكائن الخاص بالمستخدم**
1. حدد **إنشاء**.

توضح الصورة التالية المكان حيث يجب تعيين الخيار **إعادة تعيين كلمة المرور باستخدام عنوان بريد إلكتروني** في تدفق المستخدم لإعادة تعيين كلمة المرور في Azure AD B2C.

![تعيين "إعادة تعيين كلمة المرور باستخدام عنوان بريد إلكتروني" في سياسة إعادة تعيين كلمة المرور](./media/B2CImage_13.png)

## <a name="next-steps"></a>الخطوات التالية

لمتابعة عملية إعداد مستأجر B2C في Commerce، تابع [إضافة موفري الهوية الإجتماعية](add-social-identity-providers.md).

## <a name="additional-resources"></a>الموارد الإضافية

[إعداد مستأجر B2C في Commerce](set-up-b2c-tenant.md)

[إنشاء مستأجر B2C Azure AD موجود أو الارتباط به في Azure portal ](create-link-aad-b2c-tenant.md)

[إنشاء تطبيق B2C](create-b2c-app.md)

[إضافة موفري الهوية الاجتماعية (اختياري)](add-social-identity-providers.md)

[تحديث Commerce headquarters بواسطة معلومات Azure AD B2C](update-hq-aad-b2c-info.md)

[تكوين مستأجر B2C في منشئ موقع Commerce](config-b2c-tenant-site-builder.md)

[معلومات B2C إضافية](additional-b2c-info.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
