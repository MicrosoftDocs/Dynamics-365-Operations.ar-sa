---
title: النطاقات في Dynamics 365 Commerce
description: يصف هذا المقال كيفية معالجة المجالات في Microsoft Dynamics 365 Commerce.
author: BrianShook
ms.date: 11/08/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: BrShoo
ms.search.validFrom: 2017-06-20
ms.openlocfilehash: f1a2de7984aad7d291b8a4dc68f5690d57ebe6cc
ms.sourcegitcommit: 2b654e60e2553a5835ab5790db4ccfa58828fae7
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 11/08/2022
ms.locfileid: "9750670"
---
# <a name="domains-in-dynamics-365-commerce"></a>النطاقات في Dynamics 365 Commerce

[!include [banner](includes/banner.md)]

يصف هذا المقال كيفية معالجة المجالات في Microsoft Dynamics 365 Commerce.

المجالات هي عناوين ويب تُستخدم للانتقال إلى مواقع Dynamics 365 Commerce في مستعرض الويب. يمكنك التحكم في إدارة مجالك مع موفر خادم اسم مجال (DNS) تختاره. يُشار إلى المجالات عبر منشئ المواقع في Dynamics 365 Commerce لتنسيق كيفية الوصول إلى الموقع عند نشره. يراجع هذا المقال كيفية التعامل مع المجالات والإشارة اليها عبر دورة حياة تطوير موقع Commerce وتشغيله.

> [!NOTE]
> اعتبارًا من 6 مايو 2022، سيتم تزويد جميع البيئات التي نشأت في Dynamics 365 Commerce بواسطة المجال `.dynamics365commerce.ms`، مما يؤدي إلى استبدال نمط `.commerce.dynamics.com` السابق. ستستمر البيئات الموجودة التي يتم تزويدها بواسطة المحال `.commerce.dynamics.com` في العمل.

## <a name="provisioning-and-supported-host-names"></a>التزويد وأسماء الأجهزة المضيفة المدعومة‬‏‫

عند توفير بيئة تجارة إلكترونية في [Microsoft Dynamics Lifecycle Services (LCS)](https://lcs.dynamics.com/)، يتم استخدام المربع **أسماء الأجهزة المضيفة المدعومة** على شاشة توفير التجارة الإلكترونية لإدخال مجالات سيتم ربطها ببيئة Commerce المنشورة. ستكون هذه المجالات أسماء خوادم أسماء المجالات (DNS) المخصصة للعملاء وستكون حيث ستتم استضافة مواقع الويب للتجارة الإلكترونية. لا يؤدي إدخال مجال في هذه المرحلة إلى بدء تحويل حركة المرور للمجال إلى Dynamics 365 Commerce. سيتم توجيه حركة المرور لمجال ما إلى نقطة نهاية Commerce فقط عند تحديث سجل DNS CNAME لاستخدام نقطة نهاية Commerce مع المجال.

> [!NOTE]
> يمكن إدخال مجالات متعددة في مربع **أسماء الأجهزة المضيفة المدعومة‬‏‫** وذلك بفصلها بفواصل منقوطة.

يبين الرسم التوضيحي التالي شاشة توفير التجارة الإلكترونية في LCS مع تمييز المربع **أسماء الأجهزة المضيفة المدعومة**. 

![شاشة توفير التجارة الإلكترونية في LCS مع تمييز المربع **أسماء الأجهزة المضيفة المدعومة**.](./media/Domains_ProvisioningeCommerceScreen_publish.png)

يمكنك إنشاء طلب خدمة لإضافة المزيد من المجالات إلى بيئة في حال كان التزويد قد حدث بالفعل. لإنشاء طلب خدمة في LCS، انتقل في بيئتك إلى **الدعم \> مشاكل الدعم** وحدد **إرسال حادث**.

## <a name="commerce-generated-urls"></a>عناوين URL المنشأة من Commerce

عند توفير بيئة تجارة إلكترونية لـ Dynamics 365 Commerce ، سينشئ Commerce عنوان URL سوف يكون عنوان العمل الخاص بالبيئة. يُشار إلى عنوان URL هذا في ارتباط موقع التجارة الإلكترونية الذي يظهر في LCS بعد توفير البيئة. يكون عنوان URL الذي يتم إنشائه في Commerce في تنسيق `https://<e-commerce tenant name>.dynamics365commerce.ms`، حيث يكون اسم مستأجر التجارة الإلكترونية هو الاسم الذي تم إدخاله في LCS لبيئة Commerce.

يمكنك استخدام أسماء الأجهزة المضيفة لموقع الإنتاج في بيئة اختبار معزولة أيضًا. يعد هذا الخيار مثاليًا عندما تقوم بنسخ موقع من بيئة اختبار معزولة إلى بيئة إنتاج.

## <a name="site-setup"></a>إعداد الموقع

بعد توفير بيئة التجارة الإلكترونية الخاصة بك، يجب عليك إعداد موقعك في منشئ المواقع في Commerce لربط موقعك بعنوان URL صالح للعمل.

عند إعداد موقع للمرة الأولى في منشئ المواقع، سيظهر مربع الحوار **إعداد موقعك**.

يبين الرسم التوضيحي التالي مربع الحوار **إعداد موقعك** لموقع مسمى "افتراضي" عندما تنتقل إلى الموقع للمرة الأولى في منشئ المواقع.

![مربع الحوار **إعداد موقعك**.](./media/Domains_SetupyoursiteScreen.png)

يسمح لك المربع **تحديد مجال** بربط أحد أسماء الأجهزة المضيفة المدعومة لموقعك في LCS في منشئ المواقع.

يمكن ترك مربع **المسار** فارغًا، أو يمكن إضافة سلسلة مسار إضافية سوف تنعكس في عنوان URL صالح للعمل. يؤدي ترك مربع **المسار** فارغًا إلى ربط عنوان URL الأساسي الذي تم إنشاؤه في Commerce بالموقع الذي يجري إعداده في منشئ المواقع. يجب أن تكون المسارات فريدة لكل زوج موقع/مجال. ضمن الموقع والمجال المحددين، بإمكان موقع واحد فقط في البيئة استخدام المسار الفارغ أو المرتبط بسلسلة مسار فريدة. ستصبح أي سلسلة تُضاف إلى حقل **المسار** أثناء إعداد الموقع مسارًا فرعيًا اعداد الموقع مسارا فرعًا لعنوان URL الأساسي الذي تم إنشاؤه في Commerce والمستخدم للوصول إلى الموقع في مستعرض الويب.

> [!NOTE]
> يعرف المسار أيضًا باسم **مسار المطابقة** عند إضافة قناة في قسم مسار تكوين **إعدادات الموقع \> القنوات** في منشئ المواقع.

على سبيل المثال، إذا كان لديك موقع في منشئ الموقع يسمى "fabrikam" في مستأجر تجارة إلكترونية يسمى "xyz"، وإذا قمت بإعداد الموقع بمسار فارغ، فيمكنك في هذه الحالة الوصول إلى محتوى الموقع المنشور في مستعرض الويب بالانتقال مباشرةً إلى عنوان URL الأساسي الذي تم إنشاؤه في Commerce.‬

`https://xyz.dynamics365commerce.ms`

بدلاً من ذلك، إذا أضفت مسار "fabrikam" أثناء إعداد هذا الموقع نفسه، فيمكنك الوصول إلى محتوى الموقع المنشور في مستعرض الويب باستخدام عنوان URL التالي:

`https://xyz.dynamics365commerce.ms/fabrikam`

## <a name="pages-and-urls"></a>الصفحات وعناوين URL

بعد إعداد موقعك بواسطة مسار، سيتم بناء جميع عناوين URL المقترنة بصفحات في منشئ المواقع على عنوان URL صالح للعمل (عنوان URL الذي تم إنشاؤه في Commerce أو عنوان URL الذي تم إنشاؤه في Commerce بالإضافة إلى المسار) للموقع. سيؤدي إنشاء عنوان URL جديد في منشئ المواقع (**URLS /> +جديد**) من خلال تحديد صفحة من القائمة في مربع الحوار **عنوان URL جديد** وإدخال مسار عنوان URL لتلك الصفحة إلى ربط عنوان URL هذا بالصفحة المحددة. تُلحق عندئذٍ قيمة مسار عنوان URL بعنوان URL صالح للعمل خاص بالموقع للوصول إلى الصفحة، وتحمل التسمية `./<URL path>` في قائمة URL لصفحة **عناوين URL** في منشئ المواقع.

يبين الرسم التوضيحي التالي مربع الحوار **عنوان URL جديد** في منشئ المواقع مع تمييز مسار URL كمثال. 

![مربع الحوار **عنوان URL جديد** في منشئ المواقع.](./media/Domains_PageSetup2a.png)

يبين الرسم التوضيحي التالي صفحة **عناوين URL** في منشئ المواقع مع تمييز عنوان URL كمثال في القائمة.

![الخيار "تشغيل تدفق المستخدم‬‏‫" في تدفق السياسة.](./media/Domains_URLsInSiteBuilder2a.png)

## <a name="domains-in-site-builder"></a>المجالات في منشئ المواقع

تتوفر قيم أسماء الأجهزة المضيفة المدعومة ليتم إقرانها كمجال عند إعداد موقع. عند تحديد قيمة اسم مضيف مدعوم كمجال، ستشاهد المجال الذي تم اختياره وقد تمت الإشارة إليه عبر منشئ المواقع. يعد هذا المجال مرجعًا فقط داخل بيئة Commerce، ولن تتم بعد إعادة توجيه حركة المرور المباشرة لهذا المجال إلى Dynamics 365 Commerce.

عند العمل مع المواقع في منشئ المواقع، عند وجود موقعين تم إعدادهما بواسطة مجالين مختلفة، يمكنك إلحاق السمة **?domain=** بعنوان URL الصالح للعمل للوصول إلى محتوى الموقع المنشور في المستعرض.

على سبيل المثال، تم تزويد البيئة "xyz"، وتم إنشاء موقعين وربطهما في منشئ المواقع: أحدهما مع المجال `www.fabrikam.com` والآخر مع المجال `www.constoso.com`. تم إعداد كل موقع باستخدام مسار فارغ. ويمكن بعد ذلك الوصول إلى هذين الموقعين في مستعرض ويب كالتالي باستخدام السمة **?domain=**:
- `https://xyz.dynamics365commerce.ms?domain=www.fabrikam.com`
- `https://xyz.dynamics365commerce.ms?domain=www.contoso.com`

عندما لا يتم إعطاء سلسلة استعلام مجال في بيئة تم فيها توفير مجالات متعددة، يستخدم Commerce المجال الأول الذي قمت بتوفيره. على سبيل المثال، إذا تم تقديم المسار "fabrikam" أولاً أثناء إعداد الموقع، فيمكن استخدام عنوان URL `https://xyz.dynamics365commerce.ms` للوصول إلى موقع محتوى الموقع المنشور في `www.fabrikam.com`.

يمكنك أيضًا إضافة مجالات مخصصة. للقيام بذلك، في الصفحة إدارة Commerce البيئية الخاصة بالمشروع، ضمن عنوان **التجارة الإلكترونية**، حدد **+ إضافة مجال مخصص**. يعرض شريط التمرير المجالات المخصصة الموجودة ويوفر خيار إضافة مجال مخصص جديد.

## <a name="update-which-commerce-scale-unit-is-used"></a>تحديث Commerce Scale Unit المستخدمة

وعادة ما يتم تحديد Commerce Scale Unit (CSU) المستخدمة من قبل Commerce عند إنشاء بيئة لأول مرة. يتيح لك Commerce تغيير المثيل CSU الذي تستخدمه البيئة الخاصة بك، مما يسمح لك بالحفاظ بشكل أفضل على الهندسة من خلال وظيفة الخدمة الذاتية، وتقليل الحاجة إلى الاتصال بالدعم. لتحديث مثيل CSU الخاص بك، انتقل إلى صفحة إدارة Commerce الخاصة بالبيئة للمشروع، ثم حدد **‏‫تحديث Scale Unit**. استخدم شريط تمرير **commerce scale unit الجديد** لتحديد مثيل CSU جديد من قائمة وحدات CSU المتوفرة للبيئة الخاصة بك.

## <a name="traffic-forwarding-in-production"></a>إعادة توجيه حركة المرور في الإنتاج

يمكنك محاكاة مجالات متعددة باستخدام معلمات سلسلة استعلام المجال في نقطة نهاية commerce.dynamics.com نفسها. ولكن عندما تحتاج إلى الانتقال إلى العرض المباشر في الإنتاج، يجب عليك توجيه حركة المرور لمجالك المخصص إلى نقطة النهاية `<e-commerce tenant name>.dynamics365commerce.ms`.

لا تدعم نقطة النهاية `<e-commerce tenant name>.dynamics365commerce.ms` مآخذ توصيل آمنة (SSL) للمجالات المخصصة، وبالتالي بجب إعداد مجالات مخصصة باستخدام خدمة الواجهة الأمامية أو شبكة تسليم المحتوى (CDN). 

لإعداد مجالات مخصصة باستخدام خدمة الواجهة الأمامية أو CDN، هناك خياران:

- قم بإعداد خدمة الواجهة الأمامية مثل Azure Front Door لمعالجة حركة مرور الواجهة الأمامية والاتصال ببيئة Commerce الخاصة بك، والتي توفر تحكمًا أكبر في المجال وإدارة الشهادات وسياسات أمان أكثر دقة.

- استخدم مثيل Azure Front Door الذي يوفره Commerce، الذي يتطلب تنسيق الإجراء مع فريق Dynamics 365 Commerce للتحقق من المجال والحصول على شهادات SSL لمجال الإنتاج.

> [!NOTE]
> إذا كنت تستخدم خدمه CDN خارجيا أو خدمه باب امامي، فتاكد من انه تم الرد علي الطلب في النظام الأساسي للتجارة باستخدام اسم المضيف المتوفر لدي التجارة ، ولكن مع راس \<custom-domain\>المضيف الذي تم إرساله بالمضيف س (XFH). علي سبيل المثال ، إذا كانت نقطه نهاية `xyz.dynamics365commerce.ms` التجارة والمجال المخصص هو ، يجب ان يكون `www.fabrikam.com` راس المضيف للطلب المعاد توجيهه هو `xyz.dynamics365commerce.ms` ويجب ان يكون `www.fabrikam.com`راس الإكسفه.

للحصول على معلومات حول كيفية إعداد خدمة CDN مباشرة، راجع [إضافة الدعم لشبكة تسليم المحتوى (CDN)](add-cdn-support.md).

لاستخدام مثيل Azure Front Door الذي توفره التجارة الإلكترونية، يجب إنشاء طلب خدمة للمساعدة في إعداد من فريق إعداد Commerce. 

- ستحتاج إلى إدخال اسم شركتك ومجال الإنتاج ومعرف البيئة واسم مستأجر التجارة الإلكترونية للإنتاج. 
- ستحتاج إلى تأكيد ما إذا كان طلب الخدمة هذا عبارة عن مجال موجود (يستخدم لموقع نشط حاليًا) أو مجال جديد. 
- بالنسبة لمجال جديد، يمكن تحقيق التحقق من المجال وشهادة SSL في خطوة واحدة. 
- بالنسبة لمجال يقوم بخدمة موقع ويب موجود، توجد عملية متعددة الخطوات مطلوبة لتأسيس التحقق من المجال وشهادة SSL. تتكون هذه العملية من اتفاقية مستوى خدمة لمدة 7 أيام عمل كي ينتقل المجال إلى وضع العرض المباشر، لأنها تشتمل على خطوات متسلسلة متعددة.

لإنشاء طلب خدمة في LCS، انتقل في بيئتك إلى **الدعم \> مشاكل الدعم** وحدد **إرسال حادث**.

> [!NOTE]
> يتم اعتماد المجالات المخصصة مع SSL فقط في بيئات التشغيل. بالنسبة للبيئات غير الإنتاجية مثل بيئة الاختبار المعزولة واختبار قبول المستخدم (UAT)، استخدام عنوان URL الذي أنشأه Commerce للوصول إلى المحتوى المنشور في مستعرض الويب.

## <a name="ssl-certificate-process"></a>عملية شهادة SSL

عند القيام بتصنيف طلب خدمة، يقوم فريق Commerce بتنسيق الخطوات التالية معك.

للمجالات الجديدة:
- سيقوم فريق Commerce بإعداد مثيل Azure Front Door (مستضاف في Commerce).
- سيقوم فريق Commerce بعد ذلك بتوفير سجل CNAME للإشارة إل مجالك المخصص.
- بعد تحديث السجل CNAME، سيكون مثيل Azure Front Door المستضاف في Commerce قادرًا على التحقق من ملكية المجال والحصول على شهادة SSL.

للمجالات الموجودة/النشطة:
- سيرشدك فريق Commerce لإضافة سجل `afdverify.<custom-domain>` CNAME لتقديمه إلى موفر DNS لمجالك.
- وعند الانتهاء، سيقوم فريق Commerce بإضافة المجال إلى مثيل Azure Front Door وتوفير سجلات DNS TXT إضافية لإضافتها إلى DNS الخاص بالمجال.
- بعد إكمال سجلات TXT، سيقوم فريق Commerce بإكمال تحديثات Azure Front Door للمجال الذي سيقوم بإعداد شهادة SSL.

## <a name="apex-domains"></a>مجالات Apex

لا يدعم مثيل Azure Front Door الذي يوفره Commerce مجالات apex (المجالات الجذر التي لا تتضمن مجالات ثانوية). تتطلب مجالات Apex عنوان IP لحل المشكلة، ويوجد Commerce Azure Front Door مع نقاط النهاية الظاهرية فقط. لاستخدام مجال رئيسي ، لديك الخيارات التالية:

- **الخيار 1** - استخدم موفر DNS لإعادة توجيه مجال apex إلى مجال "www". على سبيل المثال، يعيد fabrikam.com التوجيه إلى `www.fabrikam.com` حيث `www.fabrikam.com` يمثل سجل CNAME الذي يشير إلى مثيل Azure Front Door المستضاف في Commerce.

- **الخيار 2** -إذا كان موفر DNS الخاص بك يدعم سجلات الأسماء المستعارة ، يمكنك تاشير المجال أبيكس إلى نقطه نهاية الباب الامامي ل Azure ، والتي تضمن تغيير IP بواسطة نقطه النهاية. يجب استضافه مثيل Azure Front باب بنفسك.
  
- **الخيار 3** -إذا كان موفر DNS الخاص بك لا يدعم سجلات الأسماء المستعارة ، فيجب عليك تغيير موفر dns الخاص بك إلى AZURE dns واستضافه كل من AZURE dns ومثيل الباب الامامي من azure بنفسك.

> [!NOTE]
> إذا كنت تستخدم Azure Front Door، فيجب عليك أيضًا اعداد Azure DNS في نفس الاشتراك. يمكن لمجال apex المستضاف على Azure DNS الإشارة إلى Azure Front Door كسجل باسم مستعار. هذا هو الحل الوحيد، إذ يجب أن تشير مجالات apex دائمًا إلى عنوان IP.
  
إذا كانت لديك أي أسئلة بخصوص نطاقات Apex ، فيرجى التواصل مع [دعم Microsoft](https://support.microsoft.com/).

  ## <a name="additional-resources"></a>الموارد الإضافية

  [نشر مستأجر التجارة الإلكترونية الجديد](deploy-ecommerce-site.md)

  [إعداد قناة متجر عبر الإنترنت](./channel-setup-online.md)

  [إنشاء موقع تجارة إلكترونية](create-ecommerce-site.md)

  [إقران موقع Dynamics 365 Commerce بقناة عبر الإنترنت](associate-site-online-store.md)

  [إدارة ملفات robots.txt](manage-robots-txt-files.md)

  [تحميل عناوين URL لإعادة التوجيه‬ بشكل مجمع](upload-bulk-redirects.md)

  [إعداد مستأجر B2C في Commerce](set-up-B2C-tenant.md)

  [إعداد صفحات مخصصة لعمليات تسجيل دخول المستخدمين](custom-pages-user-logins.md)

  [تكوين مستأجرين متعددين لمتاجرة عمل-مستهلك في بيئة Commerce](configure-multi-B2C-tenants.md)

  [إضافة الدعم إلى شبكة تسليم المحتوى (CDN)](add-cdn-support.md)

  [تمكين اكتشاف المتجر استنادًا إلى الموقع](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
