---
title: تكامل التدبير بين Supply Chain Management وField Service
description: يصف هذا الموضوع كيف يدعم تكامل الكتابة الثنائية إنشاء أمر شراء وتحديثات من كل من Supply Chain Management وField Service.
author: RichardLuan
ms.date: 11/11/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: rhaertle
ms.search.region: Global
ms.author: riluan
ms.search.validFrom: 2020-11-11
ms.dyn365.ops.version: Release 10.0.17
ms.openlocfilehash: fcbede8b1a0a9a1dfcb9acbfd7cadb49eb48eecd
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750680"
---
# <a name="integrate-procurement-between-supply-chain-management-and-field-service"></a><span data-ttu-id="b7fb9-103">تكامل التدبير بين Supply Chain Management وField Service</span><span class="sxs-lookup"><span data-stu-id="b7fb9-103">Integrate procurement between Supply Chain Management and Field Service</span></span>

[!include [banner](../../includes/banner.md)]

[!include [banner](../../includes/preview-banner.md)]

<span data-ttu-id="b7fb9-104">توفر Microsoft Dynamics 365 Supply Chain Management وظيفة تدبير قويه.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-104">Microsoft Dynamics 365 Supply Chain Management provides robust procurement functionality.</span></span> <span data-ttu-id="b7fb9-105">يقدم Dynamics 365 Field Service وظيفة مشابهه تدعم عمليات الشراء المرتبطة بعمليه الخدمة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-105">Dynamics 365 Field Service offers similar functionality that supports the purchasing processes that are associated with the service process.</span></span> <span data-ttu-id="b7fb9-106">يتم دمج الوظيفة الموجودة في هذين التطبيقين من خلال الكتابة المزدوجة ، ويتم تمكين حالات الاستخدام المتداخلة الناتجة من خلال تعيينات الجداول ومنطق الحلول وطرق العرض والنماذج.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-106">The functionality in these two apps is integrated through dual-write, and the resulting cross-functional use cases are enabled through table mappings, solution logic, views, and forms.</span></span>

<span data-ttu-id="b7fb9-107">يدعم هذا التكامل إنشاء أمر الشراء، وفي معظم الحالات، تحديثات من كلا التطبيقين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-107">This integration supports purchase order creation and, in most cases, updates from both apps.</span></span> <span data-ttu-id="b7fb9-108">ومع ذلك ، فان Supply Chain Management تتحكم في التسعير والعناوين وإيصال استلام المنتجات.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-108">However, Supply Chain Management controls pricing, addresses, and product receipt.</span></span> <span data-ttu-id="b7fb9-109">يتم تمكين العديد من حالات الاستخدام الفعالة الفعالة للمؤسسات التي تستخدم Field Service وSupply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-109">Several powerful cross-functional use cases are enabled for organizations that use both Field Service and Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-110">وتمكن حالات الاستخدام هذه بدء عمليات التدبير وتعقبها عبر كلا النظامين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-110">These use cases enable procurements to be initiated and tracked across both systems.</span></span>

<span data-ttu-id="b7fb9-111">يبين الرسم التوضيحي التالي الجداول الموجودة في كلا النظامين وكيفيه تعيينها لبعضها البعض.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-111">The following illustration shows the tables in both systems and how they are mapped to each other.</span></span> <span data-ttu-id="b7fb9-112">أوامر الشراء في Field Service تشير إلى صف *حساب*، في حين ان أوامر الشراء في Supply Chain Management تشير إلى صف *مورد*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-112">Purchase orders in Field Service reference an *account* row, whereas purchase orders in Supply Chain Management reference a *vendor* row.</span></span> <span data-ttu-id="b7fb9-113">لحل التكامل، يستخدم الكتابة الثنائية مرجعا لربط صفوف *المورد* بصفوف *الحساب*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-113">To resolve the integration, dual-write uses a reference to link *vendor* rows with *account* rows.</span></span> <span data-ttu-id="b7fb9-114">لمزيد من المعلومات، راجع [الرئيسي المتكامل للمورد](vendor-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="b7fb9-114">For more information, see [Integrated vendor master](vendor-mapping.md).</span></span>

![تعيينات التدبير](media/scm-field-service-tables.png)

## <a name="prerequisites"></a><span data-ttu-id="b7fb9-116">المتطلبات الأساسية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-116">Prerequisites</span></span>

<span data-ttu-id="b7fb9-117">لتكامل Supply Chain Management مع Field Service، يجب تثبيت المكونات التالية:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-117">To integrate Supply Chain Management with Field Service, you must install the following components:</span></span>

- <span data-ttu-id="b7fb9-118">إصدار 8.8.31.60 Field Service أو إصدار لاحق، لتكامل أمر الشراء الشامل</span><span class="sxs-lookup"><span data-stu-id="b7fb9-118">Field Service version 8.8.31.60 or later, for comprehensive purchase order integration</span></span>
- <span data-ttu-id="b7fb9-119">الإصدار 10.0.14 أو أحدث من Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="b7fb9-119">Supply Chain Management version 10.0.14 or later</span></span>
- <span data-ttu-id="b7fb9-120">الكتابة الثنائية، لتشغيل حل OneFSSCM</span><span class="sxs-lookup"><span data-stu-id="b7fb9-120">Dual-write, to run the OneFSSCM solution</span></span>

## <a name="installation-guidelines"></a><span data-ttu-id="b7fb9-121">إرشادات التثبيت</span><span class="sxs-lookup"><span data-stu-id="b7fb9-121">Installation guidelines</span></span>

### <a name="prerequisites"></a><span data-ttu-id="b7fb9-122">المتطلبات الأساسية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-122">Prerequisites</span></span>

- <span data-ttu-id="b7fb9-123">**الكتابة الثنائية** – لمزيد من المعلومات، راجع [الصفحة الرئيسية ثنائيه الكتابة](dual-write-home-page.md#dual-write-setup).</span><span class="sxs-lookup"><span data-stu-id="b7fb9-123">**Dual-write** – For more information, see the [Dual-write home page](dual-write-home-page.md#dual-write-setup).</span></span>
- <span data-ttu-id="b7fb9-124">**Dynamics 365 Field Service** – لمزيد من المعلومات، راجع [كيفية تثبيت Dynamics 365 Field Service](https://docs.microsoft.com/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service)</span><span class="sxs-lookup"><span data-stu-id="b7fb9-124">**Dynamics 365 Field Service** – For more information, see [How to install Dynamics 365 Field Service](https://docs.microsoft.com/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service).</span></span>

<span data-ttu-id="b7fb9-125">عند تمكينها في Microsoft Dataverse، تقوم الكتابة الثنائية وField Service بتقديم عده طبقات حل تعمل علي توسيع البيئة مع بيانات التعريف الجديدة والنماذج وطرق العرض والمنطق.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-125">When they are enabled in Microsoft Dataverse, dual-write and Field Service introduce several solution layers that extend the environment with new metadata, forms, views, and logic.</span></span> <span data-ttu-id="b7fb9-126">يمكن تمكين هذه الحلول بأي ترتيب، بالرغم من انك عاده ما تقوم بالتثبيت بالترتيب المحدد هنا:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-126">These solutions can be enabled in any order, though you typically install in the order that is given here:</span></span>

1. <span data-ttu-id="b7fb9-127">**Field Service Common** - يتم تثبيت Field Service Common عند تثبيت Field Service في البيئة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-127">**Field Service Common** – Field Service Common is installed when Field Service is installed in the environment.</span></span>
2. <span data-ttu-id="b7fb9-128">**Field Service (Anchor)** - يتم تثبيت Field Service (Anchor) عند تثبيت Field Service في البيئة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-128">**Field Service (Anchor)** – Field Service (Anchor) is installed when Field Service is installed in the environment.</span></span> 
3. <span data-ttu-id="b7fb9-129">**Supply Chain Management الموسعة** - Supply Chain Management الموسعة يتم تثبيتها تلقائيا عند تمكين الكتابة الثنائية في البيئة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-129">**Supply Chain Management Extended** – Supply Chain Management Extended is automatically installed when dual-write is enabled in an environment.</span></span> 
4. <span data-ttu-id="b7fb9-130">**حل OneFSSCM** – يتم تثبيت OneFSSCM تلقائيا بواسطة اي الحلول (Field Service أو Supply Chain Management) التي تم تثبيتها مؤخرا.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-130">**OneFSSCM solution** – OneFSSCM is automatically installed by whichever solution (Field Service or Supply Chain Management) is installed last.</span></span>

    - <span data-ttu-id="b7fb9-131">إذا كانت Field Service مثبته بالفعل في البيئة، وكانت تقوم بتمكين الكتابة الثنائية، التي تقوم بتثبيت Supply Chain Management الموسعة، سيتم تثبيت OneFSSCM.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-131">If Field Service is already installed in the environment, and you enable dual-write, which installs Supply Chain Management Extended, OneFSSCM is installed.</span></span>
    - <span data-ttu-id="b7fb9-132">إذا كانت Supply Chain Management الموسعة مثبته بالفعل في البيئة، وكانت تقوم بتمكين الكتابة الثنائية، التي تقوم بتثبيت Field Service، سيتم تثبيت OneFSSCM.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-132">If Supply Chain Management Extended is already installed in the environment, and you install Field Service, OneFSSCM is installed.</span></span>

## <a name="initial-synchronization"></a><span data-ttu-id="b7fb9-133">مزامنة أولية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-133">Initial synchronization</span></span>

<span data-ttu-id="b7fb9-134">لإنشاء أوامر شراء جديده والعمل مع أوامر الشراء الموجودة، يجب عليك مزامنة البيانات المرجعية بين Supply Chain Management وDataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-134">To create new purchase orders and work with existing purchase orders, you must sync the reference data between Supply Chain Management and Dataverse.</span></span> <span data-ttu-id="b7fb9-135">يمكنك استخدام وظيفة الكتابة الاوليه للكشف عن علاقات الجداول والبحث عن الجداول التي يجب تمكينها لخريطة معينه.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-135">You use the initial write functionality to detect the table relationships and find the tables that you must enable for a given map.</span></span>

<span data-ttu-id="b7fb9-136">يجب مزامنة الجداول التالية:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-136">You must sync the following tables:</span></span>

- <span data-ttu-id="b7fb9-137">قوالب المنتجات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-137">Product templates</span></span>

    <span data-ttu-id="b7fb9-138">عندما تقوم بتشغيل الكتابة الاوليه، تحصل علي قائمه كامله بالجداول المطلوبة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-138">When you run the initial write, you get a full list of the tables that are required.</span></span> <span data-ttu-id="b7fb9-139">فيما يلي بعض الأمثلة عن هذه القوالب:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-139">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="b7fb9-140">كل المنتجات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-140">All products</span></span>
    - <span data-ttu-id="b7fb9-141">المنتجات الصادرة V2</span><span class="sxs-lookup"><span data-stu-id="b7fb9-141">Released products V2</span></span>
    - <span data-ttu-id="b7fb9-142">المنتجات المميزة الصادرة لـ Dataverse</span><span class="sxs-lookup"><span data-stu-id="b7fb9-142">Dataverse released distinct products</span></span>

- <span data-ttu-id="b7fb9-143">المواقع</span><span class="sxs-lookup"><span data-stu-id="b7fb9-143">Sites</span></span>
- <span data-ttu-id="b7fb9-144">المستودعات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-144">Warehouses</span></span>
- <span data-ttu-id="b7fb9-145">قوالب فئات التدبير</span><span class="sxs-lookup"><span data-stu-id="b7fb9-145">Procurement categories templates</span></span>

    <span data-ttu-id="b7fb9-146">فيما يلي بعض الأمثلة عن هذه القوالب:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-146">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="b7fb9-147">فئات التدبير</span><span class="sxs-lookup"><span data-stu-id="b7fb9-147">Procurement categories</span></span>
    - <span data-ttu-id="b7fb9-148">أساس</span><span class="sxs-lookup"><span data-stu-id="b7fb9-148">Pro</span></span>
    - <span data-ttu-id="b7fb9-149">التدرج الهرمي لفئات المنتجات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-149">Product category hierarchy</span></span>
    - <span data-ttu-id="b7fb9-150">تعيينات فئات المنتج</span><span class="sxs-lookup"><span data-stu-id="b7fb9-150">Product category assignments</span></span>

- <span data-ttu-id="b7fb9-151">قوالب الموردين ، مثل المورد الإصدار 2</span><span class="sxs-lookup"><span data-stu-id="b7fb9-151">Vendor templates, such as Vendor V2</span></span>
- <span data-ttu-id="b7fb9-152">قوالب الشخص المسؤول عن الاتصال، مثل جهات اتصال Dataverse الإصدار 2</span><span class="sxs-lookup"><span data-stu-id="b7fb9-152">Contact person templates, such as Dataverse Contacts V2</span></span>
- <span data-ttu-id="b7fb9-153">قوالب العاملين، مثل العامل</span><span class="sxs-lookup"><span data-stu-id="b7fb9-153">Worker templates, such as Worker</span></span>

<span data-ttu-id="b7fb9-154">تضمن مزامنة الجداول ان كافة المستندات (أوامر الشراء وإيصالات استلام المنتجات) في Supply Chain Management متاحه في Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-154">Synchronization of the tables ensures that all documents (purchase orders and product receipts) in Supply Chain Management are available in Dataverse.</span></span>

### <a name="account-and-vendor-tables"></a><span data-ttu-id="b7fb9-155">جداول الحساب والمورّد</span><span class="sxs-lookup"><span data-stu-id="b7fb9-155">Account and Vendor tables</span></span>

<span data-ttu-id="b7fb9-156">تعتمد أوامر الشراء في Field Service علي جدول الحساب لتعقب الموردين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-156">Purchase orders in Field Service rely on the Account table to track vendors.</span></span> <span data-ttu-id="b7fb9-157">التالي، تستخدم جداول Dataverse لأوامر الشراء الحسابات لتعقب الموردين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-157">Therefore, the Dataverse tables for purchase orders use accounts to track vendors.</span></span> <span data-ttu-id="b7fb9-158">لاحتواء هذا الاختلاف في المفتاح، يجب تنشيط مهام سير العمل الأربع التالية للاحتفاظ بالحسابات والموردين في عمليه المزامنة:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-158">To accommodate this key difference, the following four workflows must be activated to keep the accounts and vendors in sync:</span></span> 

- <span data-ttu-id="b7fb9-159">إنشاء الموردين في جدول الحسابات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-159">Create Vendors in Accounts table</span></span>
- <span data-ttu-id="b7fb9-160">إنشاء الموردين في جدول الموردين</span><span class="sxs-lookup"><span data-stu-id="b7fb9-160">Create Vendors in Vendors table</span></span>
- <span data-ttu-id="b7fb9-161">تحديث الموردين في جدول الحسابات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-161">Update Vendors in Accounts table</span></span>
- <span data-ttu-id="b7fb9-162">تحديث الموردين في جدول الموردين</span><span class="sxs-lookup"><span data-stu-id="b7fb9-162">Update Vendors in Vendors table</span></span>

<span data-ttu-id="b7fb9-163">إذا تم تثبيت OneFSSCM، لأنه يتم تثبيت كل من Field Service وSupply Chain Management الموسعة، يتم تنشيط مهام سير العمل تلقائيا.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-163">If OneFSSCM is installed, because both Field Service and Supply Chain Management Extended are installed, these workflows are automatically activated.</span></span> <span data-ttu-id="b7fb9-164">إذا لم تكن Field Service مثبته، وكانت ترغب في دمج جداول أوامر الشراء مع Dataverse، فيجب تنشيط مهام سير العمل هذه.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-164">If Field Service isn't installed, but you want to integrate the purchase order tables with Dataverse, you must activate these workflows.</span></span> <span data-ttu-id="b7fb9-165">وفي كلتا الحالتين، الا إذا قمت بالبدء من البداية، فقد تحتاج إلى التاكد من ان كافة الموردين قد تم إنشاؤهم كحسابات في Dataverse قبل إنشاء أوامر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-165">In both cases, unless you start from scratch, you might have to ensure that all vendors are created as accounts in Dataverse before you create purchase orders.</span></span> <span data-ttu-id="b7fb9-166">والا، قد تحدث أخطاء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-166">Otherwise, errors might occur.</span></span>

### <a name="initial-synchronization"></a><span data-ttu-id="b7fb9-167">مزامنة أولية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-167">Initial synchronization</span></span>

<span data-ttu-id="b7fb9-168">بعد ان تكون كافة المتطلبات المسبقة في مكانها، إذا كنت ترغب في ان تكون أوامر الشراء وإيصالات استلام المنتجات الموجودة متاحه في كلا النظامين، فيجب عليك القيام بمزامنة أوليه للقوالب التالية:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-168">After all the prerequisites are in place, if you want existing purchase orders and product receipts to be available in both systems, you must do an initial synchronization of the following templates:</span></span>

- <span data-ttu-id="b7fb9-169">رأس أمر الشراء الإصدار 2</span><span class="sxs-lookup"><span data-stu-id="b7fb9-169">Purchase Order Header V2</span></span>
- <span data-ttu-id="b7fb9-170">سطر أمر الشراء CDS</span><span class="sxs-lookup"><span data-stu-id="b7fb9-170">CDS Purchase Order Line</span></span>
- <span data-ttu-id="b7fb9-171">حذف مبدئي لسطر أمر الشراء CDS</span><span class="sxs-lookup"><span data-stu-id="b7fb9-171">CDS Purchase Order Line soft delete</span></span>
- <span data-ttu-id="b7fb9-172">عملية استلام أوامر الشراء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-172">Purchase Order Receipt</span></span>
- <span data-ttu-id="b7fb9-173">منتج عملية استلام أمر الشراء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-173">Purchase Order Receipt Product</span></span>

## <a name="mappings-with-logic"></a><span data-ttu-id="b7fb9-174">تعيينات ذات منطق</span><span class="sxs-lookup"><span data-stu-id="b7fb9-174">Mappings with logic</span></span>

<span data-ttu-id="b7fb9-175">ويقوم تكامل التدبير بتوسيع تعيين المنتج بالمنطق التالي لضمان تعيين عمود **نوع منتج Field Service** بشكل صحيح في الجدول المنتجات في Dataverse:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-175">The procurement integration extends the product mapping with the following logic to ensure that the **Field Service Product Type** column is correctly set in the products table in Dataverse:</span></span>

- <span data-ttu-id="b7fb9-176">إذا تم تعيين **نوع المنتج** إلى *منتج*، وتعيين **مجموعه نماذج صنف، المنتج المخزن** علي *صحيح*، يتم تعيين **نوع منتج Field Service** علي *المخزون*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-176">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *True*, **Field Service Product Type** is set to *Inventory*.</span></span>
- <span data-ttu-id="b7fb9-177">إذا تم تعيين **نوع المنتج** إلى *منتج*، وتعيين **مجموعه نماذج صنف، المنتج المخزن** علي *خطأ*، يتم تعيين **نوع منتج Field Service** علي *غير مخزون*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-177">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *False*, **Field Service Product Type** is set to *Non-Inventory*.</span></span>
- <span data-ttu-id="b7fb9-178">إذا تم تعيين **نوع المنتج** على *الخدمة*، فيتم تعيين **نوع منتج Field Service** علي *الخدمة*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-178">If **Product Type** is set to *Service*, **Field Service Product Type** is set to *Service*.</span></span>

<span data-ttu-id="b7fb9-179">بالاضافه إلى ذلك، يتضمن Dataverse المنطق الذي يقوم بتعيين الموردين مع الحسابات المرتبطة بهم.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-179">In addition, Dataverse includes logic that maps vendors with their related accounts.</span></span> <span data-ttu-id="b7fb9-180">يقوم هذا المنطق بتعيين حساب مورد الفاتورة الافتراضي.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-180">This logic sets the default invoice vendor account.</span></span> <span data-ttu-id="b7fb9-181">عند الإنشاء ، يقوم منطق المكون الإضافي من جانب الخادم بتعيين حساب مورد الفاتورة الافتراضي من المورد المرتبط بالحساب.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-181">On create, server-side plug-in logic sets the default invoice vendor account from the vendor that is related to the account.</span></span> <span data-ttu-id="b7fb9-182">يكون للمورد مرجع لحساب الفاتورة المستخدم لتعيين هذه القيمة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-182">The vendor has a reference to the invoice account that is used to set this value.</span></span>

## <a name="supported-scenarios"></a><span data-ttu-id="b7fb9-183">السيناريوهات المدعومة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-183">Supported scenarios</span></span>

- <span data-ttu-id="b7fb9-184">يمكن إنشاء أوامر الشراء وتحديثها بواسطة Dataverse المستخدمين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-184">Purchase orders can be created and updated by Dataverse users.</span></span> <span data-ttu-id="b7fb9-185">ومع ذلك، يتم التحكم في العملية والبيانات بواسطة Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-185">However, the process and data are controlled by Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-186">يتم تطبيق قيود علي تحديثات أعمده أمر الشراء في Supply Chain Management عندما تاتي التحديثات من Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-186">The constraints on updates to purchase order columns in Supply Chain Management apply when updates come from Field Service.</span></span> <span data-ttu-id="b7fb9-187">علي سبيل المثال، لا يمكنك تحديث أمر شراء إذا كان قد تم إنهاؤه.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-187">For example, you can't update a purchase order if it has been finalized.</span></span> 
- <span data-ttu-id="b7fb9-188">إذا تم التحكم في أمر الشراء بواسطة أداره التغيير في Supply Chain Management، فيمكن لمستخدم Field Service تحديث أمر الشراء فقط عندما تكون حاله موافقه Supply Chain Management هي *مسودة*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-188">If the purchase order is controlled by change management in Supply Chain Management, a Field Service user can update the purchase order only when the Supply Chain Management approval status is *Draft*.</span></span>
- <span data-ttu-id="b7fb9-189">تتم أداره العديد من الاعمده فقط بواسطة Supply Chain Management ولا يمكن تحديثها في Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-189">Several columns are managed only by Supply Chain Management and can't be updated in Field Service.</span></span> <span data-ttu-id="b7fb9-190">لمعرفه الاعمده التي لا يمكن تحديثها ، راجع جداول التعيين في المنتج.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-190">To learn which columns can't be updated, review the mapping tables in the product.</span></span> <span data-ttu-id="b7fb9-191">لأغراض البساطة، يتم تعيين معظم هذه الاعمده للقراءة فقط علي صفحات Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-191">For the sake of simplicity, most of these columns are set to read-only on Dataverse pages.</span></span> 

    <span data-ttu-id="b7fb9-192">علي سبيل المثال، تتم أداره أعمده معلومات السعر بواسطة Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-192">For example, the columns for price information are managed by Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-193">تشتمل Supply Chain Management علي اتفاقيات تجاره يمكن ان تستفيد منها Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-193">Supply Chain Management has trade agreements that Field Service can benefit from.</span></span> <span data-ttu-id="b7fb9-194">تاتي الاعمده مثل **سعر الوحدة** و **الخصم** و **المبلغ الصافي** من Supply Chain Management فقط.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-194">columns such as **Unit price**, **Discount**, and **Net amount** come only from Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-195">للتاكد من مزامنة السعر مع Field Service، يجب استخدام ميزه **المزامنة** في صفحات **أمر الشراء** و **المنتجات الخاصة بامر الشراء** في Dataverse عند إدخال بيانات أمر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-195">To ensure that the price is synced to Field Service, you should use the **Sync** feature on the **Purchase Order** and **Purchase Order Product** pages in Dataverse when purchase order data has been entered.</span></span> <span data-ttu-id="b7fb9-196">لمزيد من المعلومات، راجع [المزامنة مع بيانات التدبير عند الطلب Dynamics 365 Supply Chain Management](#sync-procurement).</span><span class="sxs-lookup"><span data-stu-id="b7fb9-196">For more information, see [Sync with the Dynamics 365 Supply Chain Management procurement data on demand](#sync-procurement).</span></span>

- <span data-ttu-id="b7fb9-197">لا يتوفر عمود **الإجماليات** الا في Field Service، نظرا لعدم وجود إجماليات محدثه لأمر الشراء في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-197">The **Totals** column is available only in Field Service, because there are no up-to-date totals of the purchase order in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-198">يتم حساب الإجماليات في Supply Chain Management استنادا إلى معلمات متعددة غير متوفرة في Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-198">The totals in Supply Chain Management are calculated based on multiple parameters that aren't available in Field Service.</span></span>
- <span data-ttu-id="b7fb9-199">بنود أمر الشراء التي يتم فيها تحديد فئة تدبير فقط، أو حيث يكون المنتج الذي تم تحديده هو أحد أصناف نوع منتج *الخدمة* أو نوع منتج Field Service، يمكن البدء فقط في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-199">Purchase order lines where only a procurement category is specified, or where the product that is specified is an item of the *Service* product type or Field Service product type, can be initiated only in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-200">ثم تتم مزامنة البنود مع Dataverse وتكون مرئية في Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-200">The lines are then synced to Dataverse and are visible in Field Service.</span></span>
- <span data-ttu-id="b7fb9-201">إذا تم تثبيت Field Service فقط، وليست Supply Chain Management، فان عمود **المستودع** يكون إلزاميا في أمر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-201">If only Field Service is installed, not Supply Chain Management, the **Warehouse** column is mandatory on the purchase order.</span></span> <span data-ttu-id="b7fb9-202">ومع ذلك ، في حاله تثبيت Supply Chain Management، يتم إيقاف هذا المتطلب، وذلك لان Supply Chain Management تسمح ببنود أمر الشراء حيث لم يتم تحديد اي مستودع في مواقف معينه.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-202">However, if Supply Chain Management is installed, this requirement is relaxed, because Supply Chain Management allows for purchase order lines where no warehouse is specified in certain situations.</span></span>
- <span data-ttu-id="b7fb9-203">تتم أداره إيصالات استلام المنتجات (عمليات استلام طلبات شراء الشراء Dataverse) من قبل Supply Chain Management ولا يمكن إنشاؤها من Dataverse حاله تثبيت Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-203">Product receipts (purchase order receipts in Dataverse) are managed by Supply Chain Management and can't be created from Dataverse if Supply Chain Management is installed.</span></span> <span data-ttu-id="b7fb9-204">تتم مزامنة إيصالات استلام المنتجات من Supply Chain Management من Supply Chain Management إلى Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-204">The product receipts from Supply Chain Management are synced from Supply Chain Management to Dataverse.</span></span>
- <span data-ttu-id="b7fb9-205">يتم السماح بالتسليم بالنقص في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-205">Under-delivery is allowed in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-206">يضيف الحل OneFSSCM المنطق بحيث يتم إنشاء أو تحديث بند إيصال استلام المنتجات (أو منتج استلام أمر شراء في Dataverse)، ويتم إنشاء صف دفتر يوميه المخزون في Dataverse لتعديل الكمية المتبقية التي يتم ترتيبها في سيناريوهات التسليم.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-206">The OneFSSCM solution adds logic so that, when the product receipt line (or purchase order receipt product in Dataverse) is created or updated, an inventory journal row is created in Dataverse to adjust the remaining quantity that is on order for under-delivery scenarios.</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="b7fb9-207">السيناريوهات غير المدعومة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-207">Unsupported scenarios</span></span>

- <span data-ttu-id="b7fb9-208">تمنع Field Service أضافه البنود إلى أمر شراء ملغي في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-208">Field Service prevents lines from being added to a canceled purchase order in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-209">وكحل بديل، يمكنك تغيير حاله النظام الخاصة بامر الشراء في Field Service، ثم أضافه البند الجديد في اما Field Service أو Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-209">As a workaround, you can change the system status of the purchase order in Field Service, and then add the new line in either Field Service or Supply Chain Management.</span></span>
- <span data-ttu-id="b7fb9-210">علي الرغم من ان صفوف التدبير تؤثر علي مستويات المخزون في كلا النظامين، فان هذا التكامل لا يضمن محاذاة المخزون عبر Supply Chain Management وField Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-210">Although procurement rows affect inventory levels in both systems, this integration doesn't ensure inventory alignment across Supply Chain Management and Field Service.</span></span> <span data-ttu-id="b7fb9-211">تشتمل كلا من Field Service وSupply Chain Management علي عمليات أخرى تقوم بتحديث مستويات المخزون.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-211">Both Field Service and Supply Chain Management have other processes that update inventory levels.</span></span> <span data-ttu-id="b7fb9-212">وتكون هذه العمليات خارج نطاق التدبير.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-212">Those processes are outside the scope of procurement.</span></span>

## <a name="status-management"></a><span data-ttu-id="b7fb9-213">أداره الحالة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-213">Status management</span></span>

<span data-ttu-id="b7fb9-214">تختلف حالات أوامر الشراء في Field Service عن الحالات الخاصة بـ Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-214">The statuses of purchase orders in Field Service differ from the statuses in Supply Chain Management.</span></span>

### <a name="field-service-purchase-order-and-purchase-order-product-statuses"></a><span data-ttu-id="b7fb9-215">حالات منتجات أمر الشراء وأمر الشراء لـ Field Service</span><span class="sxs-lookup"><span data-stu-id="b7fb9-215">Field Service purchase order and purchase order product statuses</span></span>

| <span data-ttu-id="b7fb9-216">الراس – حاله النظام</span><span class="sxs-lookup"><span data-stu-id="b7fb9-216">Header – System status</span></span> | <span data-ttu-id="b7fb9-217">الرأس - حالة الموافقة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-217">Header - Approval status</span></span> | <span data-ttu-id="b7fb9-218">حالة الصنف</span><span class="sxs-lookup"><span data-stu-id="b7fb9-218">Item status</span></span> |
|---|---|---|
| <ul><li><span data-ttu-id="b7fb9-219">مبدئي‬</span><span class="sxs-lookup"><span data-stu-id="b7fb9-219">Draft</span></span></li><li><span data-ttu-id="b7fb9-220">‏‫مُرسل</span><span class="sxs-lookup"><span data-stu-id="b7fb9-220">Submitted</span></span></li><li><span data-ttu-id="b7fb9-221">مُلغاة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-221">Cancelled</span></span></li><li><span data-ttu-id="b7fb9-222">تم استلام المنتج</span><span class="sxs-lookup"><span data-stu-id="b7fb9-222">Product received</span></span></li><li><span data-ttu-id="b7fb9-223">تمت فوترته</span><span class="sxs-lookup"><span data-stu-id="b7fb9-223">Billed</span></span></li></ul> | <ul><li><span data-ttu-id="b7fb9-224">قيمة خالية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-224">Null</span></span></li><li><span data-ttu-id="b7fb9-225">تمت الموافقة عليها</span><span class="sxs-lookup"><span data-stu-id="b7fb9-225">Approved</span></span></li><li><span data-ttu-id="b7fb9-226">مرفوض</span><span class="sxs-lookup"><span data-stu-id="b7fb9-226">Rejected</span></span></li></ul> | <ul><li><span data-ttu-id="b7fb9-227">معلّق</span><span class="sxs-lookup"><span data-stu-id="b7fb9-227">Pending</span></span></li><li><span data-ttu-id="b7fb9-228">تم الاستلام</span><span class="sxs-lookup"><span data-stu-id="b7fb9-228">Received</span></span></li><li><span data-ttu-id="b7fb9-229">مُلغاة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-229">Cancelled</span></span></li></ul> |

### <a name="supply-chain-management-purchase-order-and-purchase-order-line-statuses"></a><span data-ttu-id="b7fb9-230">Supply Chain Management أوامر الشراء وحالات سطر أمر الشراء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-230">Supply Chain Management purchase order and purchase order line statuses</span></span>

<span data-ttu-id="b7fb9-231">تكون حالات اعتماد البنود نشطه فقط عندما يكون هناك سير عمل بند.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-231">Line approval statuses are active only when there is a line workflow.</span></span>

| <span data-ttu-id="b7fb9-232">الراس – حاله المستندات</span><span class="sxs-lookup"><span data-stu-id="b7fb9-232">Header – documents status</span></span> | <span data-ttu-id="b7fb9-233">الرأس - حالة الموافقة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-233">Header - Approval status</span></span> | <span data-ttu-id="b7fb9-234">حالة السطر</span><span class="sxs-lookup"><span data-stu-id="b7fb9-234">Line status</span></span> | <span data-ttu-id="b7fb9-235">حالة موافقة البند</span><span class="sxs-lookup"><span data-stu-id="b7fb9-235">Line approval status</span></span> |
|---|---|---|---|
| <ul><li><span data-ttu-id="b7fb9-236">أمر مفتوح (أمر متاخر)</span><span class="sxs-lookup"><span data-stu-id="b7fb9-236">Open Order (Back order)</span></span></li><li><span data-ttu-id="b7fb9-237">تم الاستلام</span><span class="sxs-lookup"><span data-stu-id="b7fb9-237">Received</span></span></li><li><span data-ttu-id="b7fb9-238">مفوتر</span><span class="sxs-lookup"><span data-stu-id="b7fb9-238">Invoiced</span></span></li><li><span data-ttu-id="b7fb9-239">مُلغاة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-239">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="b7fb9-240">مبدئي‬</span><span class="sxs-lookup"><span data-stu-id="b7fb9-240">Draft</span></span></li><li><span data-ttu-id="b7fb9-241">قيد المراجعة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-241">In Review</span></span></li><li><span data-ttu-id="b7fb9-242">تمت الموافقة عليها</span><span class="sxs-lookup"><span data-stu-id="b7fb9-242">Approved</span></span></li><li><span data-ttu-id="b7fb9-243">مرفوض</span><span class="sxs-lookup"><span data-stu-id="b7fb9-243">Rejected</span></span></li><li><span data-ttu-id="b7fb9-244">في مراجعة خارجية</span><span class="sxs-lookup"><span data-stu-id="b7fb9-244">In External Review</span></span></li><li><span data-ttu-id="b7fb9-245">تاريخ التأكيد</span><span class="sxs-lookup"><span data-stu-id="b7fb9-245">Confirmed</span></span></li><li><span data-ttu-id="b7fb9-246">تم الانتهاء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-246">Finalized</span></span></li></ul> | <ul><li><span data-ttu-id="b7fb9-247">أمر مفتوح (أمر متاخر)</span><span class="sxs-lookup"><span data-stu-id="b7fb9-247">Open Order (back order)</span></span></li><li><span data-ttu-id="b7fb9-248">تم الاستلام</span><span class="sxs-lookup"><span data-stu-id="b7fb9-248">Received</span></span></li><li><span data-ttu-id="b7fb9-249">مفوتر</span><span class="sxs-lookup"><span data-stu-id="b7fb9-249">Invoiced</span></span></li><li><span data-ttu-id="b7fb9-250">مُلغاة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-250">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="b7fb9-251">غير مرسل</span><span class="sxs-lookup"><span data-stu-id="b7fb9-251">Not Submitted</span></span></li><li><span data-ttu-id="b7fb9-252">قيد المراجعة</span><span class="sxs-lookup"><span data-stu-id="b7fb9-252">In Review</span></span></li><li><span data-ttu-id="b7fb9-253">تمت الموافقة عليها</span><span class="sxs-lookup"><span data-stu-id="b7fb9-253">Approved</span></span></li><li><span data-ttu-id="b7fb9-254">مرفوض</span><span class="sxs-lookup"><span data-stu-id="b7fb9-254">Rejected</span></span></li></ul> |

<span data-ttu-id="b7fb9-255">يتم تطبيق القواعد التالية علي أعمده الحالة:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-255">The following rules are applied to the status columns:</span></span>

- <span data-ttu-id="b7fb9-256">لا يمكن تحديث الحالة في Supply Chain Management من Field Service.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-256">The status in Supply Chain Management can't be updated from Field Service.</span></span> <span data-ttu-id="b7fb9-257">ومع ذلك، في بعض الحالات، سيتم تحديث الحالة في Field Service عند تغيير حاله أمر الشراء في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-257">However, in some cases, the status in Field Service will be updated when the purchase order status in Supply Chain Management is changed.</span></span>
- <span data-ttu-id="b7fb9-258">إذا كان أمر الشراء في Supply Chain Management ضمن أداره التغييرات، وكان هناك تغيير تتم معالجته، تكون حاله الاعتماد هي *مسودة* أو *قيد المراجعة*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-258">If a purchase order in Supply Chain Management is under change management, and a change is being processed, the approval status is *Draft* or *In Review*.</span></span> <span data-ttu-id="b7fb9-259">في هذه الحالة، سيتم تعيين حاله الموافقة الخاصة بـ Field Service إلى *قيمه خاليه*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-259">In this case, the Field Service approval status will be set to *Null*.</span></span>
- <span data-ttu-id="b7fb9-260">في حاله تعيين حاله الموافقة علي أمر الشراء في Supply Chain Management إلى *معتمد*، *في المراجعة الخارجية* أو *المؤكدة* أو *المنتهية*، سيتم تعيين حاله الموافقة علي أمر شراء Field Service إلى *معتمد*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-260">If the purchase order approval status in Supply Chain Management is set to *Approved*, *In External review*, *Confirmed*, or *Finalized*, the Field Service purchase order approval status will be set to *Approved*.</span></span>
- <span data-ttu-id="b7fb9-261">في حاله تعيين حاله الموافقة علي أمر الشراء في Supply Chain Management إلى *مرفوض*، سيتم تعيين حاله الموافقة علي أمر شراء Field Service إلى *مرفوض*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-261">If the purchase order approval status in Supply Chain Management is set to *Rejected*, the Field Service purchase order approval status will be set to *Rejected*.</span></span>
- <span data-ttu-id="b7fb9-262">إذا تم تغيير حاله راس المستند في Supply Chain Management إلى *أمر مفتوح (أمر متاخر)*، وكانت حاله أمر الشراء لـ Field Service هي *مسودة* أو *ملغي*، سيتم تغيير حاله أمر الشراء الخاص بـ Field Service إلى تم *الإرسال*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-262">If the document header status in Supply Chain Management is changed to *Open order (Back order)*, and the Field Service purchase order status is *Draft* or *Cancelled*, the Field Service purchase order status will be changed to *Submitted*.</span></span>
- <span data-ttu-id="b7fb9-263">إذا تم تغيير حاله راس المستند في Supply Chain Management إلى تم *إلغاء*، وكانت إيه منتجات إيصال أمر شراء في Field Service مرتبطة بامر الشراء (بالاضافه إلى منتجات أوامر الشراء)، يتم تعيين حاله نظام Field Service علي *ملغي*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-263">If the document header status in Supply Chain Management is changed to *Cancelled*, and no purchase order receipt products in Field Service are associated with the purchase order (via purchase order products), the Field Service system status is set to *Cancelled*.</span></span>
- <span data-ttu-id="b7fb9-264">إذا تم إلغاء حاله سطر أمر الشراء في *Supply Chain Management*، يتم تعيين حاله منتج أمر الشراء في Field Service علي القيمة *الملغية*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-264">If purchase order line status in Supply Chain Management is *Cancelled*, the purchase order product status in Field Service is set to *Cancelled*.</span></span> <span data-ttu-id="b7fb9-265">بالاضافه إلى ذلك ، إذا تم تغيير حاله سطر أمر الشراء في Supply Chain Management من *ملغى* إلى *الأمر المتأخر*، يتم تعيين حاله صنف منتج أمر الشراء في Field Service علي *معلق*.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-265">In addition, if the purchase order line status in Supply Chain Management is changed from *Cancelled* to *Back Order*, the purchase order product item status in Field Service is set to *Pending*.</span></span>

## <a name="sync-with-the-supply-chain-management-procurement-data-on-demand"></a><a id="sync-procurement"></a><span data-ttu-id="b7fb9-266">مزامنة بيانات التدبير لـ Supply Chain Management حسب الطلب</span><span class="sxs-lookup"><span data-stu-id="b7fb9-266">Sync with the Supply Chain Management procurement data on demand</span></span>

<span data-ttu-id="b7fb9-267">تشتمل Supply Chain Management علي بيانات التدبير التي تعالج الاتفاقيات التجارية والخصومات والسيناريوهات الأخرى التي تعتمد علي العمليات الثانوية في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-267">Supply Chain Management includes procurement data that handles trade agreements, discounts, and other scenarios that rely on secondary processes in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-268">يستخدم محرك التدبير قواعد معقدة لتحديد أفضل سعر لأمر شراء معين.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-268">The procurement engine uses complex rules to determine the best price for a given purchase order.</span></span> <span data-ttu-id="b7fb9-269">عند استخدام الكتابة الثنائية، لا يتم دائما الاحتفاظ بالبيانات متزامنة خلال البيئتين ، وخاصه في السيناريوهات التي تم فيها إنشاء الصف أو Dataverse تحديثه من ويمكنه تشغيل عمليات التتبع في Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="b7fb9-269">When you use dual-write, data isn't always kept synchronous across the two environments, especially in scenarios where the row was created or updated from Dataverse and might trigger follow-on processes in Supply Chain Management.</span></span>

## <a name="sync-the-procurement-data-from-supply-chain-management"></a><span data-ttu-id="b7fb9-270">مزامنة بيانات التدبير من Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="b7fb9-270">Sync the procurement data from Supply Chain Management</span></span>

1. <span data-ttu-id="b7fb9-271">في Dataverse، انتقل إلى **المخزون \> أمر الشراء**.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-271">In Dataverse, go to **Inventory \> Purchase Order**.</span></span>
2. <span data-ttu-id="b7fb9-272">حدد **جديد** لإنشاء أمر شراء جديد، أو حدد صفًا لأمر شراء موجود.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-272">Select **New** to create a new purchase order, or select the row for an existing purchase order.</span></span>
3. <span data-ttu-id="b7fb9-273">من أمر الشراء أو بند أمر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-273">From the purchase order or purchase order line.</span></span>
4. <span data-ttu-id="b7fb9-274">في جزء الإجراءات، حدد **مزامنة**.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-274">On the Action Pane, select **Sync**.</span></span>

<span data-ttu-id="b7fb9-275">تتم مزامنة كافة الاعمده من Dataverse وField Service التي تتم مشاركتها من خلال Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-275">All columns from Dataverse and Field Service that are shared by Supply Chain Management are synced.</span></span>

<span data-ttu-id="b7fb9-276">فيما يلي المواقف التي قد تستخدم فيها وظيفة **المزامنة**:</span><span class="sxs-lookup"><span data-stu-id="b7fb9-276">Here are the situations where you might use the **Sync** function:</span></span>

- <span data-ttu-id="b7fb9-277">إذا قمت باجراء عده تغييرات متتابعة في نفس الصف من Dataverse، قم بتشغيل وظيفة **المزامنة**.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-277">If you make multiple successive changes to the same row from Dataverse, run the **Sync** function.</span></span>
- <span data-ttu-id="b7fb9-278">إذا لم تكن متاكدا مما إذا كان التغيير قد يكون هو التغيير المتتالي الثاني من Dataverse، فقد يكون من المنطقي تشغيل وظيفة **المزامنة**.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-278">If you aren't sure whether a change might be the second successive change from Dataverse, it might make sense to run the **Sync** function.</span></span>
- <span data-ttu-id="b7fb9-279">في حاله ظهور رسالة خطا حول تحديث قيمه من Supply Chain Management، قم بتشغيل وظيفة **المزامنة**، ثم أعد محاولة اجراء التحديث في Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-279">If you receive an error message about updating a value from Supply Chain Management, run the **Sync** function, and then retry the update in Dataverse.</span></span>

## <a name="cancelling-the-posting-process"></a><span data-ttu-id="b7fb9-280">إلغاء عمليه الترحيل</span><span class="sxs-lookup"><span data-stu-id="b7fb9-280">Cancelling the posting process</span></span>

<span data-ttu-id="b7fb9-281">في حاله إلغاء عمليه ترحيل إيصال استلام المنتجات اثناء المعالجة، فقد يؤدي الكتابة المزدوجة إلى إنشاء صف إيصال استلام المنتجات في  Dataverse، ولكن لا يتم إنشاء صف إيصال استلام المنتجات في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-281">If the product receipt posting process is cancelled during processing, then dual-write might create a product receipt row in Dataverse, but not create a product receipt row in Supply Chain Management.</span></span> <span data-ttu-id="b7fb9-282">يحدث هذا الموقف نظرا لان الكتابة الثنائية لا تدعم المعاملات الموزعة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-282">This situation happens because dual-write does not support distributed transactions.</span></span>

## <a name="templates"></a><span data-ttu-id="b7fb9-283">القوالب</span><span class="sxs-lookup"><span data-stu-id="b7fb9-283">Templates</span></span>

<span data-ttu-id="b7fb9-284">تتوفر القوالب التالية لتكامل المستندات ذات الصلة بالتدبير.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-284">The following templates are available for the integration of procurement-related documents.</span></span>

| <span data-ttu-id="b7fb9-285">Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="b7fb9-285">Supply Chain Management</span></span> | <span data-ttu-id="b7fb9-286">Field Service</span><span class="sxs-lookup"><span data-stu-id="b7fb9-286">Field Service</span></span> | <span data-ttu-id="b7fb9-287">الوصف</span><span class="sxs-lookup"><span data-stu-id="b7fb9-287">Description</span></span> |
|---|---|---|
| <span data-ttu-id="b7fb9-288">رأس أمر الشراء الإصدار 2</span><span class="sxs-lookup"><span data-stu-id="b7fb9-288">Purchase order header V2</span></span> | <span data-ttu-id="b7fb9-289">msdyn\_Purchaseorders</span><span class="sxs-lookup"><span data-stu-id="b7fb9-289">msdyn\_Purchaseorders</span></span> | <span data-ttu-id="b7fb9-290">يحتوي هذا الجدول علي الاعمده التي تمثل البيانات الرئيسية لأمر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-290">This table contains the columns that represent the purchase order header.</span></span> |
| <span data-ttu-id="b7fb9-291">كيان بند أمر شراء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-291">Purchase order line entity</span></span> | <span data-ttu-id="b7fb9-292">msdyn\_PurchaseOrderProducts</span><span class="sxs-lookup"><span data-stu-id="b7fb9-292">msdyn\_PurchaseOrderProducts</span></span> | <span data-ttu-id="b7fb9-293">يحتوي هذا الجدول علي الصفوف التي تمثل سطور أمر الشراء.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-293">This table contains the rows that represent lines on a purchase order.</span></span> <span data-ttu-id="b7fb9-294">يتم استخدام رقم المنتج للمزامنة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-294">The product number is used for synchronization.</span></span> <span data-ttu-id="b7fb9-295">وهذا يعرف المنتج علي انه وحده احتفاظ بالمخزون (SKU) ، بما في ذلك ابعاد المنتج.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-295">This identifies the product as a stock keeping unit (SKU), including product dimensions.</span></span> <span data-ttu-id="b7fb9-296">لمزيد من المعلومات حول تكامل المنتج مع Dataverse، راجع [تجربه المنتج الموحدة](product-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="b7fb9-296">For more information about product integration with Dataverse, see [Unified product experience](product-mapping.md).</span></span> |
| <span data-ttu-id="b7fb9-297">رأس إيصال استلام المنتج</span><span class="sxs-lookup"><span data-stu-id="b7fb9-297">Product receipt header</span></span> | <span data-ttu-id="b7fb9-298">msdyn\_purchaseorderreceipts</span><span class="sxs-lookup"><span data-stu-id="b7fb9-298">msdyn\_purchaseorderreceipts</span></span> | <span data-ttu-id="b7fb9-299">يحتوي هذا الجدول علي رؤوس إيصال استلام المنتجات التي يتم إنشاؤها عند ترحيل إيصال استلام المنتجات في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-299">This table contains the product receipt headers that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| <span data-ttu-id="b7fb9-300">سطر إيصال استلام المنتج</span><span class="sxs-lookup"><span data-stu-id="b7fb9-300">Product receipt line</span></span> | <span data-ttu-id="b7fb9-301">msdyn\_purchaseorderreceiptproducts</span><span class="sxs-lookup"><span data-stu-id="b7fb9-301">msdyn\_purchaseorderreceiptproducts</span></span> | <span data-ttu-id="b7fb9-302">يحتوي هذا الجدول علي سطور إيصال استلام المنتجات التي يتم إنشاؤها عند ترحيل إيصال استلام المنتجات في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-302">This table contains the product receipt lines that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| <span data-ttu-id="b7fb9-303">الكيان المحذوف المبدئي لبند أمر الشراء</span><span class="sxs-lookup"><span data-stu-id="b7fb9-303">Purchase order line soft deleted entity</span></span> | <span data-ttu-id="b7fb9-304">msdyn\_purchaseorderproducts</span><span class="sxs-lookup"><span data-stu-id="b7fb9-304">msdyn\_purchaseorderproducts</span></span> | <span data-ttu-id="b7fb9-305">يحتوي هذا الجدول علي معلومات حول بنود أمر الشراء التي تم حذفها بالحالات المبدئية.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-305">This table contains information about purchase order lines that are soft-deleted.</span></span> <span data-ttu-id="b7fb9-306">يمكن حذف بند أمر شراء في Supply Chain Management فقط عند تاكيد أمر الشراء أو اعتماده ، في حاله تشغيل أداره التغييرات.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-306">A purchase order line in Supply Chain Management can be soft-deleted only when the purchase order has been confirmed or approved, if change management is turned on.</span></span> <span data-ttu-id="b7fb9-307">الصف موجود في قاعده بيانات Supply Chain Management وتم وضع علامة عليه علي انه **IsDeleted**.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-307">The row exists in the Supply Chain Management database and is marked as **IsDeleted**.</span></span> <span data-ttu-id="b7fb9-308">وبسبب Dataverse عدم وجود مفهوم للحذف السهل، فمن المهم ان تتم مزامنة هذه المعلومات مع Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-308">Because Dataverse doesn't have a concept of soft-deletion, it's important that this information be synced to Dataverse.</span></span> <span data-ttu-id="b7fb9-309">وبهذه الطريقة، يمكن حذف البنود التي تم حذفها بشكل تلقائي في Supply Chain Management من Dataverse.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-309">In this way, lines that are soft-deleted in Supply Chain Management can automatically be deleted from Dataverse.</span></span> <span data-ttu-id="b7fb9-310">في هذه الحالة، يتم وضع المنطق الخاص بحذف أحد البنود في Dataverse في Supply Chain Management الموسعة.</span><span class="sxs-lookup"><span data-stu-id="b7fb9-310">In this case, the logic for deleting a line in Dataverse is located in Supply Chain Management Extended.</span></span> |

[!include [banner](../../includes/dual-write-symbols.md)]

[!include [Currency](includes/productreceiptheader-msdyn-purchaseorderreceipts.md)]

[!include [Currency](includes/productreceiptline-msdyn-purchaseorderreceiptproducts.md)]

[!include [Currency](includes/purchaseorderheadersv2-msdyn-purchaseorders.md)]

[!include [Currency](includes/purchaseorderlinesoftdeletedtable-msdyn-purchaseorderproducts.md)]

[!include [Currency](includes/purchaseorderlinetable-msdyn-purchaseorderproducts.md)]


[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]