---
title: مصمم المعادلات في التقارير الإلكترونية
description: يوفر هذا الموضوع معلومات حول كيفية استخدام مصمم التركيبة في إعداد التقارير الإلكترونية (ER).
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 1384307182e44fe7771ad6244eca6784434827f1
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/09/2021
ms.locfileid: "5568741"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="81c42-103">مصمم المعادلات في التقارير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="81c42-104">يشرح هذا الموضوع كيفية استخدام مصمم المعادلة في التقارير الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="81c42-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="81c42-105">عندما تصمم تنسيقًا لمستند إلكتروني معين في التقارير الإلكترونية، يمكنك استخدام معادلات لتحويل البيانات لتلبية متطلبات تنفيذ وتنسيق هذا المستند.</span><span class="sxs-lookup"><span data-stu-id="81c42-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="81c42-106">هذه المعادلات تشبه المعادلات في Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="81c42-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="81c42-107">هناك أنواع مختلفة من الدالات المعتمدة في المعادلات: النص والتاريخ والوقت ومنطق الرياضيات والمعلومات ووظائف تحويل أنواع البيانات وغير ذلك أيضًا من الدالات الخاصة بمجال الأعمال.</span><span class="sxs-lookup"><span data-stu-id="81c42-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="81c42-108">نظرة عامة على مصمم المعادلة</span><span class="sxs-lookup"><span data-stu-id="81c42-108">Formula designer overview</span></span>

<span data-ttu-id="81c42-109">تدعم التقارير الإلكترونية مصمم المعادلة.</span><span class="sxs-lookup"><span data-stu-id="81c42-109">ER supports the formula designer.</span></span> <span data-ttu-id="81c42-110">لذلك، في وقت التصميم، يمكنك تكوين التعبيرات التي يمكن استخدامها للمهام التالية في وقت التشغيل:</span><span class="sxs-lookup"><span data-stu-id="81c42-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="81c42-111">تحويل البيانات التي يتم استلامها من قاعدة بيانات تطبيق والتي يجب إدخالها في نموذج بيانات تقارير إلكترونية تم تصميمه ليكون مصدر بيانات لتنسيقات التقارير الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="81c42-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="81c42-112">(على سبيل المثال، هذه التحويلات قد تتضمن تحويل نوع البيانات والتصفية والتجميع.)</span><span class="sxs-lookup"><span data-stu-id="81c42-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="81c42-113">بيانات التنسيق التي يجب إرسالها إلى مستند إلكتروني أصلي وفقًا لمخطط وشروط تنسيق تقارير إلكترونية محدد.</span><span class="sxs-lookup"><span data-stu-id="81c42-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="81c42-114">(على سبيل المثال، التنسيق الذي قد يتم وفقًا للغة أو الثقافة المطلوبة أو الترميز).</span><span class="sxs-lookup"><span data-stu-id="81c42-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="81c42-115">التحكم في عملية إنشاء المستندات الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="81c42-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="81c42-116">(على سبيل المثال، يمكن للتعبيرات تمكين أو تعطيل إخراج عناصر معينة للتنسيق، استنادًا إلى معالجة البيانات.</span><span class="sxs-lookup"><span data-stu-id="81c42-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="81c42-117">كما يمكنها إيقاف عملية إنشاء المستند أو طرح رسائل إلى المستخدمين.)</span><span class="sxs-lookup"><span data-stu-id="81c42-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="81c42-118">يمكنك فتح صفحة **مصمم المعادلة‬‏‫** عندما تنفذ أي إجراء من الإجراءات التالية:</span><span class="sxs-lookup"><span data-stu-id="81c42-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="81c42-119">ربط عناصر مصدر البيانات بمكونات نموذج البيانات.</span><span class="sxs-lookup"><span data-stu-id="81c42-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="81c42-120">ربط عناصر مصدر البيانات بمكونات التنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="81c42-121">إكمال صيانة الحقول المحتسبة كجزء من مصادر البيانات.</span><span class="sxs-lookup"><span data-stu-id="81c42-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="81c42-122">تعريف شروط إمكانية الرؤية‬ لمعلمات إدخال المستخدم‬.</span><span class="sxs-lookup"><span data-stu-id="81c42-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="81c42-123">تصميم عمليات تحويل التنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-123">Design a format's transformations.</span></span>
- <span data-ttu-id="81c42-124">تعريف شروط التمكين لمكونات التنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="81c42-125">تعريف أسماء الملفات لمكونات ملف التنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="81c42-126">تعريف الشروط لعمليات التحقق من مراقبة العملية.</span><span class="sxs-lookup"><span data-stu-id="81c42-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="81c42-127">تعريف الرسالة النصية لعمليات التحقق من مراقبة العملية.</span><span class="sxs-lookup"><span data-stu-id="81c42-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="81c42-128">ربط البيانات</span><span class="sxs-lookup"><span data-stu-id="81c42-128">Data binding</span></span>

<span data-ttu-id="81c42-129">يمكن استخدام مصمم معادلة التقارير الإلكترونية لتعريف تعبير يقوم بتحويل البيانات التي يتم تلقيها من مصادر البيانات، بحيث يمكن إدخال البيانات في مستهلك البيانات بالطرق التالية في وقت التشغيل:</span><span class="sxs-lookup"><span data-stu-id="81c42-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="81c42-130">من مصادر بيانات التطبيق ومعلمات وقت التشغيل إلى نموذج بيانات التقارير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="81c42-131">من نموذج بيانات التقارير الإلكترونية إلى تنسيق التقارير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="81c42-132">من مصادر بيانات التطبيق ومعلمات وقت التشغيل إلى تنسيق تقارير إلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="81c42-133">يبين الرسم التوضيحي التالي تصميم تعبير من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="81c42-134">في هذا المثال، يقوم التعبير بتقريب قيمة الحقل **Intrastat.AmountMST** في جدول نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي‬‏‫ إلى منزلتين عشريتين، ثم يقوم بإرجاع القيمة المقربة.</span><span class="sxs-lookup"><span data-stu-id="81c42-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="81c42-135">[![تعبير ربط البيانات](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="81c42-136">يبين الرسم التوضيحي التالي كيف يمكن استخدام تعبير من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="81c42-137">في هذا المثال، يتم إدخال نتيجة التعبير المُصمم في المكون **Transaction.InvoicedAmount** لنموذج بيانات **نموذج الإبلاغ الضريبي**.</span><span class="sxs-lookup"><span data-stu-id="81c42-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="81c42-138">[![تعبير ربط البيانات قيد الاستخدام](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="81c42-139">في وقت التشغيل، تُقرب الصيغة المٌصممة، `ROUND (Intrastat.AmountMST, 2)`، قيمة حقل **AmountMST** لكل سجل في جدول نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي إلى منزلتين عشريتين.</span><span class="sxs-lookup"><span data-stu-id="81c42-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="81c42-140">ثم تقوم بإدخال القيمة المقربة في مكون **Transaction.InvoicedAmount** لنموذج بيانات **تقارير الضرائب**.</span><span class="sxs-lookup"><span data-stu-id="81c42-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="81c42-141">تنسيق البيانات</span><span class="sxs-lookup"><span data-stu-id="81c42-141">Data formatting</span></span>

<span data-ttu-id="81c42-142">يمكن استخدام مصمم معادلة التقارير الإلكترونية لتعريف تعبير يقوم بتنسيق البيانات التي يتم تلقيها من مصادر البيانات، بحيث يمكن إرسال البيانات كجزء من المستند الإلكتروني الناشئ.</span><span class="sxs-lookup"><span data-stu-id="81c42-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="81c42-143">قد يكون لديك التنسيق الذي يجب تطبيقه كقاعدة نموذجية يجب إعادة استخدامها لتنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="81c42-144">في هذه الحالة، يمكنك تقديم هذا التنسيق مرة واحدة في تكوين التنسيق، كتحويل مسمى يحتوي على تعبير تنسيق.</span><span class="sxs-lookup"><span data-stu-id="81c42-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="81c42-145">عندئذٍ، يمكن ربط هذا التحويل المسمى بالعديد من مكونات التنسيق التي يجب تنسيق إخراجها وفقًا لتعبير التنسيق الذي أنشأته.</span><span class="sxs-lookup"><span data-stu-id="81c42-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="81c42-146">يبين الرسم التوضيحي التالي تصميم تحويل من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="81c42-147">في هذا المثال، يقتطع تحويل **TrimmedString** البيانات الواردة من نوع بيانات *السلسلة* عن طريق إزالة المسافات البادئة والزائدة.</span><span class="sxs-lookup"><span data-stu-id="81c42-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="81c42-148">تم تقوم بإرجاع قيمة السلسلة المقتطعة.</span><span class="sxs-lookup"><span data-stu-id="81c42-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="81c42-149">[![التحويل](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="81c42-150">يبين الرسم التوضيحي التالي كيف يمكن استخدام عملية تحويل من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="81c42-151">في هذا المثال، يقوم العديد من مكونات التنسيق بإرسال نص كإخراج إلى المستند الإلكتروني الناشئ في وقت التشغيل.</span><span class="sxs-lookup"><span data-stu-id="81c42-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="81c42-152">تشير جميع مكونات التنسيق هذه إلى تحويل **TrimmedString** حسب الاسم.</span><span class="sxs-lookup"><span data-stu-id="81c42-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="81c42-153">[![التحويل قيد الاستخدام](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="81c42-154">عندما تشير مكونات التنسيق، مثل مكون **partyName** في الرسم التوضيحي السابق، إلى تحويل **TrimmedString**، يرسل التحويل نصًا كإخراج إلى المستند الإلكتروني الناشئ.</span><span class="sxs-lookup"><span data-stu-id="81c42-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="81c42-155">لا يتضمن هذا النص مسافات بادئة وزائدة.</span><span class="sxs-lookup"><span data-stu-id="81c42-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="81c42-156">إذا كان لديك تنسيق يجب أن يُطبق بشكل فردي، فيمكنك إدخال ذلك التنسيق كتعبير فردي لربط خاص بمكون تنسيق محدد.</span><span class="sxs-lookup"><span data-stu-id="81c42-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="81c42-157">يبين الرسم التوضيحي التالي تعبيرًا من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="81c42-158">في هذا المثال، يرتبط مكون التنسيق **partyType** بمصدر البيانات عبر تعبير يقوم بتحويل البيانات الواردة من الحقل **Model.Company.RegistrationType** في مصدر البيانات إلى نص بأحرف كبيرة.</span><span class="sxs-lookup"><span data-stu-id="81c42-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="81c42-159">يرسل التعبير بعد ذلك هذا النص كإخراج إلى المستند الإلكتروني.</span><span class="sxs-lookup"><span data-stu-id="81c42-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="81c42-160">[![تطبيق التنسيق على مكون واحد](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="81c42-161">التحكم في تدفق العملية</span><span class="sxs-lookup"><span data-stu-id="81c42-161">Process flow control</span></span>

<span data-ttu-id="81c42-162">يمكن استخدام مصمم معادلة التقارير الإلكترونية‬ لتحديد التعبيرات التي تتحكم في تدفق العملية للمستندات الإلكترونية الناشئة.</span><span class="sxs-lookup"><span data-stu-id="81c42-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="81c42-163">يمكنك القيام بالمهام التالية:</span><span class="sxs-lookup"><span data-stu-id="81c42-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="81c42-164">تعريف الظروف التي تحدد متى يجب إيقاف عملية إنشاء المستند.</span><span class="sxs-lookup"><span data-stu-id="81c42-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="81c42-165">تحديد التعبيرات التي تنشئ رسائل للمستخدم فيما يتعلق بالعملية المتوقفة أو تطرح رسائل سجل تنفيذ فيما يتعلق بالعملية المستمرة لإنشاء التقارير.</span><span class="sxs-lookup"><span data-stu-id="81c42-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="81c42-166">تحديد أسماء ملفات للمستندات الإلكترونية الناشئة والتحكم في ظروف إنشائها.</span><span class="sxs-lookup"><span data-stu-id="81c42-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="81c42-167">يتم تصميم كل قاعدة للتحكم في تدفق العملية كعملية تحقق من الصحة واحدة.</span><span class="sxs-lookup"><span data-stu-id="81c42-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="81c42-168">يبين الرسم التوضيحي التالي عملية تحقق من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="81c42-169">فيما يلي شرح للتكوين في هذا المثال:</span><span class="sxs-lookup"><span data-stu-id="81c42-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="81c42-170">يتم تقييم عملية التحقق من الصحة عند إنشاء عقدة **INSTAT** أثناء إنشاء ملف XML.</span><span class="sxs-lookup"><span data-stu-id="81c42-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="81c42-171">إذا كانت قائمة الحركات فارغة، فستوقف عملية التحقق من الصحة العملية وترجع **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="81c42-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="81c42-172">ترجع عملية التحقق من الصحة رسالة خطأ تتضمن نص التسمية SYS70894 باللغة المفضلة للمستخدم.</span><span class="sxs-lookup"><span data-stu-id="81c42-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="81c42-173">[![التحقق من الصحة](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="81c42-174">يمكن أيضًا استخدام مصمم معادلة التقارير الإلكترونية لإنشاء اسم ملف للمستند الإلكتروني الناشئ وللتحكم في عملية إنشاء الملف.</span><span class="sxs-lookup"><span data-stu-id="81c42-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="81c42-175">يبين الرسم التوضيحي التالي تصميم التحكم بانسياب العملية‬ من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="81c42-176">فيما يلي شرح للتكوين في هذا المثال:</span><span class="sxs-lookup"><span data-stu-id="81c42-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="81c42-177">يتم تقسيم قائمة بسجلات من مصدر بيانات **model.Intrastat** إلى دُفعات.</span><span class="sxs-lookup"><span data-stu-id="81c42-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="81c42-178">تحتوي كل دُفعة على ما يصل إلى 1000 سجل.</span><span class="sxs-lookup"><span data-stu-id="81c42-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="81c42-179">ينشئ الإخراج ملف zip يحتوي على ملف واحد بتنسيق XML لكل دُفعة تم إنشاؤها.</span><span class="sxs-lookup"><span data-stu-id="81c42-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="81c42-180">يُرجع التعبير اسم ملف للمستندات الإلكترونية الناشئة عن طريق وصل اسم الملف وملحقه.</span><span class="sxs-lookup"><span data-stu-id="81c42-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="81c42-181">للدُفعة الثانية وكافة الدُفعات اللاحقة، يحتوي اسم الملف على معرف دُفعة كلاحقة.</span><span class="sxs-lookup"><span data-stu-id="81c42-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="81c42-182">يمكّن التعبير (من خلال إرجاع **TRUE**) عملية إنشاء ملف للدُفعات التي تحتوي على سجل واحد على الأقل.</span><span class="sxs-lookup"><span data-stu-id="81c42-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="81c42-183">[![التحكم في تدفق العملية](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="81c42-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="81c42-184">التحكم بمحتوى المستند</span><span class="sxs-lookup"><span data-stu-id="81c42-184">Document content control</span></span>

<span data-ttu-id="81c42-185">يمكن استخدام مصمم معادلة التقارير الإلكترونية لتكوين التعبيرات التي تتحكم في البيانات التي سيتم وضعها داخل المستندات الإلكترونية التي تم إنشاؤها في وقت التشغيل.</span><span class="sxs-lookup"><span data-stu-id="81c42-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="81c42-186">بإمكان هذه للتعبيرات تمكين أو تعطيل إخراج عناصر معينة للتنسيق، وهذا يتوقف على معالجة البيانات والمنطق المكوّن.</span><span class="sxs-lookup"><span data-stu-id="81c42-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="81c42-187">يمكن إدخال هذه التعبيرات لعنصر تنسيق واحد في الحقل **مُمكّن** على علامة تبويب **التعيين** في صفحة **مصمم العمليات**.</span><span class="sxs-lookup"><span data-stu-id="81c42-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="81c42-188">يُمكنك إدخال التعبيرات كشرط منطقي يقوم بإرجاع قيمة *منطقية*:</span><span class="sxs-lookup"><span data-stu-id="81c42-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="81c42-189">إذا قام الشرط بإرجاع القيمة **صحيح**، يتم تشغيل عنصر التنسيق الحالي.</span><span class="sxs-lookup"><span data-stu-id="81c42-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="81c42-190">إذا قام الشرط بإرجاع القيمة **خطأ**، يتم تخطي عنصر التنسيق الحالي.</span><span class="sxs-lookup"><span data-stu-id="81c42-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="81c42-191">يبين الرسم التوضيحي التالي تعبيرات من هذا النوع.</span><span class="sxs-lookup"><span data-stu-id="81c42-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="81c42-192">(يتم استخدام الإصدار 11.12.11 من تكوين تنسيق **تحويل ائتمان ISO20022 (النرويج)** الذي توفره Microsoft كمثال). يتم تكوين مكون تنسيق **XMLHeader** لوصف بنية رسالة تحويل الائتمان إلى معايير رسالة ISO 20022 XML.</span><span class="sxs-lookup"><span data-stu-id="81c42-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="81c42-193">تم تكوين مكون التنسيق **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** لإضافة عنصر XML **Ustrd** إلى الرسالة المنشأة ولوضع معلومات الحوالة في تنسيق غير منظم كنص لعناصر XML التالية:</span><span class="sxs-lookup"><span data-stu-id="81c42-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="81c42-194">يتم استخدام‏‎ المكون **PaymentNotes‎** لإنشاء نص ملاحظات الدفع.</span><span class="sxs-lookup"><span data-stu-id="81c42-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="81c42-195">يقوم المكون **DelimitedSequence‎** بإنشاء أرقام الفاتورة المفصولة بفواصل المستخدمة لتسويه التحويل الائتماني الحالي.</span><span class="sxs-lookup"><span data-stu-id="81c42-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="81c42-196">[![PaymentNotes و DelimitedSequence مكونات](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="81c42-197">تتم تسمية المكونين **PaymentNotes** و **DelimitedSequence** باستخدام علامة استفهام.</span><span class="sxs-lookup"><span data-stu-id="81c42-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="81c42-198">تشير علامة الاستفهام إلى أن استخدام أحد المكونات شرطي.</span><span class="sxs-lookup"><span data-stu-id="81c42-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="81c42-199">في هذه الحالة، يستند استخدام المكونات على المعايير التالية:</span><span class="sxs-lookup"><span data-stu-id="81c42-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="81c42-200">يُمكن تعبير `@.PaymentsNotes <> ""` المُعرف لمكون **PaymentNotes** (من خلال إرجاع **True**) تعبئة عنصر XML **Ustrd** بنص ملاحظات الدفع، عندما لا يكون هذا النص فارغًا للتحويل الائتماني الحالي.</span><span class="sxs-lookup"><span data-stu-id="81c42-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="81c42-201">[![تعبير لمكون PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="81c42-202">يُمكن التعبير `@.PaymentsNotes = ""` المُعرف لمكون **DelimitedSequence** (عن طريق إرجاع **TRUE**) تعبئة عنصر XML **Ustrd** بقائمة مفصولة بفاصلة من أرقام الفواتير المستخدمة لتسوية التحويل الائتماني الحالي، إذا كان نص ملاحظات الدفع لهذا التحويل الائتماني فارغًا.</span><span class="sxs-lookup"><span data-stu-id="81c42-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="81c42-203">[![تعبير لمكون DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="81c42-204">استنادًا إلى هذا الإعداد، ستتضمن الرسالة المنشأة لكل دفعة دائن، عنصر **Ustrd** XML، إما نص ملاحظات الدفع أو، عندما يكون هذا النص فارغًا، قائمة أرقام فواتير مفصولة بفاصلة يتم استخدامها لتسوية هذه الدفعة.</span><span class="sxs-lookup"><span data-stu-id="81c42-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="81c42-205">التحقق من صحة المعادلات المكونة</span><span class="sxs-lookup"><span data-stu-id="81c42-205">Validation of configured formulas</span></span>

<span data-ttu-id="81c42-206">في صفحة **مصمم التركيبة** ، حدد **اختبار** للتحقق من كيفية عمل التركيبة المُكونة.</span><span class="sxs-lookup"><span data-stu-id="81c42-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="81c42-207">[![تحديد اختبار للتحقق من صحة تركيبة](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="81c42-208">عندما تكون قيم وسيطات التركيبة مطلوبة، يُمكنك فتح مربع حوار **تعبير اختبار** من صفحة **مصمم التركيبة**.</span><span class="sxs-lookup"><span data-stu-id="81c42-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="81c42-209">في معظم الحالات، يجب تعريف هذه الوسيطات يدويًا، لأنه لا يتم تشغيل الروابط المُكونة في وقت التصميم.</span><span class="sxs-lookup"><span data-stu-id="81c42-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="81c42-210">تظهر علامة التبويب **نتيجة الاختبار** في صفحة **مصمم التركيبة** النتيجة من تنفيذ التركيبة المُكونة.</span><span class="sxs-lookup"><span data-stu-id="81c42-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="81c42-211">يوضح المثال التالي كيف يُمكنك اختبار التركيبة المكونة لمجال التجارة الخارجية للتأكد من احتواء ‏‫أكواد سلع نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي‬ على أرقام فقط.</span><span class="sxs-lookup"><span data-stu-id="81c42-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="81c42-212">عند اختبار هذه التركيبة، يُمكنك استخدام مربع الحوار **تعبير نص** لتحديد قيمة ‏‫رمز سلع نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي‬ للاختبار.</span><span class="sxs-lookup"><span data-stu-id="81c42-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="81c42-213">[![تحديد ‏‫أكواد سلع نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي‬ للاختبار](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="81c42-214">بعد تحديد ‏‫أكواد سلع نظام جمع المعلومات التجارية بين دول الاتحاد الأوروبي‬، ثم تحديد **موافق**، تُظهر علامة التبويب **نتيجة الاختبار** الموجودة في صفحة **مصمم التركيبة** نتيجة تنفيذ التركيبة المكونة.</span><span class="sxs-lookup"><span data-stu-id="81c42-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="81c42-215">يمكنك بعد ذلك تقييم ما إذا كانت النتيجة مقبولة أم لا.</span><span class="sxs-lookup"><span data-stu-id="81c42-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="81c42-216">إذا كانت النتيجة غير مقبولة، يُمكنك تحديث التركيبة واختبارها مرة أخرى.</span><span class="sxs-lookup"><span data-stu-id="81c42-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="81c42-217">[![نتيجة الاختبار](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="81c42-218">لا يُمكن اختبار بعض التركيبات في وقت التصميم.</span><span class="sxs-lookup"><span data-stu-id="81c42-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="81c42-219">على سبيل المثال، قد تُرجع تركيبة نتيجة نوع بيانات لا يُمكن إظهارها في علامة التبويب **نتيجة الاختبار**. في هذه الحالة، سوف تتلقي رسالة خطأ تنص على أنه لا يُمكن اختبار التركيبة.</span><span class="sxs-lookup"><span data-stu-id="81c42-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="81c42-220">[![رسالة الخطأ](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="81c42-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="81c42-221">الموارد الإضافية</span><span class="sxs-lookup"><span data-stu-id="81c42-221">Additional resources</span></span>

- [<span data-ttu-id="81c42-222">نظرة عامة حول التقارير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="81c42-223">لغة تركيبة التقارير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="81c42-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]