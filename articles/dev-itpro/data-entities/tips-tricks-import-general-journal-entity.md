---
title: "أفضل ممارسات استيراد الإيصالات‬ باستخدام كيان دفتر اليومية العام"
description: "يوفر هذا الموضوع تلميحات حول استيراد البيانات إلى دفتر اليومية العام باستخدام كيان دفتر اليومية العام."
author: twheeloc
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations
ms.custom: 94363
ms.assetid: 0b8149b5-32c5-4518-9ebd-09c9fd7f4cfc
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 7e0a5d044133b917a3eb9386773205218e5c1b40
ms.openlocfilehash: a45a75d23c77af86b55866f99a97343a210ec777
ms.contentlocale: ar-sa
ms.lasthandoff: 09/29/2017

---

# <a name="best-practices-for-importing-vouchers-using-the-general-journal-entity"></a><span data-ttu-id="1c090-103">أفضل ممارسات استيراد الإيصالات‬ باستخدام كيان دفتر اليومية العام</span><span class="sxs-lookup"><span data-stu-id="1c090-103">Best practices for importing vouchers using the General journal entity</span></span>

[!include[banner](../includes/banner.md)]


<span data-ttu-id="1c090-104">يوفر هذا الموضوع تلميحات حول استيراد البيانات إلى دفتر اليومية العام باستخدام كيان دفتر اليومية العام.</span><span class="sxs-lookup"><span data-stu-id="1c090-104">This topic provides tips for importing data into the General journal by using the General journal entity.</span></span>  

<span data-ttu-id="1c090-105">يمكنك استخدام كيان دفتر اليومية العام لاستيراد الإيصالات التي لها نوع الحساب أو نوع الحساب المقابل **دفتر الأستاذ، أو العميل، أو المورد، أو البنك**.</span><span class="sxs-lookup"><span data-stu-id="1c090-105">You can use the General journal entity to import vouchers that have an account or offset account type of **Ledger, Customer, Vendor, or Bank**.</span></span> <span data-ttu-id="1c090-106">يمكن إدخال الإيصال كبند واحد باستخدام كل من الحقل **الحساب** والحقل **الحساب المقابل**، أو كإيصال متعدد البنود، حيث لا يُستخدم إلا الحقل **الحساب** (ويُترك **الحساب المقابل** فارغاً في كل بند).</span><span class="sxs-lookup"><span data-stu-id="1c090-106">The voucher can be entered as one line, using both the **Account** field and the **Offset account** field, or as a multi-line voucher, where only the **Account** field is used (and the **Offset account** is left blank on each line).</span></span> <span data-ttu-id="1c090-107">لا يدعم كيان دفتر اليومية العام كل نوع حساب.</span><span class="sxs-lookup"><span data-stu-id="1c090-107">The General journal entity doesn't support every account type.</span></span> <span data-ttu-id="1c090-108">بدلاً من ذلك، توجد كيانات أخرى للسيناريوهات التي تتطلب مجموعات مختلفة من أنواع الحسابات.</span><span class="sxs-lookup"><span data-stu-id="1c090-108">Instead, other entities exist for scenarios where different combinations of account types are required.</span></span> <span data-ttu-id="1c090-109">على سبيل المثال، لاستيراد حركة مشروع، استخدم كيان دفتر اليومية مصروفات المشروع.</span><span class="sxs-lookup"><span data-stu-id="1c090-109">For example, to import a project transaction, use the Project expense journal entity.</span></span> <span data-ttu-id="1c090-110">تم تصميم كل كيان لدعم سيناريوهات محددة، مما يعني أنه قد تتوفر حقول إضافية في الكيانات لهذه السيناريوهات ولكن ليس في الكيانات لسيناريو مختلف.</span><span class="sxs-lookup"><span data-stu-id="1c090-110">Each entity is designed to support specific scenarios, which means additional fields may be available in entities for those scenarios but not in entities for a different scenario.</span></span>

## <a name="setup"></a><span data-ttu-id="1c090-111">الإعداد</span><span class="sxs-lookup"><span data-stu-id="1c090-111">Setup</span></span>
<span data-ttu-id="1c090-112">قبل إجراء عملية الاستيراد باستخدام كيان دفتر اليومية العام، تحقق من صحة الإعداد التالي:</span><span class="sxs-lookup"><span data-stu-id="1c090-112">Before you import by using the General journal entity, validate the following setup:</span></span>

-   <span data-ttu-id="1c090-113">**إعداد التسلسل الرقمي لرقم دُفعة دفتر اليومية** – بشكل افتراضي، عندما تجري عملية الاستيراد باستخدام كيان دفتر اليومية العام، يستخدم رقم دُفعة دفتر اليومية التسلسل الرقمي الذي تم تعريفه في محددات دفتر الأستاذ العام.</span><span class="sxs-lookup"><span data-stu-id="1c090-113">**Number sequence setup for the journal batch number** - By default, when you import by using the General journal entity, the journal batch number uses the number sequence that is defined in the General ledger parameters.</span></span> <span data-ttu-id="1c090-114">إذا قمت بتعيين التسلسل الرقمي لرقم دُفعة دفتر اليومية إلى **يدوي**، فلن يتم تطبيق رقم افتراضي.</span><span class="sxs-lookup"><span data-stu-id="1c090-114">If you set the number sequence for the journal batch number to **Manual**, a default number isn't applied.</span></span> <span data-ttu-id="1c090-115">هذا الإعداد غير معتمد.</span><span class="sxs-lookup"><span data-stu-id="1c090-115">This setup isn't supported.</span></span>
-   <span data-ttu-id="1c090-116">**تكوين الأبعاد المالية** - يجب على كل مؤسسة تحديد ترتيب الأبعاد المالية عند استخدام الكيانات لاستيراد الحركات.</span><span class="sxs-lookup"><span data-stu-id="1c090-116">**Financial dimension configuration** - Every organization must define the order of financial dimensions when entities are used to import transactions.</span></span> <span data-ttu-id="1c090-117">يتم تحديد الترتيب لتنسيق **تكامل أبعاد دفتر الأستاذ**، في **‎دفتر الأستاذ العام** &gt; **دليل الحسابات** &gt; **الأبعاد‏‎** &gt; **تكوين الأبعاد المالية لتكامل التطبيقات** &gt; **‎تحديد كيانات البيانات**.</span><span class="sxs-lookup"><span data-stu-id="1c090-117">The order is defined for the **Ledger dimensions integration** format, at **General ledger** &gt; **Chart of accounts** &gt; **Dimensions** &gt; **Financial dimension configuration for integrating applications** &gt; **Select data entities**.</span></span> <span data-ttu-id="1c090-118">يجب أن تكون أجزاء حساب دفتر الأستاذ الذي يتم استيراده بالترتيب نفسه.</span><span class="sxs-lookup"><span data-stu-id="1c090-118">The segments of the ledger account that is imported must have the same order.</span></span> <span data-ttu-id="1c090-119">وإلا، فسيحدث خطأ أثناء تنفيذ عملية الاستيراد.</span><span class="sxs-lookup"><span data-stu-id="1c090-119">Otherwise, an error will occur during import.</span></span>

## <a name="general-journal-entity-setup"></a><span data-ttu-id="1c090-120">إعداد كيان دفتر اليومية العام</span><span class="sxs-lookup"><span data-stu-id="1c090-120">General journal entity setup</span></span>
<span data-ttu-id="1c090-121">‏‫هناك إعدادان في إدارة البيانات يؤثران على كيفية تطبيق رقم دُفعة دفتر اليومية الافتراضي أو رقم الإيصال:</span><span class="sxs-lookup"><span data-stu-id="1c090-121">Two settings in Data management affect how the default journal batch number or voucher number is applied:</span></span>

-   <span data-ttu-id="1c090-122">**‬‏‫المعالجة المستندة إلى مجموعات** (في كيان البيانات)</span><span class="sxs-lookup"><span data-stu-id="1c090-122">**Set-based processing** (on the data entity)</span></span>
-   <span data-ttu-id="1c090-123">**‬‏‫مُنشأ تلقائيًا** (على تعيين الحقل)</span><span class="sxs-lookup"><span data-stu-id="1c090-123">**Auto-generated** (on the field mapping)</span></span>

<span data-ttu-id="1c090-124">تصف الأقسام التالية تأثير هذين الإعدادين، وتوضح أيضًا كيفية إنشاء أرقام دُفعات دفتر اليومية وأرقام الإيصالات.</span><span class="sxs-lookup"><span data-stu-id="1c090-124">The following sections describe the effect of these settings, and also explain how journal batch numbers and voucher numbers are generated.</span></span>

### <a name="journal-batch-number"></a><span data-ttu-id="1c090-125">رقم دُفعة دفتر اليومية</span><span class="sxs-lookup"><span data-stu-id="1c090-125">Journal batch number</span></span>

-   <span data-ttu-id="1c090-126">لا يؤثر الإعداد **المعالجة المستندة إلى مجموعات** في كيان دفتر اليومية العام على الطريقة التي يتم بها إنشاء أرقام دُفعات دفتر اليومية.</span><span class="sxs-lookup"><span data-stu-id="1c090-126">The **Set-based processing** setting on the General journal entity doesn't affect the way that journal batch numbers are generated.</span></span>
-   <span data-ttu-id="1c090-127">إذا تم تعيين حقل **رقم دُفعة دفتر اليومية** إلى **مُنشأ تلقائيًا**، فسيتم إنشاء رقم دُفعة دفتر يومية جديد لكل بند يتم استيراده.</span><span class="sxs-lookup"><span data-stu-id="1c090-127">If the **Journal batch number** field is set to **Auto-generated**, a new journal batch number is created for every line that is imported.</span></span> <span data-ttu-id="1c090-128">هذا السلوك هو غير مستحسن.</span><span class="sxs-lookup"><span data-stu-id="1c090-128">This behavior isn't recommended.</span></span> <span data-ttu-id="1c090-129">يتم العثور على الإعداد **مُنشأ تلقائيًا‬** في مشروع الاستيراد ضمن **عرض التعيين‬**، على علامة التبويب **تفاصيل‏‎ التعيين‬**.</span><span class="sxs-lookup"><span data-stu-id="1c090-129">The **Auto-generated** setting is found on the import project, under **View map**, on the **Mapping details** tab.</span></span>
-   <span data-ttu-id="1c090-130">إذا لم يتم تعيين حقل **رقم دُفعة دفتر اليومية** إلى **مُنشأ تلقائيًا**، فسيتم إنشاء رقم دُفعة دفتر اليومية على الشكل التالي:</span><span class="sxs-lookup"><span data-stu-id="1c090-130">If the **Journal batch number** field isn't set to **Auto-generated**, the journal batch number is created as follows:</span></span>
    -   <span data-ttu-id="1c090-131">إذا تطابق رقم دُفعة دفتر اليومية الذي تم تعريفه في الملف المستورد مع دفتر يومية موجود غير مرحّل، فسيتم استيراد كافة البنود التي لديها رقم دُفعة دفتر يومية مطابق إلى دفتر اليومية الموجود.</span><span class="sxs-lookup"><span data-stu-id="1c090-131">If the journal batch number that is defined in the imported file matches an existing, unposted daily journal, all lines that have a matching journal batch number are imported into the existing journal.</span></span> <span data-ttu-id="1c090-132">لا يتم استيراد البنود إطلاقًا إلى رقم دُفعة دفتر يومية تم ترحيله.</span><span class="sxs-lookup"><span data-stu-id="1c090-132">Lines are never imported into a posted journal batch number.</span></span> <span data-ttu-id="1c090-133">بدلاً من ذلك، يتم إنشاء رقم جديد.</span><span class="sxs-lookup"><span data-stu-id="1c090-133">Instead, a new number is created.</span></span>
    -   <span data-ttu-id="1c090-134">إذا لم يتطابق رقم دُفعة دفتر اليومية الذي تم تعريفه في الملف المستورد مع دفتر يومية موجود غير مرحّل، فسيتم تجميع كافة البنود التي لديها رقم دُفعة دفتر يومية مطابق ضمن دفتر يومية جديد.</span><span class="sxs-lookup"><span data-stu-id="1c090-134">If the journal batch number that is defined in the imported file doesn't match an existing, unposted daily journal, all lines that have the same journal batch number are grouped under a new journal.</span></span> <span data-ttu-id="1c090-135">على سبيل المثال، يتم استيراد كافة البنود حيث 1 هو رقم دُفعة دفتر اليومية إلى دفتر يومية جديد، ويتم استيراد كافة البنود حيث 2 هو رقم دُفعة دفتر اليومية إلى دفتر يومية جديد آخر.</span><span class="sxs-lookup"><span data-stu-id="1c090-135">For example, all lines that have a journal batch number of 1 are imported into a new journal, and all lines that have a journal batch number of 2 are imported into a second new journal.</span></span> <span data-ttu-id="1c090-136">يتم إنشاء رقم دُفعة دفتر اليومية باستخدام التسلسل الرقمي الذي يتم تعريفه في محددات دفتر الأستاذ العام.</span><span class="sxs-lookup"><span data-stu-id="1c090-136">The journal batch number is created by using the number sequence that is defined in the General ledger parameters.</span></span>

### <a name="voucher-number"></a><span data-ttu-id="1c090-137">رقم الإيصال</span><span class="sxs-lookup"><span data-stu-id="1c090-137">Voucher number</span></span>

-   <span data-ttu-id="1c090-138">عندما تستخدم الإعداد **المعالجة المستندة إلى مجموعات** على كيان دفتر اليومية العام، يجب توفير رقم الإيصال في الملف المستورد.</span><span class="sxs-lookup"><span data-stu-id="1c090-138">When you use the **Set-based processing** setting on the General journal entity, the voucher number must be provided in the imported file.</span></span> <span data-ttu-id="1c090-139">يتم تعيين رقم الإيصال الذي يتم توفيره في الملف المستورد إلى كل حركة، حتى لو لم يكن الإيصال متوازنًا.</span><span class="sxs-lookup"><span data-stu-id="1c090-139">Every transaction in the General journal is assigned the voucher number that is provided in the imported file, even if the voucher isn’t balanced.</span></span> <span data-ttu-id="1c090-140">إذا أردت استخدام المعالجة المستندة إلى مجموعات، ولكنك تريد أيضًا استخدام التسلسل الرقمي المحدد لأرقام الإيصالات، فقد تم توفير إصلاح عاجل لإصدار فبراير 2016.</span><span class="sxs-lookup"><span data-stu-id="1c090-140">If you want to use set-based processing, but you also want to use the number sequence that is defined for voucher numbers, a hotfix has been provided for the February 2016 release.</span></span> <span data-ttu-id="1c090-141">رقم الإصلاح العاجل هو 3170316 ويمكن تنزيله من Lifecycle services (LCS).</span><span class="sxs-lookup"><span data-stu-id="1c090-141">The hotfix number is 3170316 and available for download from Lifecycle services (LCS).</span></span> <span data-ttu-id="1c090-142">لمزيد من المعلومات، راجع [تنزيل الإصلاحات العاجلة من Lifecycle Services](..\migration-upgrade\download-hotfix-lcs.md).</span><span class="sxs-lookup"><span data-stu-id="1c090-142">For more information, see [Download hotfixes from Lifecycle Services](..\migration-upgrade\download-hotfix-lcs.md).</span></span>
    -   <span data-ttu-id="1c090-143">لتمكين هذه الوظيفة، في اسم دفتر اليومية الذي يُستخدم لعمليات الاستيراد، قم بتعيين **توزيع الرقم عند الترحيل** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="1c090-143">To enable this functionality, on the journal name that is used for imports, set **Number allocation at posting** to **Yes**.</span></span>
    -   <span data-ttu-id="1c090-144">يجب تحديد رقم إيصال في الملف المستورد.</span><span class="sxs-lookup"><span data-stu-id="1c090-144">A voucher number must still be defined in the imported file.</span></span> <span data-ttu-id="1c090-145">غير أن هذا الرقم مؤقت وتتم الكتابة فوقه بواسطة رقم الإيصال عند ترحيل دفتر اليومية.</span><span class="sxs-lookup"><span data-stu-id="1c090-145">However, this number is temporary and is overwritten by the voucher number when the journal is posted.</span></span> <span data-ttu-id="1c090-146">يجب التأكد من تجميع بنود دفتر اليومية بشكل صحيح حسب رقم الإيصال المؤقت.</span><span class="sxs-lookup"><span data-stu-id="1c090-146">You must make sure that the lines of the journal are grouped correctly by temporary voucher number.</span></span> <span data-ttu-id="1c090-147">على سبيل المثال، أثناء عملية الترحيل، يتم العثور على ثلاثة بنود لديها رقم الإيصال المؤقت 1.</span><span class="sxs-lookup"><span data-stu-id="1c090-147">For example, during posting, three lines are found that have a temporary voucher number of 1.</span></span> <span data-ttu-id="1c090-148">وتتم الكتابة فوق رقم الإيصال المؤقت لكافة البنود الثلاثة بواسطة الرقم التالي في التسلسل الرقمي.‬</span><span class="sxs-lookup"><span data-stu-id="1c090-148">The temporary voucher number of all three lines is overwritten by the next number in the number sequence.</span></span> <span data-ttu-id="1c090-149">إذا لم تكن هذه البنود الثلاثة عبارة عن إدخال متوازن، فلن يتم ترحيل الإيصال.</span><span class="sxs-lookup"><span data-stu-id="1c090-149">If those three lines aren’t a balanced entry, the voucher isn't posted.</span></span> <span data-ttu-id="1c090-150">بعد ذلك، إذا تم العثور على بنود تحتوي على رقم الإيصال المؤقت 2، فستتم الكتابة فوق هذا الرقم بواسطة رقم الإيصال التالي في التسلسل الرقمي، وما إلى ذلك.</span><span class="sxs-lookup"><span data-stu-id="1c090-150">Next, if lines are found that have a temporary voucher number of 2, this number is overwritten by the next voucher number in the number sequence, and so on.</span></span>

<!-- -->

-   <span data-ttu-id="1c090-151">عندما لا تستخدم الإعداد **المعالجة المستندة إلى مجموعات**، لا يجب عليك توفير أي رقم إيصال في الملف المستورد.</span><span class="sxs-lookup"><span data-stu-id="1c090-151">When you don't use the **Set-based processing** setting, you do not need to provide a voucher number in the imported file.</span></span> <span data-ttu-id="1c090-152">يتم إنشاء أرقام الإيصالات هذه أثناء عملية الاستيراد، استنادًا إلى إعداد اسم دفتر اليومية (**إيصال واحد فقط**، **فيما يتعلق بالرصيد**، وهكذا).</span><span class="sxs-lookup"><span data-stu-id="1c090-152">The voucher numbers are created during import, based on the setup of the journal name (**One voucher only**, **In connection of balance**, and so on).</span></span> <span data-ttu-id="1c090-153">على سبيل المثال، إذا تم تعريف اسم دفتر اليومية بصيغة **فيما يتعلق بالرصيد**، فسيتلقى البند الأول رقم إيصال افتراضي جديد.</span><span class="sxs-lookup"><span data-stu-id="1c090-153">For example, if the journal name is defined as **In connection of balance**, the first line receives a new default voucher number.</span></span> <span data-ttu-id="1c090-154">يقوم النظام عندئذٍ بتقييم البند لتحديد ما إذا كانت حسابات المدين تساوي حسابات الدائن.</span><span class="sxs-lookup"><span data-stu-id="1c090-154">The system then evaluates the line to determine whether the debits equal the credits.</span></span> <span data-ttu-id="1c090-155">في حال وجود حساب مقابل في البند، يتلقى البند التالي المستورد رقم إيصال جديد.</span><span class="sxs-lookup"><span data-stu-id="1c090-155">If an offset account exists on the line, the next line that is imported receives a new voucher number.</span></span> <span data-ttu-id="1c090-156">أما في حال عدم وجود حساب مقابل، فسيقوم النظام بتقييم ما إذا كانت حسابات المدين تساوي حسابات الدائن مع استيراد كل بند.</span><span class="sxs-lookup"><span data-stu-id="1c090-156">If no offset account exists, the system evaluates whether the debits equal the credits as each new line is imported.</span></span>
-   <span data-ttu-id="1c090-157">إذا تم تعيين حقل **رقم الإيصال** إلى **مُنشأ تلقائيًا**، فلن تنجح عملية الاستيراد.</span><span class="sxs-lookup"><span data-stu-id="1c090-157">If the **Voucher number** field is set to **Auto-generated**, the import won't succeed.</span></span> <span data-ttu-id="1c090-158">فالإعداد **مُنشأ تلقائيًا** المتعلق **برقم الإيصال** غير معتمد.</span><span class="sxs-lookup"><span data-stu-id="1c090-158">The **Auto-generated** setting for the **Voucher number** field isn't supported.</span></span>

<span data-ttu-id="1c090-159">بشكل افتراضي، يستخدم كيان دفتر اليومية العام المعالجة المستندة إلى مجموعات.</span><span class="sxs-lookup"><span data-stu-id="1c090-159">By default, the General journal entity uses set-based processing.</span></span> <span data-ttu-id="1c090-160">بعد تقييم متطلبات العمل لمؤسستك، يمكنك تغيير إعداد **المعالجة المستندة إلى مجموعات** بالنقر فوق **كيانات البيانات** في مساحة عمل **إدارة البيانات**.</span><span class="sxs-lookup"><span data-stu-id="1c090-160">After you evaluate the business requirements for your organization, you can change the **Set-based processing** setting by clicking **Data entities** in the **Data management** workspace.</span></span> <span data-ttu-id="1c090-161">يُستخدم إعداد "المعالجة المستندة إلى مجموعات" لتسريع عملية الاستيراد.</span><span class="sxs-lookup"><span data-stu-id="1c090-161">Set-based processing is used to speed up the import process.</span></span> <span data-ttu-id="1c090-162">وإذا لم تستخدم إعداد "المعالجة المستندة إلى مجموعات"، فستتم عملية استيراد كيان دفتر اليومية العام ببطء.</span><span class="sxs-lookup"><span data-stu-id="1c090-162">If you don't use set-based processing, import of the General journal entity import will be slower.</span></span>




