---
title: مهمة تنظيف الإدخالات المتاحة في إدارة المستودع‬‏‫
description: يصف هذا الموضوع مهمة تنظيف الإدخالات المتاحة في إدارة المستودع‬‏‫، مما يساعد على تحسين أداء النظام عن طريق التعرف على السجلات ذات الصلة ولكن غير المطلوبة وحذفها.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: f6d1f8a4c85c2161d1b79246d437bb3b4d223d1d
ms.sourcegitcommit: a3cd2783ae120ac6681431c010b9b126a9ca7d94
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/29/2020
ms.locfileid: "3410923"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="fdebf-103">مهمة تنظيف الإدخالات المتاحة في إدارة المستودع‬‏‫</span><span class="sxs-lookup"><span data-stu-id="fdebf-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="fdebf-104">يتأثر أداء الاستعلامات المستخدمة لحساب المخزون الفعلي بعدد السجلات الموجودة في الجداول المعنية.</span><span class="sxs-lookup"><span data-stu-id="fdebf-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="fdebf-105">ثمة طريقة لتحسين الأداء وهي تقليل عدد السجلات التي يجب أن تأخذها قاعدة البيانات في الاعتبار.</span><span class="sxs-lookup"><span data-stu-id="fdebf-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="fdebf-106">يصف هذا الموضوع مهمة تنظيف الإدخالات المتاحة، مما يؤدي إلى حذف السجلات غير المطلوبة في الجدولين InventSum وWHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="fdebf-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="fdebf-107">تقوم هذان الجدولان بتخزين المعلومات الموجودة للأصناف التي تم تمكينها لمعالجة إدارة المستودع.</span><span class="sxs-lookup"><span data-stu-id="fdebf-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="fdebf-108">(يُشار إلى هذه الأصناف باسم أصناف WHS.) قد يؤدي حذف هذه السجلات إلى تحسين أداء عمليات حساب القيم الفعلية.</span><span class="sxs-lookup"><span data-stu-id="fdebf-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="fdebf-109">ما تقوم به مهمة التنظيف</span><span class="sxs-lookup"><span data-stu-id="fdebf-109">What the cleanup job does</span></span>

<span data-ttu-id="fdebf-110">تقوم مهمة تنظيف الإدخالات المتاحة بحذف أي سجلات في الجدولين WHSInventReserve وInventSum حيث قيم جميع الحقول هي *0* (صفر).</span><span class="sxs-lookup"><span data-stu-id="fdebf-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="fdebf-111">ويمكن حذف هذه السجلات لأنها لا تساهم في المعلومات الفعلية.</span><span class="sxs-lookup"><span data-stu-id="fdebf-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="fdebf-112">تقوم الوظيفة بحذف السجلات التي تقع تحت مستوى **الموقع** فقط.</span><span class="sxs-lookup"><span data-stu-id="fdebf-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="fdebf-113">إذا تم السماح بالمخزون السالب الفعلي، فقد لا تتمكن مهمة التنظيف من حذف كافة الإدخالات ذات الصلة.</span><span class="sxs-lookup"><span data-stu-id="fdebf-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="fdebf-114">يعود سبب هذا التقييد إلى أنه يتعين على المهمة السماح بسيناريو معين حيث تتضمن لوحة ترخيص أرقامًا تسلسلية متعددة، وأصبح أحد هذه الأرقام سالبًا.</span><span class="sxs-lookup"><span data-stu-id="fdebf-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="fdebf-115">على سبيل المثال، سيكون لدى النظام صفر متاح على مستوى لوحة الترخيص عندما يكون لدى لوحة الترخيص +1 قطع من الرقم التسلسلي 1 و–1 من الرقم التسلسلي 2.</span><span class="sxs-lookup"><span data-stu-id="fdebf-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="fdebf-116">لهذا السيناريو الخاص، تجري المهمة أولاً عملية حذف واسعة النطاق، حيث تحاول إجراء الحذف من المستويات الدنيا أولاً.</span><span class="sxs-lookup"><span data-stu-id="fdebf-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="fdebf-117">جدولة مهمة التنظيف وتكوينها</span><span class="sxs-lookup"><span data-stu-id="fdebf-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="fdebf-118">تتوفر مهمة تنظيف الإدخالات المتاحة في **إدارة المخزون \> المهام الدورية \> التنظيف \> تنظيف الإدخالات المتاحة في إدارة المستودع**.</span><span class="sxs-lookup"><span data-stu-id="fdebf-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="fdebf-119">استخدم إعدادات المهمة القياسية للتحكم في نطاق وجدول تشغيل المهمة.</span><span class="sxs-lookup"><span data-stu-id="fdebf-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="fdebf-120">علاوةً على ذلك، يتم توفير الإعدادات التالية:</span><span class="sxs-lookup"><span data-stu-id="fdebf-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="fdebf-121">**الحذف في حالة عدم التحديث لهذا العدد من الأيام‬** – أدخل الحد الأدنى لعدد الأيام التي يجب أن تنتظر خلالها المهمة قبل أن تحذف الإدخالات المتاحة التي انخفضت كميتها إلى الصفر.</span><span class="sxs-lookup"><span data-stu-id="fdebf-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="fdebf-122">استخدم هذا الإعداد للمساعدة في تقليل مخاطر حذف الإدخالات المتاحة التي لا تزال قيد الاستخدام.</span><span class="sxs-lookup"><span data-stu-id="fdebf-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="fdebf-123">إذا أردت حدوث عملية التنظيف في أقرب وقت ممكن، فيمكنك إدخال *0* (صفر) أو ترك الحقل فارغًا.</span><span class="sxs-lookup"><span data-stu-id="fdebf-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="fdebf-124">**الحد الأقصى لوقت التنفيذ (بالساعات)** - أدخل الحد الأقصى لوقت التنفيذ لمهمة التنظيف، بالساعات.</span><span class="sxs-lookup"><span data-stu-id="fdebf-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="fdebf-125">إذا لم تكتمل المهمة قبل مرور هذه الفترة، فستحفظ العمل الذي اكتمل حتى الآن ثم تُغلق نفسها.</span><span class="sxs-lookup"><span data-stu-id="fdebf-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="fdebf-126">تعتبر هذه الإمكانية ذات صلة بشكل خاص فيما يتعلق بعمليات التنفيذ حيث يكون استخدام المخزون شديد الأهمية.</span><span class="sxs-lookup"><span data-stu-id="fdebf-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="fdebf-127">في هذه الحالات، يجب جدولة المهمة بحيث تعمل في الأوقات التي يكون فيها حل النظام خفيفًا قدر الإمكان.</span><span class="sxs-lookup"><span data-stu-id="fdebf-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="fdebf-128">إذا أردت متابعة تشغيل الوظيفة الدُفعية حتى اكتمالها، فيمكنك إما إدخال *0* (صفر) أو ترك الحقل فارغًا.</span><span class="sxs-lookup"><span data-stu-id="fdebf-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="fdebf-129">يتوفر هذا الإعداد فقط إذا كانت الميزة ذات الصلة [قيد التشغيل في النظام](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="fdebf-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="fdebf-130">وعلى الرغم من أنه يمكنك تشغيل المهمة أثناء ساعات العمل العادية، إلا أنه المستحسن تشغيلها خارج ساعات العمل.</span><span class="sxs-lookup"><span data-stu-id="fdebf-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="fdebf-131">وبهذه الطريقة، يمكنك منع التعارضات التي يمكن أن تحدث إذا كان المستخدم يستخدم سجلاً يجري تنظيفه أيضًا.</span><span class="sxs-lookup"><span data-stu-id="fdebf-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="fdebf-132">إذا حاولت المهمة حذف سجل لأحد العناصر بينما هذا السجل قيد الاستخدام من قبل مستخدم آخر، فسيحدث خطأ توقف تام إما لمهمة التنظيف أو المستخدم.</span><span class="sxs-lookup"><span data-stu-id="fdebf-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="fdebf-133">عند تشغيل المهمة، يكون حجم الالتزام فيها 100.</span><span class="sxs-lookup"><span data-stu-id="fdebf-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="fdebf-134">بمعنى آخر، ستحاول الالتزام مرة واحدة لكل 100 عملية حذف.</span><span class="sxs-lookup"><span data-stu-id="fdebf-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="fdebf-135">ومع ذلك، ولأن بعض عمليات الحذف تستند إلى مجموعة، فقد تكون هناك سيناريوهات يمكن فيها حذف أكثر من 100 سجل في نفس العملية.</span><span class="sxs-lookup"><span data-stu-id="fdebf-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="fdebf-136">وبالتالي، قد تحدث في بعض الأحيان عمليات تصعيد التأمين.</span><span class="sxs-lookup"><span data-stu-id="fdebf-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="fdebf-137">التأثير المحتمل على المستخدم</span><span class="sxs-lookup"><span data-stu-id="fdebf-137">Possible user impact</span></span>

<span data-ttu-id="fdebf-138">قد يتأثر المستخدمون إذا قامت مهمة تنظيف الإدخالات المتاحة بحذف كافة السجلات لمستوى معين (مثل مستوى لوحة الترخيص).</span><span class="sxs-lookup"><span data-stu-id="fdebf-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="fdebf-139">في هذه الحالة، قد لا تعمل الوظيفة التي تسمح برؤية أن المخزون كان متاحًا في السابق في لوحة ترخيص كما هو متوقع، لأن الإدخالات المتاحة ذات الصلة لم تعد متوفرة.</span><span class="sxs-lookup"><span data-stu-id="fdebf-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="fdebf-140">(تتحقق هذه الوظيفة من الشرط **الكمية \<\> 0** في إعدادات **عرض البُعد** عندما يعرض المستخدمون المعلومات المتاحة.) ومع ذلك، فإن تحسين الأداء الذي توفره مهمة التنظيف يجب أن يعوّض هذه الخسارة البسيطة في الوظائف.</span><span class="sxs-lookup"><span data-stu-id="fdebf-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="fdebf-141">جعل إعداد الحد الأقصى لوقت التنفيذ متوفرًا</span><span class="sxs-lookup"><span data-stu-id="fdebf-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="fdebf-142">بشكل افتراضي، لا يتوفر إعداد **الحد الأقصى لوقت التنفيذ**.</span><span class="sxs-lookup"><span data-stu-id="fdebf-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="fdebf-143">إذا أردت استخدامه، يجب استخدام [إدارة الميزات](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) لتشغيل الميزة ذات الصلة في النظام.</span><span class="sxs-lookup"><span data-stu-id="fdebf-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="fdebf-144">في مساحة عمل **إدارة الميزات**، تكون هذه الميزة مدرجة بالطريقة التالية:</span><span class="sxs-lookup"><span data-stu-id="fdebf-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="fdebf-145">**الوحدة:** *إدارة المستودعات*</span><span class="sxs-lookup"><span data-stu-id="fdebf-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="fdebf-146">**اسم الميزة:** *الحد الأقصى لوقت تنفيذ مهمة تنظيف الإدخالات المتاحة في إدارة المستودع‬‏‫‬*</span><span class="sxs-lookup"><span data-stu-id="fdebf-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
