---
title: إعادة حساب صافي مبالغ البند عند استيراد أوامر المبيعات وعروض الأسعار
description: توضح هذه المقالة ما إذا كان النظام سيُعيد حساب صافي المبالغ عند استيراد أوامر المبيعات وعروض الأسعار وكيفية القيام بذلك. ويوضح أيضا كيفيه التحكم في الأداء في الإصدارات المختلفة من Microsoft Dynamics 365 Supply Chain Management.
author: Henrikan
ms.date: 08/05/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: henrikan
ms.search.validFrom: 2022-06-08
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: edda0c016130e2a273adf8f3d3e00e2d3ae9d5c6
ms.sourcegitcommit: ce58bb883cd1b54026cbb9928f86cb2fee89f43d
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/25/2022
ms.locfileid: "9719324"
---
# <a name="recalculate-line-net-amounts-when-importing-sales-orders-and-quotations"></a>إعادة حساب صافي مبالغ البند عند استيراد أوامر المبيعات وعروض الأسعار

[!include [banner](../includes/banner.md)]

توضح هذه المقالة ما إذا كان النظام سيُعيد حساب صافي المبالغ عند استيراد أوامر المبيعات وعروض الأسعار وكيفية القيام بذلك. ويوضح أيضا كيفيه التحكم في الأداء في الإصدارات المختلفة من Microsoft Dynamics 365 Supply Chain Management.

## <a name="how-updates-to-net-line-amounts-are-calculated-on-import"></a>كيفيه حساب تحديثات المبالغ الصافية في البند عند الاستيراد

تم تقديم الإصدار 10.0.23 من Supply Chain Management [bugfix 604418](https://fix.lcs.dynamics.com/issue/results/?q=604418). غيّر إصلاح الخطأ هذا الشروط التي بموجبها يمكن تحديث الحقل **صافي المبلغ** في أحد البنود أو إعادة حسابه عند استيراد تحديثات أوامر المبيعات الحالية وعروض الأسعار. في 10.0.29 الإصدار ، يمكنك استبدال إصلاح الخلل هذا عن طريق تشغيل القيمة الصافية للسطر المحسوب *في ميزه الاستيراد*. هذه الميزة لها تأثير مشابه ، ولكنها توفر اعداد عمومي يسمح لك بالرجوع إلى الأداء القديم إذا كان من الضروري. علي الرغم من ان السلوك الجديد يجعل النظام يعمل بطريقه أكثر بديهية ، الا انه يمكن ان ينتج عنه نتائج غير متوقعه في سيناريوهات محدده حيث تتحقق كافة الشروط التالية:

- يتم استيراد البيانات التي تقوم بتحديث السجلات الموجودة خلال بنود أمر التوريد بالقيمة V2 *أو بنود عروض أسعار المبيعات* الثانية *أو* كيان بنود *أمر الإرجاع باستخدام بروتوكول البيانات المفتوح (OData) ، بما في ذلك المواقف التي تستخدم فيها الكتابة* الثنائي.
- [تقوم سياسات](/dynamicsax-2012/appuser-itpro/trade-agreement-evaluation-policies-white-paper) تقييم الاتفاقية التجارية الموجودة في المكان بتاسيس نهج تغيير يقوم بتقييد التحديثات الخاصة **بحقل صافي المبلغ** في بنود أمر التوريد وبنود عروض أسعار المبيعات و/أو بنود أمر الإرجاع. لاحظ أنه بالنسبة لبنود أمر الإرجاع، يتم دائمًا حساب حقل **صافي المبلغ** ولا يمكن تعيينه يدويًا.
- وتتضمن البيانات المستوردة تغييرات **حقل صافي المبلغ** في البنود ، أو التغييرات (مثل سعر الوحدة أو الكمية أو الخصم) التي ستؤدي إلى أعاده حساب قيمه **حقل صافي المبلغ** في البنود لسجل واحد أو أكثر من سجلات البنود الموجودة.

في وحدات السيناريو المحددة هذه ، يكون تاثير سياسة تقييم اتفاقيه التجارة هو تقييد علي التحديثات الخاصة بحقل **صافي المبلغ** في البند. يعرف هذا التقييد بنهج *التغيير*. وبسبب هذا النهج ، عند استخدام واجهه المستخدم لتحرير الحقل أو أعاده حسابه ، يطالبك النظام بتأكيد ما إذا كنت ترغب في اجراء التغيير ام لا. ومع ذلك ، عند استيراد سجل ، يجب ان يقوم النظام بإجراء الاختيار لك. قبل إصدار 10.0.23 ، يقوم النظام دائما بترك البند صافي المبلغ بدون تغيير ، ما لم يكن المبلغ الصافي للبند الوارد هو 0 (صفر). ومع ذلك ، في الإصدارات الأحدث ، يقوم النظام دائما بتحديث المبلغ الصافي أو أعاده حسابه حسب الحاجة ، ما لم يتم إرشاده بوضوح عدم القيام بذلك. علي الرغم من ان السلوك الجديد هو الأكثر منطقيه ، الا انه قد يتسبب في حدوث مشكلات إذا كنت تقوم بالفعل بتشغيل العمليات أو التكاملات التي تفترض السلوك الأقدم. توضح هذه المقالة كيفيه الرجوع إلى الأداء القديم إذا كان من الضروري.

## <a name="control-calculations-of-line-net-amounts-in-versions-10029-and-later"></a>التحكم في عمليات حساب صافي المبالغ في البنود في الإصدارات ال10.0.29ه والإصدارات الأحدث

قدم إصدار Supply Chain Management 10.0.29 ميزة مسماة *حساب صافي الخط عند الاستيراد*. تضيف هذه الميزة خيارا يسمي **حساب المبلغ** الصافي للبند إلى صفحه معلمات **حسابات مقبوضات**. يتيح لك هذا الخيار الاختيار بين السلوك الجديد والقديم لحساب صافي المبالغ الموجودة بالبند عند الاستيراد.

### <a name="turn-the-calculate-line-net-amount-on-import-feature-on-or-off"></a>تشغيل حساب الحد الصافي للبند في ميزه الاستيراد أو إيقاف تشغيله

عند التحديث إلى 10.0.29 إصدار ، يتم تشغيل المبلغ الصافي الخاص *بالبند الحساب في ميزه الاستيراد* افتراضيا ، ويتم تعيين خيار الحساب الصافي **للبند الجديد** في البداية إلى *"نعم"*. يتوافق الاعداد *"نعم* " مع السلوك القياسي الجديد. وهو يطابق سلوك النظام عند إيقاف تشغيل الميزة ، فيما عدا في حاله الوظيفة [الخاصة بالمعلمة](#CalculateLineAmount)CalculateLineAmount، كما هو موضح لاحقا في هذه المقالة. لا *يتطابق الاعداد* مع سلوك النظام قبل 10.0.23 الإصدار ويتم توفيره بشكل رئيسي لدعم سيناريوهات التكامل القديمة.

يمكن للمسؤولين تشغيل القيمة الصافية للخط الحسابي *علي ميزه الاستيراد* أو إيقاف تشغيلها باستخدام مساحة عمل [أداره الميزات](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md).

### <a name="set-the-calculate-line-net-amount-option"></a>قم بتعيين خيار حساب المبلغ الصافي للبند

عند تشغيل المبلغ الصافي الخاص بالبند الحساب *في ميزه الاستيراد* ، يمكنك تعيين خيار حساب صافي الحد الصافي **للبند باتباع الخطوات التالية**.

1. انتقل إلى **الحسابات المدينة \> إعداد \> معلمات الحسابات المدينة**.
1. في علامة التبويب **الأسعار** ، في عملية حساب الخاص بالمبلغ الصافي للبند **من خلال علامة التبويب السريعة التكامل** ، قم بتعيين خيار حساب صافي الخط الصافي **الى** أحدي القيم التالية:

    - *نعم* – سيقوم النظام دائما بإعاده حساب وتحديث مبالغ البند عند الحاجة. (لذلك، فانه سيتجاهل سياسة تقييم اتفاقيه التجارة.)
    - *لا* - إذا كان المبلغ الصافي الموجود أو الوارد لأي بند هو 0 (صفر) ، تتم أعاده حساب قيمه هذا السطر استنادا إلى القيم الأخرى (مثل سعر الوحدة والكمية والخصم). إذا كان المبلغ الصافي الموجود أو الوارد يختلف عن 0 (صفر) ، وتم تعيين نهج التغيير في حقل المبلغ **الصافي** علي البند ، فلن تتم أعاده حساب الحقل أو تحديثه ، حتى عندما تكون التغييرات الواردة في سعر البند والكمية و/أو الخصم تتضمن انه يجب أعاده حساب إجمالي البند. هذا السلوك يطابق 10.0.22 الإصدار.

### <a name="how-the-calculate-line-net-amount-on-import-feature-affects-the-calculatelineamount-parameter"></a><a name="CalculateLineAmount"></a>كيفيه تأثير حساب صافي مبلغ السطر في ميزه الاستيراد علي المعلمة CalculateLineAmount

عند تشغيل المبلغ الصافي الخاص بالبند الحساب *في ميزه الاستيراد* ، لا يكون لقيمه المعلمة الخاصة `CalculateLineAmount` بالجدولين `SalesLine` `SalesQuotationLine` اي تأثير. بدلا من ذلك ، يتم التحكم في السلوك بشكل عمومي بواسطة خيار حساب صافي مبلغ **البند** الموضح في المقطع السابق. ولذلك ، عند تشغيل الميزة ، يجب عدم الحصول علي إيه تبعية للقيمة `CalculateLineAmount`.

عند إيقاف تشغيل حساب الحد الصافي لبند الحساب *في ميزه الاستيراد* ، تعمل المحددة `CalculateLineAmount` الخاصة بالجدولين `SalesLine` و `SalesQuotationLine` كما هو الحال في إصدارات Supply Chain Management 10.0.23 من خلال ال10.0.28 ، كما هو موضح في المقطع التالي.

## <a name="control-line-net-amount-calculations-in-versions-10028-and-earlier"></a>حسابات صافي مبلغ بند التحكم في الإصدارات 10.0.28 والإصدارات السابقة

عند [تقديم إصلاح الخلل 604418](https://fix.lcs.dynamics.com/issue/results/?q=604418) في 10.0.23 الإصدارات ، فانه من الممكن تحديد كيفيه تصرف كل كيان بيانات مناسب عند تحرير البند الصافي للبند أو ضرورة أعاده حسابه نظرا لحدوث تغييرات أخرى (مثل سعر الصنف المحدث). يمكنك التحكم في هذا السلوك عن طريق تعيين المعلمة الجديدة `CalculateLineAmount` لكل سطر إلى أحدي القيم التالية في الملف المستورد:

- **`CalculateLineAmount` = *1*** – يتم دائما أعاده حساب الحقل الصافي **للمبلغ** في البند وتحديثه ، بغض النظر عن ما إذا تم تعيين نهج تغيير للحقل ، وبغض النظر عن قيمه البند الوارد أو الصافي للبند الموجود.
- **`CalculateLineAmount` = *0*** إذا كان المبلغ الصافي الحالي أو الوارد لأي بند يساوي 0 (صفر) ، تتم إعادة حساب قيمة هذا البند استنادًا إلى القيم الأخرى (مثل سعر الوحدة والكمية والخصم). إذا كان المبلغ الصافي الموجود أو الوارد يختلف عن 0 (صفر) ، وتم تعيين نهج تغيير في حقل المبلغ **الصافي** في البند ، فلن تتم أعاده حساب الحقل أو تحديثه.  

يعتمد سلوك النظام علي إصدار Supply Chain Management:

- في الإصدار 10.0.22 والإصدارات السابقة ، يتصرف النظام دائما كما لو `CalculateLineAmount` كان معينا علي القيمة *0* ، ولا توجد طريقه لجعله يعمل كما لو `CalculateLineAmount` كان قد تم تعيينه علي *1*.
- في الإصدارات 10.0.23 من خلال 10.0.28 ، يعمل النظام كما لو `CalculateLineAmount` تم تعيينه علي *1* لكافة البنود حيث لم يتم تعيينه بوضوح إلى *0* في ملف الاستيراد.
