---
title: مزامنة أوامر المبيعات مباشرة بين Sales وSupply Chain Management
description: يناقش هذا الموضوع القوالب والمهام الأساسية التي يتم استخدامها لتشغيل مزامنة أوامر المبيعات مباشرةً بين Dynamics 365 Sales و Dynamics 365 Supply Chain Management.
author: ChristianRytt
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: f0e26c63635179dc4c145f8d08e85fd110d9caac
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/01/2021
ms.locfileid: "5817763"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-supply-chain-management"></a><span data-ttu-id="309c7-103">مزامنة أوامر المبيعات مباشرة بين Sales وSupply Chain Management</span><span class="sxs-lookup"><span data-stu-id="309c7-103">Synchronization of sales orders directly between Sales and Supply Chain Management</span></span>

[!include [banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="309c7-104">يناقش هذا الموضوع القوالب والمهام الأساسية التي يتم استخدامها لتشغيل مزامنة أوامر المبيعات مباشرةً بين Dynamics 365 Sales و Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Dynamics 365 Sales and Dynamics 365 Supply Chain Management.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="309c7-105">تدفق البيانات في حل العميل المتوقع إلى النقدية</span><span class="sxs-lookup"><span data-stu-id="309c7-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="309c7-106">يستخدم حل العميل المتوقع إلى النقدية ميزة تكامل البيانات لمزامنة البيانات عبر مثيلات Supply Chain Management وSales.</span><span class="sxs-lookup"><span data-stu-id="309c7-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Supply Chain Management and Sales.</span></span> <span data-ttu-id="309c7-107">تسمح قوالب حل العميل المتوقع إلى النقدية المتوفرة مع ميزة تكامل البيانات بتدفق بيانات الحسابات وجهات الاتصال والمنتجات وعروض أسعار المبيعات وأوامر المبيعات وفواتير المبيعات بين Supply Chain Management وSales.</span><span class="sxs-lookup"><span data-stu-id="309c7-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Supply Chain Management and Sales.</span></span> <span data-ttu-id="309c7-108">يبين الرسم التوضيحي التالي كيف تتم مزامنة البيانات بين Supply Chain Management وSales.</span><span class="sxs-lookup"><span data-stu-id="309c7-108">The following illustration shows how the data is synchronized between Supply Chain Management and Sales.</span></span>

<span data-ttu-id="309c7-109">[![تدفق البيانات في حل العميل المتوقع إلى النقدية](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="309c7-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="309c7-110">القوالب والمهام</span><span class="sxs-lookup"><span data-stu-id="309c7-110">Templates and tasks</span></span>

<span data-ttu-id="309c7-111">للوصول إلى القوالب المتوفرة، افتح [Power Apps مركز الإدارة](https://preview.admin.powerapps.com/dataintegration) .</span><span class="sxs-lookup"><span data-stu-id="309c7-111">To access the available templates, open [Power Apps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="309c7-112">حدد **المشاريع**، وبعد ذلك، في الزاوية العلوية اليسرى، حدد **مشروع جديد** لتحديد القوالب العامة.</span><span class="sxs-lookup"><span data-stu-id="309c7-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="309c7-113">يتم استخدام القوالب والمهام الأساسية التالية لتشغيل مزامنة أوامر المبيعات مباشرةً بين Sales وSupply Chain Management:</span><span class="sxs-lookup"><span data-stu-id="309c7-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Supply Chain Management.</span></span>

- <span data-ttu-id="309c7-114">**أسماء القوالب في تكامل البيانات:**</span><span class="sxs-lookup"><span data-stu-id="309c7-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="309c7-115">أوامر المبيعات (Sales إلى Supply Chain Management) - مباشر</span><span class="sxs-lookup"><span data-stu-id="309c7-115">Sales Orders (Sales to Supply Chain Management) - Direct</span></span>
    - <span data-ttu-id="309c7-116">أوامر المبيعات (Supply Chain Management إلى Sales) - مباشر</span><span class="sxs-lookup"><span data-stu-id="309c7-116">Sales Orders (Supply Chain Management to Sales) - Direct</span></span>

- <span data-ttu-id="309c7-117">**أسماء المهام في مشروع تكامل البيانات:**</span><span class="sxs-lookup"><span data-stu-id="309c7-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="309c7-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="309c7-118">OrderHeader</span></span>
    - <span data-ttu-id="309c7-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="309c7-119">OrderLine</span></span>

<span data-ttu-id="309c7-120">يجب تنفيذ مهام المزامنة التالية قبل حدوث مزامنة رؤوس وبنود فواتير المبيعات.</span><span class="sxs-lookup"><span data-stu-id="309c7-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="309c7-121">المنتجات (من Supply Chain Management إلى Sales) - مباشر</span><span class="sxs-lookup"><span data-stu-id="309c7-121">Products (Supply Chain Management to Sales) - Direct</span></span>
- <span data-ttu-id="309c7-122">الحسابات (من Sales إلى Supply Chain Management) - مباشر (إذا ما تم استخدامه)</span><span class="sxs-lookup"><span data-stu-id="309c7-122">Accounts (Sales to Supply Chain Management) - Direct (if used)</span></span>
- <span data-ttu-id="309c7-123">جهات الاتصال إلى العملاء (من Sales إلى Supply Chain Management) - مباشر (إذا ما تم استخدامه)</span><span class="sxs-lookup"><span data-stu-id="309c7-123">Contacts to Customers (Sales to Supply Chain Management) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="309c7-124">مجموعة الكيانات</span><span class="sxs-lookup"><span data-stu-id="309c7-124">Entity set</span></span>

| <span data-ttu-id="309c7-125">Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="309c7-125">Supply Chain Management</span></span>  | <span data-ttu-id="309c7-126">ال‏‏مبيعات</span><span class="sxs-lookup"><span data-stu-id="309c7-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="309c7-127">Dataverse رؤوس أوامر المبيعات V2</span><span class="sxs-lookup"><span data-stu-id="309c7-127">Dataverse sales order headers</span></span> | <span data-ttu-id="309c7-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="309c7-128">SalesOrders</span></span>       |
| <span data-ttu-id="309c7-129">Dataverse بنود أمر مبيعات</span><span class="sxs-lookup"><span data-stu-id="309c7-129">Dataverse sales order lines</span></span>   | <span data-ttu-id="309c7-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="309c7-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="309c7-131">تدفق الكيان</span><span class="sxs-lookup"><span data-stu-id="309c7-131">Entity flow</span></span>

<span data-ttu-id="309c7-132">‏‫يتم إنشاء أوامر المبيعات في Sales وتتم مزامنتها إلى Supply Chain Management عند تشغيل **تشغيل المشروع** لأحد المشاريع استنادًا إلى القالب **أوامر المبيعات (Sales إلى Supply Chain Management) - مباشر**.</span><span class="sxs-lookup"><span data-stu-id="309c7-132">Sales orders are created in Sales and synchronized to Supply Chain Management when **Run project** is triggered for a project based on the **Sales Orders (Sales to Supply Chain Management) - Direct** template.</span></span> <span data-ttu-id="309c7-133">لا يمكنك تنشيط ومزامنة الأوامر من Sales إلا إذا كانت جميع **منتجات الأوامر** تتكون من المنتجات التي تتم المحافظة عليها خارجيًا.</span><span class="sxs-lookup"><span data-stu-id="309c7-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="309c7-134">لذلك، قد لا يكون هناك أي منتجات مدونة.</span><span class="sxs-lookup"><span data-stu-id="309c7-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="309c7-135">بعد تنشيط الأمر، يصبح أمر المبيعات للقراءة فقط في واجهة المستخدم (UI).</span><span class="sxs-lookup"><span data-stu-id="309c7-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="309c7-136">عند هذه النقطة، يتم إجراء التحديثات من Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-136">At that point, the updates are made from Supply Chain Management.</span></span> <span data-ttu-id="309c7-137">بعد حصول أمر المبيعات على الحالة **مؤكد**، يمكن استخدام المشروع الذي يستند القالب **أوامر المبيعات (Supply Chain Management إلى Sales) - مباشر** لمزامنة التحديثات أو حالة الاستيفاء من Supply Chain Management إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Supply Chain Management to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Supply Chain Management to Sales.</span></span>

<span data-ttu-id="309c7-138">لا يتعين عليك إنشاء الأوامر في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="309c7-139">يمكنك إنشاء أوامر المبيعات الجديدة في Supply Chain Management بدلاً من ذلك.</span><span class="sxs-lookup"><span data-stu-id="309c7-139">You can create new sales orders in Supply Chain Management instead.</span></span> <span data-ttu-id="309c7-140">بعد حصول أمر المبيعات على الحالة **مؤكد**، تتم مزامنته إلى Sales كما هو موضح في الفقرة السابقة.</span><span class="sxs-lookup"><span data-stu-id="309c7-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="309c7-141">في Supply Chain Management، تساعد عوامل التصفية الموجودة في القالب على ضمان عدم تضمين غير أوامر المبيعات ذات الصلة في المزامنة:</span><span class="sxs-lookup"><span data-stu-id="309c7-141">In Supply Chain Management, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="309c7-142">في أمر المبيعات، يجب إنشاء كل من عميل الأمر وعميل الفوترة من Sales ليتم تضمينه في المزامنة.</span><span class="sxs-lookup"><span data-stu-id="309c7-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="309c7-143">في Supply Chain Management، يتم استخدام الأعمدة **OrderingCustomerIsExternallyMaintained** و **InvoiceCustomerIsExternallyMaintained** لتصفية أوامر المبيعات من جداول البيانات.</span><span class="sxs-lookup"><span data-stu-id="309c7-143">In Supply Chain Management, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** columns are used to filter sales orders from the data tables.</span></span>
- <span data-ttu-id="309c7-144">يجب تأكيد أمر المبيعات في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-144">The sales order in Supply Chain Management must be confirmed.</span></span> <span data-ttu-id="309c7-145">لا تتم مزامنة غير أوامر المبيعات المؤكدة أو أوامر المبيعات التي لها حالة معالجة أعلى، مثل الحالة **مشحون** أو **مفوتر** إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="309c7-146">بعد إنشاء أمر مبيعات أو تعديله، يجب تنفيذ وظيفة الدُفعة **حساب إجماليات المبيعات‬** في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Supply Chain Management must be run.</span></span> <span data-ttu-id="309c7-147">لن تتم مزامنة غير أوامر المبيعات التي تم حساب إجماليات المبيعات‬ فيها إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="309c7-148">ضريبة الشحن</span><span class="sxs-lookup"><span data-stu-id="309c7-148">Freight tax</span></span>

<span data-ttu-id="309c7-149">لا يدعم Sales الضريبة على مستوى الرأس، لأنه يتم تخزين الضريبة على مستوى البند.</span><span class="sxs-lookup"><span data-stu-id="309c7-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="309c7-150">لدعم الضريبة على مستوى الرأس من Supply Chain Managements، مثل الضريبة على الشحن، يقوم النظام بمزامنة الضريبة إلى Sales على أنها منتج مدون بالاسم يُسمى **ضريبة الشحن**، ويكون له مبلغ الضريبة من Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-150">To support tax at the header level from Supply Chain Management, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Supply Chain Management.</span></span> <span data-ttu-id="309c7-151">بهذه الطريقة، يمكن استخدام عملية حساب السعر القياسي في Sales للإجماليات، حتى في حالة وجود ضريبة على مستوى الرأس من Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Supply Chain Management.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="309c7-152">حساب الخصومات وتقريبها</span><span class="sxs-lookup"><span data-stu-id="309c7-152">Discount calculation and rounding</span></span>

<span data-ttu-id="309c7-153">يختلف نموذج حساب الخصم في Sales عن نموذج حساب الخصم في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-153">The discount calculation model in Sales differs from the discount calculation model in Supply Chain Management.</span></span> <span data-ttu-id="309c7-154">في Supply Chain Management، يمكن أن يكون مبلغ الخصم النهائي على بند مبيعات نتيجة لمجموعة من مبالغ الخصم والنسب المئوية.</span><span class="sxs-lookup"><span data-stu-id="309c7-154">In Supply Chain Management, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="309c7-155">إذا كان مبلغ الخصم النهائي هذا مُقسمًا على الكمية في البند، فيمكن أن يحدث تقريب.</span><span class="sxs-lookup"><span data-stu-id="309c7-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="309c7-156">ومع ذلك، لا يؤخذ هذا التقريب في الاعتبار في حالة مزامنة مبلغ خصم تقريبي لكل وحدة إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="309c7-157">للمساعدة في ضمان مزامنة مبلغ الخصم الكامل من بند مبيعات في Supply Chain Management بشكل صحيح إلى Sales، يجب مزامنة المبلغ الكامل دون تقسيمه على كمية البند.</span><span class="sxs-lookup"><span data-stu-id="309c7-157">To help guarantee that the full discount amount from a sales line in Supply Chain Management is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="309c7-158">لذلك، يجب عليك تحديد **طريقة حساب الخصم** كـ **صنف بند** في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="309c7-159">عند مزامنة بند أمر مبيعات من Sales إلى Supply Chain Management، يتم استخدام مبلغ خصم البند الكامل.</span><span class="sxs-lookup"><span data-stu-id="309c7-159">When a sales order line is synchronized from Sales to Supply Chain Management, the full line discount amount is used.</span></span> <span data-ttu-id="309c7-160">نظرًا لأن Supply Chain Management لا يحتوي على حقل يمكنه تخزين مبلغ الخصم الكامل لأحد البنود، يتم تقسيم المبلغ على الكمية ويتم تخزينه في الحقل **خصم البند**.</span><span class="sxs-lookup"><span data-stu-id="309c7-160">Because Supply Chain Management has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="309c7-161">يتم تخزين أي تقريب يحدث في هذا التقسيم في الحقل **تكاليف المبيعات** في بند المبيعات.</span><span class="sxs-lookup"><span data-stu-id="309c7-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="309c7-162">مثال</span><span class="sxs-lookup"><span data-stu-id="309c7-162">Example</span></span>

<span data-ttu-id="309c7-163">**مزامنة من Sales إلي Supply Chain Management**</span><span class="sxs-lookup"><span data-stu-id="309c7-163">**Synchronization from Sales to Supply Chain Management**</span></span>

- <span data-ttu-id="309c7-164">**Sales:** الكمية = 3، خصم لكل بند = 10.00 دولار أمريكي</span><span class="sxs-lookup"><span data-stu-id="309c7-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="309c7-165">**Supply Chain Management:** الكمية = 3 ، مبلغ خصم البند = $3.33 ، رسوم المبيعات =-$0.01</span><span class="sxs-lookup"><span data-stu-id="309c7-165">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="309c7-166">**مزامنة من Supply Chain Management إلى Sales**</span><span class="sxs-lookup"><span data-stu-id="309c7-166">**Synchronization from Supply Chain Management to Sales**</span></span>

- <span data-ttu-id="309c7-167">**Supply Chain Management:** الكمية = 3 ، مبلغ خصم البند = $3.33 ، رسوم المبيعات =-$0.01</span><span class="sxs-lookup"><span data-stu-id="309c7-167">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="309c7-168">**Sales:** الكمية = 3، خصم لكل بند = (3 × 3.33 دولار أمريكي) + 0.01 دولار أمريكي = 10.00 دولار أمريكي</span><span class="sxs-lookup"><span data-stu-id="309c7-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="309c7-169">حل العميل المتوقع إلى النقدية في Sales</span><span class="sxs-lookup"><span data-stu-id="309c7-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="309c7-170">تمت إضافة حقول جديدة إلى جدول **الأمر** وهي تظهر على الصفحة.</span><span class="sxs-lookup"><span data-stu-id="309c7-170">New columns have been added to the **Order** table and appear on the page:</span></span>

- <span data-ttu-id="309c7-171">**تتم المحافظة عليها خارجيًا‬‏‫‬‏‫** - عيّن هذا الخيار إلى **نعم** عندما يأتي الأمر من Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Supply Chain Management.</span></span>
- <span data-ttu-id="309c7-172">**حالة المعالجة** - يستخدم هذا العمود لعرض حالة معالجة الأمر في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-172">**Processing status** – This column shows the processing status of the order in Supply Chain Management.</span></span> <span data-ttu-id="309c7-173">تتوفر القيم التالية:</span><span class="sxs-lookup"><span data-stu-id="309c7-173">The following values are available:</span></span>

    - <span data-ttu-id="309c7-174">**مسودة** – الحالة الأولية عند إنشاء أمر في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="309c7-175">في Sales، لا يمكن تحرير إلا الأوامر التي بحالة المعالجة هذه.</span><span class="sxs-lookup"><span data-stu-id="309c7-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="309c7-176">**نشط** – الحالة بعد تنشيط الأمر في Sales باستخدام الزر **تنشيط**.</span><span class="sxs-lookup"><span data-stu-id="309c7-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="309c7-177">**أوامر المبيعات المؤكدة**</span><span class="sxs-lookup"><span data-stu-id="309c7-177">**Confirmed**</span></span>
    - <span data-ttu-id="309c7-178">**كشف التعبئة**</span><span class="sxs-lookup"><span data-stu-id="309c7-178">**Packing Slip**</span></span>
    - <span data-ttu-id="309c7-179">**مفوتر**</span><span class="sxs-lookup"><span data-stu-id="309c7-179">**Invoiced**</span></span>
    - <span data-ttu-id="309c7-180">**منتقي**</span><span class="sxs-lookup"><span data-stu-id="309c7-180">**Picked**</span></span>
    - <span data-ttu-id="309c7-181">**منتقى جزئيًا**</span><span class="sxs-lookup"><span data-stu-id="309c7-181">**Partially Picked**</span></span>
    - <span data-ttu-id="309c7-182">**معبأ جزئيًا**</span><span class="sxs-lookup"><span data-stu-id="309c7-182">**Partially Packed**</span></span>
    - <span data-ttu-id="309c7-183">**مشحون**</span><span class="sxs-lookup"><span data-stu-id="309c7-183">**Shipped**</span></span>
    - <span data-ttu-id="309c7-184">**مشحون جزئيًا**</span><span class="sxs-lookup"><span data-stu-id="309c7-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="309c7-185">**مفوتر جزئيًا**</span><span class="sxs-lookup"><span data-stu-id="309c7-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="309c7-186">**تم الإلغاء**</span><span class="sxs-lookup"><span data-stu-id="309c7-186">**Cancelled**</span></span>

<span data-ttu-id="309c7-187">يتم استخدام الإعداد **لديه منتجات تتم المحافظة عليها خارجيًا فقط** أثناء تنشيط الأمر للتحقق بشكل مستمر مما إذا كان أمر المبيعات يتكوّن بكامله من منتجات تتم المحافظة عليها خارجيًا.</span><span class="sxs-lookup"><span data-stu-id="309c7-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="309c7-188">إذا كان أمر المبيعات يتكوّن بكامله من منتجات تتم المحافظة عليها خارجيًا، فستتم المحافظة على المنتجات في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-188">If a sales order consists entirely of externally maintained products, the products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="309c7-189">يساعد هذا الإعداد على ضمان عدم تنشيط أو محاولة مزامنة بنود أوامر المبيعات التي تشتمل على منتجات غير معروفة إلى Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Supply Chain Management.</span></span>

<span data-ttu-id="309c7-190">تكون الأزرار **إنشاء فاتورة** و **إلغاء الأمر** و **إعادة الحساب** و **الحصول على منتجات** و **البحث عن عنوان** في صفحة **أمر المبيعات** مخفية للأوامر التي تتم المحافظة عليها خارجيًا إذ سيتم إنشاء الفواتير في Supply Chain Management وستتم مزامنتها إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Supply Chain Management and synchronized to Sales.</span></span> <span data-ttu-id="309c7-191">لا يمكن تحرير هذه الأوامر، لأنه ستتم مزامنة معلومات أمر المبيعات من Supply Chain Management بعد التنشيط.</span><span class="sxs-lookup"><span data-stu-id="309c7-191">These orders can't be edited, because sales order information will be synchronized from Supply Chain Management after activation.</span></span>

<span data-ttu-id="309c7-192">سوف تظل حالة أمر المبيعات **نشطة** للمساعدة في ضمان إمكانية انسياب التغييرات من Supply Chain Management إلى أمر المبيعات في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-192">The sales order status will remain **Active** to help guarantee that changes from Supply Chain Management can flow to the sales order in Sales.</span></span> <span data-ttu-id="309c7-193">للتحكم في هذا السلوك، قم بتعيين الإعداد الافتراضي **Statecode \[الحالة\]** إلى **نشط** في مشروع تكامل البيانات.</span><span class="sxs-lookup"><span data-stu-id="309c7-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="309c7-194">الشروط المسبقة وإعداد التعيين</span><span class="sxs-lookup"><span data-stu-id="309c7-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="309c7-195">قبل إجراء مزامنة لأوامر المبيعات، لا بد من تحديث الإعدادات التالية في النظام.</span><span class="sxs-lookup"><span data-stu-id="309c7-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="309c7-196">الإعداد في Sales</span><span class="sxs-lookup"><span data-stu-id="309c7-196">Setup in Sales</span></span>

- <span data-ttu-id="309c7-197">تأكد من إعداد الأذونات للفريق الذي تم تعيين المستخدم من إعداد الاتصال في Sales إليه.</span><span class="sxs-lookup"><span data-stu-id="309c7-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="309c7-198">إذا كنت تستخدم بيانات العرض التوضيحي، فعادة ما يكون لدى المستخدم حق وصول المسؤول، ولكن هذا الحق لا يتوفر للفريق.</span><span class="sxs-lookup"><span data-stu-id="309c7-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="309c7-199">إذا لم يكن لدى الفريق حق وصول المسؤول، عند تشغيل المشروع من تكامل البيانات، فسوف تتلقى رسالة خطأ تفيد بأن الفريق الرئيسي مفقود.</span><span class="sxs-lookup"><span data-stu-id="309c7-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="309c7-200">انتقل إلى **الإعدادات** &gt; **الأمان** &gt; **الفرق**، حدد الفريق المناسب، وحدد **إدارة الأدوار**، ثم حدد دورًا يملك الأذونات المطلوبة على سبيل المثال، **مسؤول النظام**.</span><span class="sxs-lookup"><span data-stu-id="309c7-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="309c7-201">للتأكد من صحة حساب الخصومات في كل من Sales وSupply Chain Management، يجب تعيين **طريقة حساب الخصم** إلى **صنف البند**.</span><span class="sxs-lookup"><span data-stu-id="309c7-201">To ensure correct calculation of discounts in both Sales and Supply Chain Management **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="309c7-202">انتقل إلى **الإعدادات** &gt; **الإدارة** &gt; **إعدادات النظام** &gt; **Sales**‎، وتأكد من أنه يتم استخدام الإعدادات التالية:</span><span class="sxs-lookup"><span data-stu-id="309c7-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="309c7-203">يكون الخيار **‬‏‫استخدام حساب أسعار النظام** معينًا إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="309c7-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="309c7-204">يكون العمود **طريقة حساب الخصم** معينًا إلى **صنف البند**.</span><span class="sxs-lookup"><span data-stu-id="309c7-204">The **Discount calculation method** column is set to **Line item**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="309c7-205">الإعداد في Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="309c7-205">Setup in Supply Chain Management</span></span>

- <span data-ttu-id="309c7-206">انتقل إلى **المبيعات والتسويق**&gt;**المهام الدورية**&gt;**حساب إجماليات المبيعات**، وعيِّن الوظيفة لتشغيلها كوظيفة دُفعة.</span><span class="sxs-lookup"><span data-stu-id="309c7-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="309c7-207">عيّن الخيار **‏‫حساب إجماليات أوامر المبيعات‬** إلى **نعم**.</span><span class="sxs-lookup"><span data-stu-id="309c7-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="309c7-208">‏‫تعد هذه الخطوة هامة لأن أوامر المبيعات التي تم حساب إجماليات المبيعات‬ فيها هي فقط أوامر المبيعات التي ستتم مزامنتها إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="309c7-209">يجب أن يكون مدى تكرار وظيفة الدُفعة متوافقًا مع مدى تكرار مزامنة أوامر المبيعات.</span><span class="sxs-lookup"><span data-stu-id="309c7-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="309c7-210">إذا كنت تستخدم أيضًا تكامل أمر العمل، ستحتاج إلى إعداد أصل المبيعات.</span><span class="sxs-lookup"><span data-stu-id="309c7-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="309c7-211">يتم استخدام أصل المبيعات لتمييز أوامر المبيعات في Supply Chain Management التي تم إنشاؤها من أوامر العمل في Field Service.</span><span class="sxs-lookup"><span data-stu-id="309c7-211">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="309c7-212">عندما يشتمل أمر مبيعات على أصل مبيعات من نوع **تكامل أمر العمل**، يظهر حقل **حالة أمر العمل الخارجي** في عنوان أمر المبيعات.</span><span class="sxs-lookup"><span data-stu-id="309c7-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="309c7-213">بالإضافة إلى ذلك، يساعد أصل المبيعات في ضمان تصفية أوامر المبيعات التي تم إنشاؤها من أوامر العمل في Field Service أثناء مزامنة أوامر المبيعات من Supply Chain Management إلى Field Service.</span><span class="sxs-lookup"><span data-stu-id="309c7-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="309c7-214">انتقل إلى **المبيعات والتسويق** \> **الإعداد** \> **أوامر المبيعات** \> **أصل المبيعات**.</span><span class="sxs-lookup"><span data-stu-id="309c7-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="309c7-215">حدد **جديد** لإنشاء أصل مبيعات جديد.</span><span class="sxs-lookup"><span data-stu-id="309c7-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="309c7-216">في العمود **أصل المبيعات**، أدخل اسمًا لأصل المبيعات، مثل **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="309c7-216">In the **Sales origin** column, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="309c7-217">في العمود **الوصف**، أدخل وصفاً، مثل **أمر مبيعات من Sales‎**.</span><span class="sxs-lookup"><span data-stu-id="309c7-217">In the **Description** column, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="309c7-218">حدد خانة الاختيار **مهمة نوع الأصل**.</span><span class="sxs-lookup"><span data-stu-id="309c7-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="309c7-219">قم بتعيين عمود **نوع أصل المبيعات** إلى **تكامل أمر المبيعات**.</span><span class="sxs-lookup"><span data-stu-id="309c7-219">Set the **Sales origin type** column to **Sales order integration**.</span></span>
7. <span data-ttu-id="309c7-220">حدد **حفظ**.</span><span class="sxs-lookup"><span data-stu-id="309c7-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-supply-chain-management---direct-data-integration-project"></a><span data-ttu-id="309c7-221">الإعداد في أوامر المبيعات (Sales إلى Supply Chain Management)- مشروع تكامل البيانات المباشر</span><span class="sxs-lookup"><span data-stu-id="309c7-221">Setup in the Sales Orders (Sales to Supply Chain Management) - Direct Data integration project</span></span>

- <span data-ttu-id="309c7-222">تأكد من وجود التعيين المطلوب لـ **Shipto\_country** إلى **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="309c7-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="309c7-223">يمكنك تعيين قيمة افتراضية فارغة في تعيين القيمة لتجنب الاضطرار إلى إدخال بلد للأوامر المحلية.</span><span class="sxs-lookup"><span data-stu-id="309c7-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="309c7-224">عيّن الجانب الأيمن إلى "فارغ"، وعيّن الجانب الأيسر إلى البلد أو المنطقة المطلوبة.</span><span class="sxs-lookup"><span data-stu-id="309c7-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="309c7-225">قيمة القالب هي تعيين قيمة حيث يتم تعيين العديد من البلدان أو المناطق، وحيث "فارغ" = US.</span><span class="sxs-lookup"><span data-stu-id="309c7-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-supply-chain-management-to-sales---direct-data-integration-project"></a><span data-ttu-id="309c7-226">الإعداد في مشروع تكامل البيانات: أوامر المبيعات (Supply Chain Management إلى Sales)‬ - مباشر</span><span class="sxs-lookup"><span data-stu-id="309c7-226">Setup in the Sales Orders (Supply Chain Management to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="309c7-227">مهمة SalesHeader</span><span class="sxs-lookup"><span data-stu-id="309c7-227">SalesHeader task</span></span>

- <span data-ttu-id="309c7-228">تكون قائمة الأسعار مطلوبة لإنشاء الأوامر في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="309c7-229">حدّث تعيين القيمة لـ **pricelevelid.name \[اسم قائمة الأسعار\]** إلى قائمة الأسعار المستخدمة في Sales لكل عملة.</span><span class="sxs-lookup"><span data-stu-id="309c7-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="309c7-230">يمكنك استخدام قائمة الأسعار الافتراضية لعمله واحدة.</span><span class="sxs-lookup"><span data-stu-id="309c7-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="309c7-231">بدلاً من ذلك، إذا كان لديك قوائم أسعار بعملات متعددة، يمكنك استخدام تعيين قيمة.</span><span class="sxs-lookup"><span data-stu-id="309c7-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="309c7-232">قيمة القالب الافتراضية لـ **pricelevelid.name \[اسم قائمة الأسعار\]** تكون **CRM Service USA (نموذج)**.</span><span class="sxs-lookup"><span data-stu-id="309c7-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="309c7-233">مهمة SalesLine</span><span class="sxs-lookup"><span data-stu-id="309c7-233">SalesLine task</span></span>

- <span data-ttu-id="309c7-234">تأكد من وجود تعيين القيمة المطلوب لـ **SalesUnitSymbol** في Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="309c7-234">Make sure that the required value map for **SalesUnitSymbol** in Supply Chain Management exists.</span></span>
- <span data-ttu-id="309c7-235">تأكد من تحديد الوحدات المطلوبة في Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="309c7-236">يتم تعريف قيمة القالب التي لها تعيين قيمة لـ **SalesUnitSymbol** إلى **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="309c7-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="309c7-237">تعيين القالب في تكامل البيانات</span><span class="sxs-lookup"><span data-stu-id="309c7-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="309c7-238">لا تشكل الأعمدة **شروط الدفع** و **شروط الشحن** و **شروط التسليم** و **أسلوب الشحن** و **وضع التسليم** جزءًا من التعيينات الافتراضية.</span><span class="sxs-lookup"><span data-stu-id="309c7-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** columns aren't part of the default mappings.</span></span> <span data-ttu-id="309c7-239">لتعيين هذه الأعمدة، يجب إعداد تعيين قيمة خاصة بالبيانات الموجودة في المؤسسات التي تتم مزامنة الجدول بينها.</span><span class="sxs-lookup"><span data-stu-id="309c7-239">To map these columns, you must set up a value mapping that is specific to the data in the organizations that the table is synchronized between.</span></span>

<span data-ttu-id="309c7-240">تبين الأشكال التوضيحية التالية مثالاً لتعيين قالب في تكامل البيانات.</span><span class="sxs-lookup"><span data-stu-id="309c7-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="309c7-241">يعرض التعيين معلومات العمود التي ستتم مزامنتها من Sales إلى Supply Chain Management أو من Supply Chain Management إلى Sales.</span><span class="sxs-lookup"><span data-stu-id="309c7-241">The mapping shows which column information will be synchronized from Sales to Supply Chain Management, or from Supply Chain Management to Sales.</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderheader"></a><span data-ttu-id="309c7-242">أوامر المبيعات (Supply Chain Management إلى Sales) - مباشر: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="309c7-242">Sales Orders (Supply Chain Management to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="309c7-243">[![تعيين القالب في تكامل البيانات](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="309c7-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderline"></a><span data-ttu-id="309c7-244">أوامر المبيعات (Supply Chain Management إلى Sales) - مباشر: OrderLine</span><span class="sxs-lookup"><span data-stu-id="309c7-244">Sales Orders (Supply Chain Management to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="309c7-245">[![تعيين القالب في تكامل البيانات](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="309c7-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderheader"></a><span data-ttu-id="309c7-246">أوامر المبيعات (Sales إلي Supply Chain Management) - مباشر: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="309c7-246">Sales Orders (Sales to Supply Chain Management) - Direct: OrderHeader</span></span>

<span data-ttu-id="309c7-247">[![تعيين القالب في تكامل البيانات](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="309c7-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderline"></a><span data-ttu-id="309c7-248">أوامر المبيعات (Sales إلى Supply Chain Management) - مباشر: OrderLine</span><span class="sxs-lookup"><span data-stu-id="309c7-248">Sales Orders (Sales to Supply Chain Management) - Direct: OrderLine</span></span>

<span data-ttu-id="309c7-249">[![تعيين القالب في تكامل البيانات](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="309c7-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="309c7-250">مواضيع مرتبطة</span><span class="sxs-lookup"><span data-stu-id="309c7-250">Related topics</span></span>

[<span data-ttu-id="309c7-251">العميل المتوقع إلى النقدية</span><span class="sxs-lookup"><span data-stu-id="309c7-251">Prospect to cash</span></span>](prospect-to-cash.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]