---
title: إنشاء حساب تخزين ومخزن رئيسي في Azure
description: يشرح هذا الموضوع كيفية إنشاء حساب تخزين ومخزن رئيسي في Azure.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5a883011bbff6d82504497d739c07f1ada9e5f69
ms.sourcegitcommit: d6250ee5ced43be39e789324a895fd1c07178935
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/19/2020
ms.locfileid: "4039759"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="eb4ae-103">إنشاء حساب تخزين ومخزن رئيسي في Azure</span><span class="sxs-lookup"><span data-stu-id="eb4ae-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]



<span data-ttu-id="eb4ae-104">تتحمل خدمة الوظيفة الإضافية الفوترة الإلكترونية مسؤولين تخزين جميع بيانات الأعمال في موارد Microsoft Azure التي تملكها شركتك.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="eb4ae-105">لضمان عمل الخدمة بشكل صحيح، وأن الوصول إلى كافة بيانات الأعمال المطلوبة والمُنشأة من قِبل الوظيفة الإضافية الفوترة الإلكترونية يتم بواسطة هذه الوظيفة الإضافية فقط، يجب عليك إنشاء موردين أساسيين في Azure:</span><span class="sxs-lookup"><span data-stu-id="eb4ae-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="eb4ae-106">حساب تخزين Azure (مخزن بيانات ثنائية كبيرة الحجم) لتخزين الفواتير الإلكترونية</span><span class="sxs-lookup"><span data-stu-id="eb4ae-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="eb4ae-107">مخزن رئيسي في Azure لتخزين الشهادات ومعرف موقع منتظم (URI) لحساب التخزين</span><span class="sxs-lookup"><span data-stu-id="eb4ae-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="eb4ae-108">يجب تخصيص مورد مخزن رئيسي مخصص ومخزن بيانات ثنائية كبيرة الحجم للعميل لاستخدامهما خصيصًا مع الوظيفة الإضافية الفوترة الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="eb4ae-109">المتطلبات الأساسية</span><span class="sxs-lookup"><span data-stu-id="eb4ae-109">Prerequisites</span></span>

<span data-ttu-id="eb4ae-110">قبل أن تتمكن من استكمال الخطوات في هذا الموضوع، يجب التأكد من إتمام المهام التالية:</span><span class="sxs-lookup"><span data-stu-id="eb4ae-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="eb4ae-111">إنشاء مورد مخزن رئيسي في Azure.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="eb4ae-112">لمزيد من المعلومات، راجع [حول Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span><span class="sxs-lookup"><span data-stu-id="eb4ae-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="eb4ae-113">إنشاء حساب تخزين Azure (مخزن بيانات ثنائية كبيرة الحجم).</span><span class="sxs-lookup"><span data-stu-id="eb4ae-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="eb4ae-114">لمزيد من المعلومات، راجع [المحافظة على حساب تخزين Azure](https://docs.microsoft.com/azure/storage/blobs/).</span><span class="sxs-lookup"><span data-stu-id="eb4ae-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="eb4ae-115">نظرة عامة</span><span class="sxs-lookup"><span data-stu-id="eb4ae-115">Overview</span></span>

<span data-ttu-id="eb4ae-116">في هذا الموضوع، ستقوم بإكمال خطوتين أساسيتين:</span><span class="sxs-lookup"><span data-stu-id="eb4ae-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="eb4ae-117">إعداد حساب تخزين Azure للحصول على URI حساب التخزين.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="eb4ae-118">إعداد المخزن الرئيسي لتخزين URI حساب التخزين.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="eb4ae-119">إعداد حساب تخزين Azure للحصول على URI حساب التخزين</span><span class="sxs-lookup"><span data-stu-id="eb4ae-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="eb4ae-120">افتح حساب التخزين الذي تخطط لاستخدامه مع الوظيفة الإضافية الفوترة الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="eb4ae-121">انتقل إلى **خدمة الكائن الثنائي كبير الحجم** \> **الحاويات** ، وأنشئ حاوية جديدة.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-121">Go to **Blob service** \> **Containers** , and create a new container.</span></span>
3. <span data-ttu-id="eb4ae-122">أدخل اسمًا للحاوية، وقم بتعيين حقل **مستوى الوصول العام** إلى **خاص (لا وصول مجهول الهوية)**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="eb4ae-123">افتح الحاوية، وانتقل إلى **الإعدادات \> سياسة الوصول**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="eb4ae-124">حدد **إضافة سياسة** لإضافة سياسة وصول مخزّنة.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="eb4ae-125">قم بتعيين حقلي **المعرف** و **الأذونات** كما تقتضي الحاجة.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="eb4ae-126">في حقل **الأذونات** ، يجب تحديد كافة الأذونات.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![منح إذن تخزين كائن ثنائي كبير الحجم](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="eb4ae-128">أدخل تاريخي البدء وانتهاء الصلاحية.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="eb4ae-129">يجب أن يكون تاريخ انتهاء الصلاحية في المستقبل.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="eb4ae-130">حدد **موافق** لحفظ السياسة، ثم احفظ تغييراتك إلى الحاوية.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="eb4ae-131">عد إلى حساب التخزين، وافتح **مستكشف التخزين (معاينه)**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="eb4ae-132">انقر بزر الماوس الأيمن فوق الحاوية، ثم حدد **الحصول على توقيع الوصول المشترك**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="eb4ae-133">في مربع الحوار **توقيع الوصول المشترك** ، قم بنسخ القيمة وتخزينها في الحقل **URI**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="eb4ae-134">سيتم استخدام هذه القيمة في الإجراء التالي وستتم الإشارة إليها على أنها *URI‏‎ توقيع الوصول المشترك*.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![تحديد قيمة URI ونسخها](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="eb4ae-136">إعداد المخزن الرئيسي لتخزين URI حساب التخزين</span><span class="sxs-lookup"><span data-stu-id="eb4ae-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="eb4ae-137">افتح المخزن الرئيسي الذي تخطط لاستخدامه مع الوظيفة الإضافية الفوترة الإلكترونية.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="eb4ae-138">انتقل إلى **الإعدادات** \> **الأسرار** ، ثم حدد **إنشاء/استيراد** لإنشاء سر جديد.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-138">Go to **Settings** \> **Secrets** , and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="eb4ae-139">في الصفحة **إنشاء سر** ، في الحقل **خيارات التحميل** ، حدد **يدوي**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="eb4ae-140">أدخل اسم السر.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-140">Enter the name of the secret.</span></span> <span data-ttu-id="eb4ae-141">سيتم استخدام هذا الاسم أثناء إعداد الخدمة في Regulatory Configuration Services (RCS)، وستتم الإشارة إليها على أنه *اسم سر المخزن الرئيسي*.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="eb4ae-142">في حقل **القيمة** ، حدد **URI توقيع الوصول المشترك** ، ثم حدد **إنشاء**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-142">In the **Value** field, select **Shared Access Signature URI** , and then select **Create**.</span></span>
6. <span data-ttu-id="eb4ae-143">قم بإعداد سياسة الوصول لمنح الوظيفة الإضافية الفوترة الإلكترونية المستوى الصحيح من الوصول الآمن إلى السر الذي أنشأته.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="eb4ae-144">انتقل إلى **الإعدادات \> سياسة الوصول** ، وحدد **إضافة سياسة وصول**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-144">Go to **Settings \> Access policy** , and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="eb4ae-145">عيّن أذونات السر لعمليات **الحصول** و **القائمة**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![منح حق الوصول إلى الخدمة](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="eb4ae-147">عيّن أذونات الشهادة لعمليات **الحصول** و **القائمة**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![منح إذن الشهادة](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="eb4ae-149">في مربع الحوار **كيان الخدمة** ، حدد كياه الخدمة عن طريق إضافة **الوظيفة الإضافية الفوترة الإلكترونية**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="eb4ae-150">حدد **إضافة** ، ثم حدد **حفظ تغييرات المخزن الرئيسي**.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-150">Select **Add** , and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="eb4ae-151">في الصفحة **نظرة عامة** ، انسخ قيمة **اسم DNS** للمخزن الرئيسي.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="eb4ae-152">سيتم استخدام هذه القيمة أثناء إعداد الخدمة في RCS وستتم الإشارة إليها على أنها *URI‏‎ المخزن الرئيسي*.</span><span class="sxs-lookup"><span data-stu-id="eb4ae-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>
