---
title: إعداد عملية استيراد التسوية البنكية المتقدمة
description: تسمح لك ميزة التسوية البنكية المتقدمة باستيراد كشوف الحسابات البنكية الإلكترونية وتسويتها مع الحركات البنكية في Microsoft Dynamics 365 Finance بشكل تلقائي. توضح هذه المقالة كيفية إعداد وظيفة الاستيراد لكشوفات حساباتك البنكية.
author: ShylaThompson
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: BankStatementFormat
audience: Application User
ms.reviewer: roschlom
ms.search.scope: Core, Operations
ms.custom: 106853
ms.assetid: 45dae275-ea45-4c7e-b38f-89297c7b5352
ms.search.region: Global
ms.author: saraschi
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 4d9a2f6efad6b8ddf3a445fe7831244e161c35d5
ms.sourcegitcommit: dd960cf07d8be791fd27c7bb72e6baa2d63ccd51
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/14/2019
ms.locfileid: "2578185"
---
# <a name="set-up-the-advanced-bank-reconciliation-import-process"></a>إعداد عملية استيراد التسوية البنكية المتقدمة

[!include [banner](../includes/banner.md)]

تسمح لك ميزة التسوية البنكية المتقدمة باستيراد كشوف الحسابات البنكية الإلكترونية وتسويتها مع الحركات البنكية في Dynamics 365 Finance بشكل تلقائي. توضح هذه المقالة كيفية إعداد وظيفة الاستيراد لكشوفات حساباتك البنكية. 

يختلف إعداد استيراد كشف الحساب البنكي، استنادًا إلى تنسيق كشف حسابك البنكي الإلكتروني. يدعم Finance ثلاثة تنسيقات جاهزة لكشوف الحسابات: ISO20022 وMT940 وBAI2.

## <a name="set-time-zone-preference"></a>تعيين تفضيل المنطقة الزمنية
عند تكوين إعدادات استيراد كشف الحساب البنكي، فمن الممكن استيرادها بحيث تراعي المنطقة الزمنية لبيانات التاريخ والوقت داخل ملفات كشف الحساب البنكي التي سيتم استيرادها. والإعداد الافتراضي هو افتراض أن جميع قيم الوقت والتاريخ موجودة بالفعل في التوقيت العالمي المتفق عليه (UTC) ولذلك لن يتم تطبيق تحويل المنطقة الزمنية عند استيراد البيانات. 

يتوفر خيار لتحديد منطقة زمنية لاستخدامها في استيراد البيانات. يتوفر هذا الخيار في حقل **تفضيل المنطقة الزمنية** في كل صفحة من صفحات **تفاصيل تنسيق بيانات المصدر** (**مساحة عمل إداره البيانات > تكوين مصادر البيانات > علامة التبويب السريعة > تحديد تنسيق بيانات)**. سيتم تطبيق تفضيل المنطقة الزمنية التي تقوم بإدخالها على جميع عمليات الاستيراد التي تستخدم تنسيق بيانات المصدر. يمكنك إنشاء أي عدد تريده من تنسيقات مصادر البيانات لاستيراد البيانات من مناطق زمنية متعددة.  

قد لا تكون هذه المنطقة الزمنية هي نفسها المنطقة الزمنية لمستخدم أو شركة، لذلك تأكد من المنطقة الزمنية التي تستخدمها بيانات التاريخ والوقت. نوصي بمراعاة النقاط التالية عند إعداد تفضيل المنطقة الزمنية. 

 - سيتم تطبيق تفضيل المنطقة الزمنية على جميع عمليات الاستيراد التي تستخدم تنسيق بيانات المصدر. يمكنك إنشاء أي عدد تريده من تنسيقات مصادر البيانات للتعامل مع استيراد البيانات من مناطق زمنية متعددة. 
 
 - يجب أن يكون تفضيل المنطقة الزمنية هو المنطقة الزمنية المحلية لبيانات التاريخ والوقت في ملف الاستيراد. 
 
 - قد لا تكون المنطقة الزمنية لبيانات التاريخ والوقت مماثلة للمنطقة الزمنية لمستخدم أو شركة.
 
 - يمكن للمستخدمين تعديل المنطقة الزمنية الخاصة بهم باستخدام **خيارات المستخدم** لديهم.

يرجى العلم أن الإجراءات التالية يمكن أن تساعد في تقليل التعارضات المحتملة في التاريخ والوقت عند استيراد كشوف الحسابات البنكية. 

 - تجنب تغيير تفضيلات المنطقة الزمنية لآيه حسابات بنكية تم استيراد كشوف الحسابات لها بالفعل. قد يؤثر تغيير تفضيل المنطقة الزمنية على ترتيب كشوف الحسابات الجديدة بالنسبة لكشوف الحسابات الموجودة بسبب تعديل المنطقة الزمنية. 
 
 - قم بمراجعة جميع عمليات الاستيراد التي تستخدم تنسيق مصدر البيانات المحدد. سيتم تطبيق تفضيل المنطقة الزمنية المحدد للتنسيق على جميع مشاريع الاستيراد التي تستخدم هذا التنسيق. تأكد أن تفضيل المنطقة الزمنية يناسب جميع مشاريع الاستيراد التي تستخدم هذا التنسيق.

## <a name="sample-files"></a>الملفات النموذجية
بالنسبة إلى التنسيقات الثلاثة كلها، يجب أن يكون لديك ملفات تترجم كشف الحساب البنكي الإلكتروني من التنسيق الأصلي إلى تنسيق يستطيع Finance استخدامه. يمكنك العثور على ملفات الموارد المطلوبة تحت عقدة **الموارد‏‎** في مستكشف التطبيق‬ في Microsoft Visual Studio. بعد العثور على الملفات، انسخها إلى موقع واحد معروف، لكي تتمكن من تحميلها بسهولة أثناء عملية الإعداد.

| اسم المورد                                           | اسم الملف                            |
|---------------------------------------------------------|--------------------------------------|
| BankStmtImport\_BAI2CSV\_to\_BAI2XML\_xslt              | BAI2CSV-to-BAI2XML.xslt              |
| BankStmtImport\_BAI2XML\_to\_Reconciliation\_xslt       | BAI2XML-to-Reconciliation.xslt       |
| BankStmtImport\_BankReconciliation\_to\_Composite\_xslt | BankReconciliation-to-Composite.xslt |
| BankStmtImport\_ISO20022XML\_to\_Reconciliation\_xslt   | ISO20022XML-to-Reconciliation.xslt   |
| BankStmtImport\_MT940TXT\_to\_MT940XML\_xslt            | MT940TXT-to-MT940XML.xslt            |
| BankStmtImport\_MT940XML\_to\_Reconciliation\_xslt      | MT940XML-to-Reconciliation.xslt      |
| BankStmtImport\_SampleBankCompositeEntity\_xml          | SampleBankCompositeEntity.xml        |

## <a name="examples-of-bank-statement-formats-and-technical-layouts"></a>أمثلة عن تنسيقات كشوف الحسابات البنكية والتخطيطات التقنية
تجد أدناه أمثلة عن تعريفات التخطيط التقني لملفات استيراد التسوية البنكية المتقدمة وثلاثة ملفات أمثلة عن كشوفات الحسابات البنكية ذات الصلة: https://mbs.microsoft.com/customersource/northamerica/AX/learning/documentation/how-to-articles/exofbankstfotechlayouts  

| تعريف التخطيط التقني                             | ملف مثال عن كشف الحساب البنكي          |
|---------------------------------------------------------|--------------------------------------|
| DynamicsAXMT940Layout                                   | MT940StatementExample                |
| DynamicsAXISO20022Layout                                | ISO20022StatementExample             |
| DynamicsAXBAI2Layout                                    | BAI2StatementExample                 |



## <a name="set-up-the-import-of-iso20022-bank-statements"></a>إعداد استيراد كشوف الحسابات البنكية ISO20022
أولاً، يجب عليك تعريف مجموعة معالجة تنسيق كشف الحساب البنكي لكشوف الحسابات البنكية ISO20022 باستخدام إطار عمل كيان البيانات.

1.  انتقل إلى **مساحات العمل** &gt; **إدارة البيانات**.
2.  انقر فوق **استيراد**.
3.  أدخل اسمًا للتنسيق، على سبيل المثال **ISO20022**.
4.  عيّن حقل **تنسيق بيانات المصدر**إلى **XML-Element**.
5.  عيّن حقل **اسم الكيان** إلى **كشوف حسابات بنكية**.
6.  لتحميل ملفات الاستيراد، انقر فوق **تحميل**، ثم استعرض لتحديد ملف **SampleBankCompositeEntity.xml** الذي قمت بحفظه في وقت سابق.
7.  بعد تحميل كيان كشوف الحسابات البنكية واكتمال التعيين، انقر فوق إجراء **عرض التعيين‬** للكيان.
8.  كيان كشوف الحسابات البنكية عبارة عن كيان مركب يتكون من أربعة كيانات منفصلة. في القائمة، حدد **BankStatementDocumentEntity‎**، ثم انقر فوق إجراء **عرض التعيين**.
9.  على علامة التبويب **التحويلات‬**، انقر فوق **جديد**.
10. للتسلسل الرقمي 1، انقر فوق **تحميل ملف**، ثم حدد الملف **ISO20022XML-to-Reconciliation.xslt** الذي قمت بحفظه في وقت سابق. **ملاحظة:** يتم إنشاء ملفات التحويل للتنسيق القياسي. ولأن البنوك غالبًا ما تخرج عن هذا التنسيق، قد يتعين عليك تحديث ملف التحويل لتعيينه إلى تنسيق كشف حسابك البنكي. <!-- For details about the expected format for ISO20022, see [Dynamics AX ISO20022 Layout](./media/dynamicsaxiso20022layout1.xlsx).-->
11. انقر فوق **جديد**.
12. للتسلسل الرقمي 2، انقر فوق **تحميل ملف**، ثم حدد الملف **BankReconciliation-to-Composite.xslt** الذي قمت بحفظه في وقت سابق.
13. انقر فوق **تطبيق عمليات التحويل‬**.

بعد إعداد مجموعة معالجة التنسيق، ستحدد في الخطوة التالية قواعد تنسيق كشف الحساب البنكي لكشوفات الحسابات البنكية ISO20022.

1.  انتقل إلى **إدارة النقد والبنك** &gt; **إعداد** &gt; **إعداد تسوية بنكية متقدمة** &gt; **تنسيق كشف الحساب البنكي**.
2.  انقر فوق **جديد**.
3.  حدد تنسيق كشف حساب، مثل **ISO20022**.
4.  أدخل اسمًا للتنسيق.
5.  عيّن الحقل **مجموعة معالجة‬** إلى المجموعة التي قمت بتحديدها سابقًا، مثل **ISO20022**.
6.  حدد خانة الاختيار **ملف XML**.

تقضي الخطوة الأخيرة بتمكين التسوية البنكية المتقدمة وتعيين تنسيق كشف الحساب القياسي على الحساب البنكي.

1.  انتقل إلى **إدارة النقد والبنوك** &gt; **الحسابات البنكية**.
2.  حدد الحساب البنكي، وافتحه لعرض التفاصيل.
3.  على علامة تبويب **التسوية‬**، عيّن الخيار **تسوية بنكية متقدمة**إلى **نعم**.
4.  عيّن الحقل **تنسيق كشف الحساب‬‬** إلى التنسيق الذي أنشأته سابقًا، مثل **ISO20022**.

## <a name="set-up-the-import-of-mt940-bank-statements"></a>إعداد استيراد كشوف الحسابات البنكية MT940
أولاً، يجب عليك تعريف مجموعة معالجة تنسيق كشف الحساب البنكي لكشوف الحسابات البنكية MT940 باستخدام إطار عمل كيان البيانات.

1.  انتقل إلى **مساحات العمل** &gt; **إدارة البيانات**.
2.  انقر فوق **استيراد**.
3.  أدخل اسمًا للتنسيق، على سبيل المثال **MT940**.
4.  عيّن حقل **تنسيق بيانات المصدر** إلى **XML-Element**.
5.  عيّن حقل **اسم الكيان** إلى **كشوف حسابات بنكية**.
6.  لتحميل ملفات الاستيراد، انقر فوق **تحميل**، ثم استعرض لتحديد ملف **SampleBankCompositeEntity.xml** الذي قمت بحفظه في وقت سابق.
7.  بعد تحميل كيان كشوف الحسابات البنكية واكتمال التعيين، انقر فوق إجراء **عرض التعيين‬** للكيان.
8.  كيان كشوف الحسابات البنكية عبارة عن كيان مركب يتكون من أربعة كيانات منفصلة. في القائمة، حدد **BankStatementDocumentEntity‎**، ثم انقر فوق إجراء **عرض التعيين**.
9.  على علامة التبويب **التحويلات‬**، انقر فوق **جديد**.
10. للتسلسل الرقمي 1، انقر فوق **تحميل ملف**، ثم حدد الملف **MT940TXT-to-MT940XML.xslt** الذي قمت بحفظه في وقت سابق.
11. انقر فوق **جديد**.
12. للتسلسل الرقمي 2، انقر فوق **تحميل ملف**، ثم حدد الملف **MT940XML-to-Reconciliation.xslt** الذي قمت بحفظه في وقت سابق. **ملاحظة:** يتم إنشاء ملفات التحويل للتنسيق القياسي. ولأن البنوك غالبًا ما تخرج عن هذا التنسيق، قد يتعين عليك تحديث ملف التحويل لتعيينه إلى تنسيق كشف حسابك البنكي. <!--- For details about the expected format for MT940, see [Dynamics AX MT940 Layout](./media/dynamicsaxmt940layout1.xlsx)-->
13. انقر فوق **جديد**.
14. للتسلسل الرقمي 3، انقر فوق **تحميل ملف**، ثم حدد الملف **BankReconciliation-to-Composite.xslt** الذي قمت بحفظه في وقت سابق.
15. انقر فوق **تطبيق عمليات التحويل‬**.

بعد إعداد مجموعة معالجة التنسيق، ستحدد في الخطوة التالية قواعد تنسيق كشف الحساب البنكي لكشوفات الحسابات البنكية MT940.

1.  انتقل إلى **إدارة النقد والبنك** &gt; **إعداد** &gt; **إعداد تسوية بنكية متقدمة** &gt; **تنسيق كشف الحساب البنكي**.
2.  انقر فوق **جديد**.
3.  حدد تنسيق كشف حساب، مثل **MT940**.
4.  أدخل اسمًا للتنسيق.
5.  عيّن الحقل **مجموعة معالجة‬** إلى المجموعة التي قمت بتحديدها سابقًا، مثل **MT940**.
6.  قم بتعيين حقل **نوع الملف** إلى **txt**.

تقضي الخطوة الأخيرة بتمكين التسوية البنكية المتقدمة وتعيين تنسيق كشف الحساب القياسي على الحساب البنكي.

1.  انتقل إلى **إدارة النقد والبنوك** &gt; **الحسابات البنكية**.
2.  حدد الحساب البنكي، وافتحه لعرض التفاصيل.
3.  على علامة تبويب **التسوية‬**، عيّن الخيار **تسوية بنكية متقدمة** إلى **نعم**.
4.  عند مطالبتك بتأكيد تحديد وتمكين التسوية البنكية المتقدمة، انقر فوق **موافق**.
5.  عيّن الحقل **تنسيق كشف الحساب** إلى التنسيق الذي أنشأته سابقًا، مثل **MT940**.

## <a name="set-up-the-import-of-bai2-bank-statements"></a>إعداد استيراد كشوف الحسابات البنكية BAI2
أولاً، يجب عليك تعريف مجموعة معالجة تنسيق كشف الحساب البنكي لكشوف الحسابات البنكية BAI2 باستخدام إطار عمل كيان البيانات.

1.  انتقل إلى **مساحات العمل** &gt; **إدارة البيانات**.
2.  انقر فوق **استيراد**.
3.  أدخل اسمًا للتنسيق، على سبيل المثال **BAI2**.
4.  عيّن حقل **تنسيق بيانات المصدر** إلى **XML-Element**.
5.  عيّن حقل **اسم الكيان** إلى **كشوف حسابات بنكية**.
6.  لتحميل ملفات الاستيراد، انقر فوق **تحميل**، ثم استعرض لتحديد ملف **SampleBankCompositeEntity.xml** الذي قمت بحفظه في وقت سابق.
7.  بعد تحميل كيان كشوف الحسابات البنكية واكتمال التعيين، انقر فوق إجراء **عرض التعيين‬** للكيان.
8.  كيان كشوف الحسابات البنكية عبارة عن كيان مركب يتكون من أربعة كيانات منفصلة. في القائمة، حدد **BankStatementDocumentEntity‎**، ثم انقر فوق إجراء **عرض التعيين**.
9.  على علامة التبويب **التحويلات‬**، انقر فوق **جديد**.
10. للتسلسل الرقمي 1، انقر فوق **تحميل ملف**، ثم حدد الملف **BAI2CSV-to-BAI2XML.xslt** الذي قمت بحفظه في وقت سابق.
11. انقر فوق **جديد**.
12. للتسلسل الرقمي 2، انقر فوق **تحميل ملف**، ثم حدد الملف **BAI2XML-to-Reconciliation.xslt** الذي قمت بحفظه في وقت سابق. **ملاحظة:** يتم إنشاء ملفات التحويل للتنسيق القياسي. ولأن البنوك غالبًا ما تخرج عن هذا التنسيق، قد يتعين عليك تحديث ملف التحويل لتعيينه إلى تنسيق كشف حسابك البنكي. <!--- For details about the expected format for BAI2, see [Dynamics AX BAI2 Layout](./media/dynamicsaxbai2layout1.xlsx).-->
13. انقر فوق **جديد**.
14. للتسلسل الرقمي 3، انقر فوق **تحميل ملف**، ثم حدد الملف **BankReconciliation-to-Composite.xslt** الذي قمت بحفظه في وقت سابق.
15. انقر فوق **تطبيق عمليات التحويل‬**.

بعد إعداد مجموعة معالجة التنسيق، ستحدد في الخطوة التالية قواعد تنسيق كشف الحساب البنكي لكشوفات الحسابات البنكية BAI2.

1.  انتقل إلى **إدارة النقد والبنك** &gt; **إعداد** &gt; **إعداد تسوية بنكية متقدمة** &gt; **تنسيق كشف الحساب البنكي**.
2.  انقر فوق **جديد**.
3.  حدد تنسيق كشف حساب، مثل **BAI2**.
4.  أدخل اسمًا للتنسيق.
5.  عيّن الحقل **مجموعة معالجة‬** إلى المجموعة التي قمت بتحديدها سابقًا، مثل **BAI2**.
6.  قم بتعيين حقل **نوع الملف** إلى **txt**.

تقضي الخطوة الأخيرة بتمكين التسوية البنكية المتقدمة وتعيين تنسيق كشف الحساب القياسي على الحساب البنكي.

1.  انتقل إلى **إدارة النقد والبنوك** &gt; **الحسابات البنكية**.
2.  حدد الحساب البنكي، وافتحه لعرض التفاصيل.
3.  على علامة تبويب **التسوية‬**، عيّن الخيار **تسوية بنكية متقدمة** إلى **نعم**.
4.  عند مطالبتك بتأكيد تحديد وتمكين التسوية البنكية المتقدمة، انقر فوق **موافق**.
5.  عيّن الحقل **تنسيق كشف الحساب** إلى التنسيق الذي أنشأته سابقًا، مثل **BAI2**.

## <a name="test-the-bank-statement-import"></a>اختبار استيراد كشف الحساب البنكي
تقضي الخطوة الأخيرة باختبار إمكانية استيراد كشف الحساب البنكي.

1.  انتقل إلى **إدارة النقد والبنوك** &gt; **الحسابات البنكية**.
2.  حدد الحساب البنكي الذي تم تمكين وظيفة التسوية البنكية المتقدمة له.
3.  على علامة تبويب **التسوية**، انقر فوق **كشوف حسابات بنكية**.
4.  في صفحة **كشف حساب بنكي**، انقر فوق **استيراد كشف الحساب**.
5.  عيّن حقل **الحساب البنكي** إلى الحساب البنكي المحدد. سيتم تعيين حقل **تنسيق كشف الحساب** بشكل تلقائي، استنادًا إلى الإعداد على الحساب البنكي.
6.  انقر فوق **استعراض**، وحدد ملف كشف حسابك البنكي الإلكتروني.
7.  انقر فوق **تحميل**.
8.  وانقر فوق **موافق**.

في حالة نجاح عملية الاستيراد، سوف تتلقى رسالة تشير إلى إتمام عملية استيراد كشوف حساباتك. أما إذا لم تنجح عملية الاستيراد، فابحث عن الوظيفة في مساحة عمل **إدارة البيانات**، في المقطع **محفوظات الوظيفة**. انقر فوق **تفاصيل التنفيذ** للوظيفة لفتح صفحة **ملخص تنفيذ**، ثم انقر فوق **عرض سجل التنفيذ** لعرض أخطاء الاستيراد.



